<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PowerHouseATX Workout Calculator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* --- Global Styles & Resets --- */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
}

body {
  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  line-height: 1.6;
  padding: 20px;
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
}

/* Animated background effect */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    radial-gradient(circle at 20% 80%, rgba(255, 0, 0, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255, 0, 0, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 40% 40%, rgba(255, 0, 0, 0.03) 0%, transparent 50%);
  pointer-events: none;
  z-index: 1;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: #0a0a0a;
}

::-webkit-scrollbar-thumb {
  background: #FF0000;
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: #cc0000;
}

/* --- Main Container --- */
.container {
  max-width: 1400px;
  margin: 0 auto;
  position: relative;
  z-index: 2;
  width: 100%;
}

/* --- Header & Typography --- */
.header-section {
  text-align: center;
  margin-bottom: 40px;
  position: relative;
  background: rgba(26, 26, 26, 0.95);
  backdrop-filter: blur(10px);
  padding: 35px;
  border: 1px solid rgba(255, 0, 0, 0.3);
  border-radius: 16px;
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

h1 {
  font-size: 3.5rem;
  font-weight: 900;
  background: linear-gradient(135deg, #FF0000 0%, #ff6b6b 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 0.25rem;
  text-transform: uppercase;
  letter-spacing: -1.5px;
  line-height: 1;
  text-shadow: 0 0 40px rgba(255, 0, 0, 0.5);
}

.page-title {
  font-size: 2.2rem;
  font-weight: 700;
  color: #e0e0e0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 1rem;
  text-shadow: 0 0 10px rgba(255,255,255,0.1);
}

.subtitle {
  font-size: 1.1rem;
  color: #999;
  font-weight: 300;
  letter-spacing: 1px;
}

/* RP Status Display */
.rp-status {
  background: rgba(0, 0, 0, 0.3);
  padding: 20px;
  border-radius: 12px;
  margin: 20px 0;
  border: 1px solid rgba(255, 0, 0, 0.2);
}

.status-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-top: 15px;
}

.status-item {
  text-align: center;
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
}

.status-value {
  font-size: 1.8rem;
  font-weight: 700;
  color: #FF0000;
}

.status-label {
  font-size: 0.9rem;
  color: #ccc;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Chart Section */
.chart-section {
  background: rgba(26, 26, 26, 0.95);
  backdrop-filter: blur(10px);
  padding: 35px;
  border: 1px solid rgba(255, 0, 0, 0.3);
  border-radius: 16px;
  margin: 20px 0;
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.chart-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  flex-wrap: wrap;
  gap: 10px;
}

.chart-controls {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.chart-controls button {
  padding: 8px 16px;
  font-size: 0.9rem;
  margin: 0;
}

#weeklyChart {
  max-height: 400px;
}

/* Volume Status Indicators */
.volume-status {
  margin-top: 15px;
}

.volume-analysis {
  display: flex;
  align-items: center;
  gap: 15px;
  flex-wrap: wrap;
}

.status-indicator {
  padding: 8px 16px;
  border-radius: 20px;
  font-weight: 700;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.status-indicator.under-minimum { background: #ff4444; color: white; }
.status-indicator.maintenance { background: #ffaa00; color: white; }
.status-indicator.optimal { background: #44ff44; color: black; }
.status-indicator.high { background: #ffff44; color: black; }
.status-indicator.maximum { background: #ff4444; color: white; }

.landmarks-display {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}

.landmarks-display span {
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  font-size: 0.8rem;
}

/* Section Banners */
.section-banner {
  background: linear-gradient(135deg, rgba(255, 0, 0, 0.2) 0%, rgba(255, 0, 0, 0.1) 100%);
  padding: 20px;
  margin: 40px 0 20px 0;
  border-radius: 12px;
  border: 1px solid rgba(255, 0, 0, 0.3);
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  user-select: none;
}

.section-banner:hover {
  background: linear-gradient(135deg, rgba(255, 0, 0, 0.3) 0%, rgba(255, 0, 0, 0.15) 100%);
}

.section-banner h3 {
  font-size: 1.8rem;
  font-weight: 700;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.expand-icon {
  font-size: 1.2rem;
  transition: transform 0.3s ease;
}

.section-banner.expanded .expand-icon {
  transform: rotate(180deg);
}

/* Collapsible sections */
.section-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease;
}

.section-content.expanded {
  max-height: 3000px;
}

/* Calculator Grid */
.calculator-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}

/* Calculator Cards */
.calculator {
  background: rgba(26, 26, 26, 0.95);
  backdrop-filter: blur(10px);
  padding: 35px;
  border: 1px solid rgba(255, 0, 0, 0.3);
  border-radius: 16px;
  margin: 20px 0;
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.calculator:hover {
  border-color: rgba(255, 0, 0, 0.5);
  transform: translateY(-2px);
  box-shadow:
    0 12px 40px rgba(0, 0, 0, 0.5),
    0 0 20px rgba(255, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.calculator h2 {
  font-size: 2rem;
  font-weight: 700;
  color: #fff;
  margin-bottom: 1.5rem;
  padding-bottom: 0.75rem;
  border-bottom: 3px solid #FF0000;
  position: relative;
}

.calculator h2::after {
  content: '';
  position: absolute;
  bottom: -3px;
  left: 0;
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, #FF0000 0%, transparent 100%);
}

/* Form Elements */
.input-group {
  margin-bottom: 1.5rem;
}

label {
  display: block;
  color: #fff;
  font-weight: 600;
  margin-bottom: 10px;
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

input[type="number"], select {
  width: 100%;
  padding: 14px 16px;
  background: rgba(0, 0, 0, 0.5);
  color: #fff;
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  font-size: 1rem;
  transition: all 0.3s ease;
  font-weight: 500;
}

input[type="number"]:focus, select:focus {
  outline: none;
  border-color: #FF0000;
  box-shadow:
    0 0 0 4px rgba(255, 0, 0, 0.1),
    inset 0 0 0 1px rgba(255, 0, 0, 0.2);
  background: rgba(0, 0, 0, 0.7);
}

/* RIR Validation Styling */
input.rir-good {
  border-color: #4CAF50;
  box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
}

input.rir-warning {
  border-color: #ff9800;
  box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.2);
}

input.rir-danger {
  border-color: #f44336;
  box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.2);
}

/* Radio buttons */
.radio-group {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  margin-top: 10px;
}

.radio-group label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 1rem;
  font-weight: 500;
  text-transform: none;
  letter-spacing: normal;
  margin: 0;
  cursor: pointer;
}

input[type="radio"] {
  width: auto;
  margin: 0;
  transform: scale(1.2);
  accent-color: #FF0000;
}

input[type="checkbox"] {
  margin-right: 0.5rem;
  transform: scale(1.5);
  accent-color: #FF0000;
}

.helper-text {
  font-size: 0.875rem;
  color: #bbb;
  margin-top: 5px;
  font-style: italic;
  line-height: 1.4;
}

/* Buttons */
button {
  background: linear-gradient(135deg, #FF0000 0%, #cc0000 100%);
  color: white;
  border: none;
  padding: 16px 32px;
  border-radius: 10px;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 25px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
  width: 100%;
  justify-content: center;
}

button:hover {
  background: linear-gradient(135deg, #ff1a1a 0%, #e60000 100%);
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(255, 0, 0, 0.4);
}

button:active {
  transform: translateY(-1px);
  box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
}

/* Small buttons */
button.small {
  padding: 8px 16px;
  font-size: 0.9rem;
  margin: 5px;
  width: auto;
}

/* Results */
.result {
  margin-top: 1.5rem;
  padding: 25px;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.8) 100%);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 14px;
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
  font-weight: 600;
  min-height: 60px;
  display: flex;
  align-items: center;
}

.result.success {
  border-color: rgba(46, 125, 50, 0.7);
  background: linear-gradient(135deg, rgba(46, 125, 50, 0.15) 0%, rgba(46, 125, 50, 0.08) 100%);
  color: #a5d6a7;
}

.result.warning {
  border-color: rgba(245, 124, 0, 0.7);
  background: linear-gradient(135deg, rgba(245, 124, 0, 0.15) 0%, rgba(245, 124, 0, 0.08) 100%);
  color: #ffcc80;
}

.result.danger {
  border-color: rgba(211, 47, 47, 0.7);
  background: linear-gradient(135deg, rgba(211, 47, 47, 0.15) 0%, rgba(211, 47, 47, 0.08) 100%);
  color: #ef9a9a;
}

/* Feedback Results */
.feedback-results {
  width: 100%;
}

.main-recommendation {
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.main-recommendation h4 {
  color: #FF0000;
  font-size: 1.2rem;
  margin-bottom: 10px;
}

.advice {
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 8px;
}

.sets-info {
  font-size: 1rem;
  color: #ccc;
}

.algorithm-details {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-top: 15px;
}

.algorithm-details > div {
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  font-size: 0.9rem;
}

.stimulus-add_sets { color: #4CAF50; }
.stimulus-maintain { color: #ffcc80; }
.stimulus-reduce_sets { color: #ff9800; }

.rir-feedback {
  margin-top: 15px;
  padding: 12px;
  border-radius: 8px;
  font-size: 0.95rem;
}

.rir-feedback.normal { background: rgba(76, 175, 80, 0.2); }
.rir-feedback.medium { background: rgba(255, 152, 0, 0.2); }
.rir-feedback.high { background: rgba(244, 67, 54, 0.2); }

.deload-warning {
  margin-top: 15px;
  padding: 15px;
  background: rgba(255, 152, 0, 0.2);
  border: 1px solid rgba(255, 152, 0, 0.5);
  border-radius: 8px;
  font-weight: 600;
}

/* Advanced Volume Controls */
.advanced-volume-controls {
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding-top: 20px;
}

.landmark-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 15px;
  margin-bottom: 20px;
}

/* Autoregulation Section */
.autoregulation-section {
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding-top: 20px;
  margin-top: 20px;
}

.autoregulation-section h4 {
  color: #FF0000;
  font-size: 1.2rem;
  margin-bottom: 15px;
}

/* Tooltips */
.rir-tooltip {
  font-size: 12px;
  font-weight: 600;
  pointer-events: none;
}

/* Notifications */
.notification {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Responsive */
@media (max-width: 768px) {
  body {
    padding: 15px;
  }
  
  h1 {
    font-size: 2.5rem;
  }
  
  .page-title {
    font-size: 1.8rem;
  }
  
  .calculator-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  
  .calculator {
    padding: 25px;
    margin: 15px 0;
  }

  .status-grid {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  }

  .chart-header {
    flex-direction: column;
    align-items: stretch;
  }

  .radio-group {
    flex-direction: column;
    gap: 10px;
  }
  
  .algorithm-details {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  body {
    padding: 10px;
  }
  
  h1 {
    font-size: 2rem;
  }
  
  .calculator {
    padding: 20px;
  }

  .landmark-grid {
    grid-template-columns: 1fr;
  }
}

/* === Quick Start Guide === */
.quick-start-guide {
  background: rgba(255, 0, 0, 0.1);
  border: 1px solid rgba(255, 0, 0, 0.3);
  border-radius: 12px;
  padding: 25px;
  margin: 25px 0;
  animation: slideDown 0.5s ease-out;
}

.quick-start-guide h3 {
  color: #FF0000;
  font-size: 1.4rem;
  margin-bottom: 15px;
  text-align: center;
}

.quick-start-content {
  max-width: 600px;
  margin: 0 auto;
}

.quick-start-steps {
  list-style: decimal;
  margin: 0 0 20px 20px;
  line-height: 1.8;
  font-size: 1rem;
}

.quick-start-steps li {
  margin-bottom: 8px;
  padding-left: 5px;
}

.quick-start-steps strong {
  color: #FF6B6B;
}

.quick-start-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  margin-top: 20px;
}

.quick-start-btn {
  background: linear-gradient(135deg, #FF0000 0%, #ff6b6b 100%);
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 600;
  color: white;
  cursor: pointer;
  font-size: 0.95rem;
  transition: all 0.3s ease;
}

.quick-start-btn:hover {
  background: linear-gradient(135deg, #e60000 0%, #ff5252 100%);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);
}

.quick-start-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.9rem;
  color: #cccccc;
  cursor: pointer;
}

.quick-start-checkbox input[type="checkbox"] {
  accent-color: #FF0000;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.quick-start-guide.hidden {
  display: none;
}

/* === Original Modal Styles (kept for reference but unused) === */
.modal-overlay {position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;
                align-items:center;justify-content:center;z-index:1000;}
.modal-dialog  {background:#1a1a1a;border:1px solid #ff0000;padding:2rem 2.5rem;
                border-radius:16px;max-width:480px;width:90%;color:#fff;position:relative;}
.modal-close   {position:absolute;top:12px;right:16px;font-size:1.8rem;background:none;
                border:none;color:#fff;cursor:pointer;}
.qs-list       {margin:1rem 0 1.5rem 1.2rem;line-height:1.6;}
.qs-noshow     {display:flex;align-items:center;gap:.5rem;font-size:.9rem;margin-bottom:1rem;}
.modal-btn     {background:#ff0000;border:none;padding:.75rem 1.5rem;border-radius:8px;
                font-weight:600;cursor:pointer;}
.modal-btn:hover {background:#e60000;}
</style>
</head>
<body>

<div class="container">  <header class="header-section">
    <h1>PowerHouseATX</h1>
    <div class="page-title">Workout Calculator</div>
    <p class="subtitle">Evidence-Based Muscle Building</p>
    
    <!-- Quick Start Guide -->
    <div class="quick-start-guide" id="quickStartGuide">
      <h3>ðŸš€ First-Time Quick-Start Guide</h3>
      <div class="quick-start-content">
        <ol class="quick-start-steps">
          <li><strong>Set volume landmarks</strong> â†’ open "Program Setup" section below</li>
          <li><strong>Track daily volume</strong> â†’ use "Daily Volume" for each muscle group</li>
          <li><strong>Log a workout</strong> â†’ use "Set Feedback" after each exercise</li>
          <li><strong>End of week</strong> â†’ tick "Last workout" & review Weekly analysis</li>
          <li><strong>Start next week</strong> â†’ follow the new RIR target</li>
        </ol>
        <div class="quick-start-actions">
          <button class="quick-start-btn" onclick="dismissQuickStart()">Got it, hide this guide</button>
          <label class="quick-start-checkbox">
            <input type="checkbox" id="dontShowQuickStart"> Don't show again
          </label>
        </div>
      </div>
    </div>
    
    <!-- RP Training Status -->
    <div class="rp-status">
      <h3>Current Training Status</h3>
      <div class="status-grid">
        <div class="status-item">
          <div class="status-value" id="currentWeek">1</div>
          <div class="status-label">Week</div>
        </div>
        <div class="status-item">
          <div class="status-value" id="currentMeso">4</div>
          <div class="status-label">Meso Length</div>
        </div>
        <div class="status-item">
          <div class="status-value" id="currentBlock">1</div>
          <div class="status-label">Block</div>
        </div>
        <div class="status-item">
          <div class="status-value" id="targetRIR">4.5</div>
          <div class="status-label">Target RIR</div>
        </div>
        <div class="status-item">
          <div class="status-value" id="currentPhase">Accumulation</div>
          <div class="status-label">Phase</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Weekly Volume Chart -->
  <div class="chart-section">
    <div class="chart-header">
      <h2>Weekly Volume by Muscle</h2>
      <div class="chart-controls">
        <button class="small" onclick="showVolumeLandmarks()">Show Landmarks</button>
        <button class="small" onclick="resetWeeklyData()">Reset Week</button>
        <button class="small" onclick="exportSummary()">ðŸ“Š Export</button>
      </div>
    </div>
    <canvas id="weeklyChart"></canvas>
  </div>  <div class="section-banner" onclick="toggleSection('daily')">
    <h3>Daily Training <span class="expand-icon">â–¼</span></h3>
    <p>Use during or right after your workout</p>
  </div>

  <div class="section-content" id="daily-content">
    <div class="calculator-grid">
      
      <!-- Set Feedback with RP Algorithms -->
      <section class="calculator" id="mevCard">
        <h2>Set Feedback (RP Algorithms)</h2>
        
        <div class="input-group">
          <label for="muscleSelect">Muscle group:</label>
          <select id="muscleSelect">
            <option value="Chest">Chest</option>
            <option value="Back">Back</option>
            <option value="Quads">Quads</option>
            <option value="Hamstrings">Hamstrings</option>
            <option value="Shoulders">Shoulders</option>
            <option value="Biceps">Biceps</option>
            <option value="Triceps">Triceps</option>
            <option value="Calves">Calves</option>
            <option value="Abs">Abs</option>
            <option value="Forearms">Forearms</option>
            <option value="Neck">Neck</option>
            <option value="Traps">Traps</option>
          </select>
        </div>

        <div class="input-group">
          <label for="currentSets">Current weekly sets:</label>
          <input type="number" id="currentSets" min="0" value="0">
          <div class="helper-text">Click to edit inline</div>
        </div>

        <div class="input-group">
          <label>Stimulus Quality (RP Table 2.2):</label>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
            <div>
              <label for="mmc" style="font-size: 0.8rem;">Mind-Muscle (0-3):</label>
              <input type="number" id="mmc" min="0" max="3" value="2">
            </div>
            <div>
              <label for="pump" style="font-size: 0.8rem;">Pump (0-3):</label>
              <input type="number" id="pump" min="0" max="3" value="2">
            </div>
            <div>
              <label for="dis" style="font-size: 0.8rem;">Disruption (0-3):</label>
              <input type="number" id="dis" min="0" max="3" value="2">
            </div>
          </div>
          <div class="helper-text">Rate the quality of your last exercise (0=poor, 3=excellent)</div>
        </div>

        <div class="input-group">
          <label>Performance vs last time:</label>
          <div class="radio-group">
            <label><input type="radio" name="perf" value="3"> Much Better</label>
            <label><input type="radio" name="perf" value="2" checked> Better</label>
            <label><input type="radio" name="perf" value="1"> Same</label>
            <label><input type="radio" name="perf" value="0"> Worse</label>
          </div>
        </div>

        <div class="input-group">
          <label for="sore">Current soreness level (0-3):</label>
          <input type="number" id="sore" min="0" max="3" value="1">
          <div class="helper-text">0=None, 1=Mild, 2=Moderate, 3=High</div>
        </div>

        <!-- Autoregulation Section -->
        <div class="autoregulation-section">
          <h4>Effort Validation</h4>
          <div class="input-group">
            <label for="actualRIR">Actual RIR this set:</label>
            <input type="number" id="actualRIR" min="0" max="10" step="0.5" placeholder="e.g. 2.5">
            <div class="helper-text">How many more reps could you have done? (Target: <span id="targetRIRDisplay">4.5</span>)</div>
          </div>
        </div>

        <button onclick="submitFeedback()">Process with RP Algorithms</button>
        <output id="mevOut" class="result"></output>
      </section>

    </div>
  </div>

  <div class="section-banner" onclick="toggleSection('weekly')">
    <h3>Weekly Planning <span class="expand-icon">â–¼</span></h3>
    <p>End-of-week review and next week setup</p>
  </div>

  <div class="section-content" id="weekly-content">
    <div class="calculator-grid">

      <!-- Deload Check -->
      <section class="calculator" id="deloadCard">
        <h2>Deload Analysis</h2>
        
        <div class="input-group">
          <label>
            <input type="checkbox" id="halfMuscles"> Most muscles needed recovery (â‰¥6 muscle groups)
          </label>
        </div>
        
        <div class="input-group">
          <label>
            <input type="checkbox" id="mrvBreach"> Hit MRV twice in a row
          </label>
        </div>
        
        <div class="input-group">
          <label>
            <input type="checkbox" id="illness"> Illness / Minor Injury
          </label>
        </div>

        <div class="input-group">
          <label>
            <input type="checkbox" id="lowMotivation"> Low motivation/enjoyment
          </label>
        </div>
        
        <button onclick="analyzeDeload()">Analyze Deload Need</button>
        <output id="deloadOut" class="result"></output>
      </section>

      <!-- Frequency Optimization -->
      <section class="calculator" id="freqCard">
        <h2>Frequency Optimization</h2>
        
        <div class="input-group">
          <label for="soreDays">Days until soreness gone:</label>
          <input type="number" id="soreDays" min="0" value="2">
        </div>
        
        <div class="input-group">
          <label for="sessionGap">Current session gap (days):</label>
          <input type="number" id="sessionGap" min="1" value="3">
        </div>
        
        <div class="input-group">
          <label for="trainingAge">Training experience:</label>
          <select id="trainingAge">
            <option value="beginner">Beginner (< 1 year)</option>
            <option value="intermediate" selected>Intermediate (1-3 years)</option>
            <option value="advanced">Advanced (> 3 years)</option>
          </select>
        </div>
        
        <button onclick="analyzeFrequency()">Optimize Frequency</button>
        <output id="freqOut" class="result"></output>
      </section>

    </div>
  </div>

  <div class="section-banner" onclick="toggleSection('setup')">
    <h3>Program Setup <span class="expand-icon">â–¼</span></h3>
    <p>Configure volume landmarks and training blocks</p>
  </div>

  <div class="section-content" id="setup-content">
    <div class="calculator-grid">

      <!-- Volume Landmarks Setup -->
      <section class="calculator" id="volumeCard">
        <h2>Volume Landmarks (RP Method)</h2>
        
        <div class="input-group">
          <label for="landmarkMuscle">Muscle to configure:</label>
          <select id="landmarkMuscle">
            <option value="Chest">Chest</option>
            <option value="Back">Back</option>
            <option value="Quads">Quads</option>
            <option value="Hamstrings">Hamstrings</option>
            <option value="Shoulders">Shoulders</option>
            <option value="Biceps">Biceps</option>
            <option value="Triceps">Triceps</option>
            <option value="Calves">Calves</option>
            <option value="Abs">Abs</option>
            <option value="Forearms">Forearms</option>
            <option value="Neck">Neck</option>
            <option value="Traps">Traps</option>
          </select>
        </div>

        <div class="landmark-grid">
          <div class="input-group">
            <label for="mv">MV (Maintenance Volume):</label>
            <input type="number" id="mv" min="0" value="4">
            <div class="helper-text">Minimum to maintain muscle</div>
          </div>
          
          <div class="input-group">
            <label for="mev">MEV (Minimum Effective):</label>
            <input type="number" id="mev" min="0" value="8">
            <div class="helper-text">Minimum for growth</div>
          </div>
          
          <div class="input-group">
            <label for="mav">MAV (Maximum Adaptive):</label>
            <input type="number" id="mav" min="0" value="16">
            <div class="helper-text">Best volume for adaptation</div>
          </div>
          
          <div class="input-group">
            <label for="mrv">MRV (Maximum Recoverable):</label>
            <input type="number" id="mrv" min="0" value="22">
            <div class="helper-text">Maximum you can recover from</div>
          </div>
        </div>

        <div class="input-group">
          <button type="button" class="small" onclick="applyVolumePreset('beginner')">Beginner Preset</button>
          <button type="button" class="small" onclick="applyVolumePreset('intermediate')">Intermediate Preset</button>
          <button type="button" class="small" onclick="applyVolumePreset('advanced')">Advanced Preset</button>
        </div>
        
        <button onclick="saveLandmarks()">Save Volume Landmarks</button>
        <output id="volumeOut" class="result"></output>

        <!-- Volume Status Display -->
        <div id="volumeStatus" class="volume-status"></div>
      </section>

      <!-- Mesocycle Setup -->
      <section class="calculator" id="mesoCard">
        <h2>Mesocycle Setup</h2>
        
        <div class="input-group">
          <label for="mesoLength">Mesocycle length (weeks):</label>
          <input type="number" id="mesoLength" min="2" max="8" value="4">
          <div class="helper-text">Typical range: 3-6 weeks</div>
        </div>
        
        <div class="input-group">
          <label for="currentWeekNum">Current week number:</label>
          <input type="number" id="currentWeekNum" min="1" value="1">
        </div>

        <div class="input-group">
          <label for="trainingGoal">Primary goal:</label>
          <select id="trainingGoal">
            <option value="hypertrophy" selected>Hypertrophy</option>
            <option value="strength">Strength</option>
            <option value="power">Power</option>
            <option value="endurance">Endurance</option>
          </select>
        </div>
        
        <button onclick="setupMeso()">Setup Mesocycle</button>
        <output id="mesoOut" class="result"></output>
      </section>

    </div>
  </div>

</div>

<!-- Load modules and initialize -->
<script>
// Initialize collapsible sections
function initializeCollapsibleSections() {
  // Set up initial icon states
  const sections = ['daily', 'weekly', 'setup'];
  
  sections.forEach(sectionId => {
    const content = document.getElementById(sectionId + '-content');
    const banner = content.previousElementSibling;
    const icon = banner.querySelector('.expand-icon');
    
    if (content.classList.contains('expanded')) {
      banner.classList.add('expanded');
      icon.style.transform = 'rotate(180deg)';
    } else {
      banner.classList.remove('expanded');
      icon.style.transform = 'rotate(0deg)';
    }
  });
}

// Dismiss quick-start guide
function dismissQuickStart() {
  const guide = document.getElementById('quickStartGuide');
  const dontShowCheckbox = document.getElementById('dontShowQuickStart');
  
  if (guide) {
    guide.classList.add('hidden');
  }
  
  // Save preference if checkbox is checked
  if (dontShowCheckbox && dontShowCheckbox.checked) {
    localStorage.setItem('rpQuickStartDismissed', 'true');
  }
}

// Initialize quick-start guide visibility
function initQuickStartGuide() {
  const guide = document.getElementById('quickStartGuide');
  const isDismissed = localStorage.getItem('rpQuickStartDismissed') === 'true';
  
  if (guide && isDismissed) {
    guide.classList.add('hidden');
  }
}

// Initialize sections immediately when DOM loads
document.addEventListener('DOMContentLoaded', function() {
  initializeCollapsibleSections();
  initQuickStartGuide();
});
</script>

<script type="module">
import trainingState from './js/core/trainingState.js';
import { initChart, updateChart, addVolumeLandmarks, resetChart, exportChartImage } from './js/ui/chartManager.js';
import { initVolumeCard, updateVolumeDisplays } from './js/ui/volumeCardUI.js';
import { initFeedbackForm } from './js/ui/feedbackFormUI.js';
import { 
  scoreStimulus, 
  setProgressionAlgorithm, 
  getVolumeProgression,
  analyzeDeloadNeed 
} from './js/algorithms/volume.js';
import { calculateTargetRIR, validateEffortLevel } from './js/algorithms/effort.js';
import { analyzeFrequency, calculateOptimalFrequency } from './js/algorithms/fatigue.js';
import { validateLoad, validateSets, validateMesocycleLength } from './js/algorithms/validation.js';

// Make key functions global for button handlers
window.trainingState = trainingState;
window.updateChart = updateChart;
window.resetWeeklyData = resetChart;
window.showVolumeLandmarks = addVolumeLandmarks;

// Initialize UI
document.addEventListener('DOMContentLoaded', function() {
  initializeTrainingState();
  initChart();
  initVolumeCard();
  initFeedbackForm();
  updateAllDisplays();
  
  // Migrate legacy data
  trainingState.migrateLegacyData();
  
  console.log('RP Toolkit initialized');
});

// Initialize training state display
function initializeTrainingState() {
  const summary = trainingState.getStateSummary();
  
  document.getElementById('currentWeek').textContent = summary.week;
  document.getElementById('currentMeso').textContent = summary.meso;
  document.getElementById('currentBlock').textContent = summary.block;
  document.getElementById('targetRIR').textContent = summary.targetRIR.toFixed(1);
  document.getElementById('currentPhase').textContent = summary.currentPhase;
  document.getElementById('targetRIRDisplay').textContent = summary.targetRIR.toFixed(1);
}

// Update all displays
function updateAllDisplays() {
  updateVolumeDisplays();
  updateChart();
  initializeTrainingState();
}

// Update landmark displays when muscle changes
document.addEventListener('change', function(e) {
  if (e.target.id === 'landmarkMuscle') {
    const muscle = e.target.value;
    const landmarks = trainingState.volumeLandmarks[muscle];
    
    document.getElementById('mv').value = landmarks.MV;
    document.getElementById('mev').value = landmarks.MEV;
    document.getElementById('mav').value = landmarks.MAV;
    document.getElementById('mrv').value = landmarks.MRV;
  }
  
  if (e.target.id === 'muscleSelect') {
    const muscle = e.target.value;
    document.getElementById('currentSets').value = trainingState.currentWeekSets[muscle] || 0;
  }
});

// Auto-save on volume changes
document.addEventListener('input', function(e) {
  if (e.target.id === 'currentSets') {
    const muscle = document.getElementById('muscleSelect').value;
    const sets = parseInt(e.target.value, 10);
    
    if (!isNaN(sets) && sets >= 0) {
      trainingState.updateWeeklySets(muscle, sets);
      updateChart();
    }
  }
});

</script>

<script type="module" src="js/ui/globals.js"></script>

</body>
</html>