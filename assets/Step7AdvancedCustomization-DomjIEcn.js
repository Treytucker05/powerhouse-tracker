import{r as b,j as e,I as R,ac as A,i as C,y as I,P as E,l as D}from"./ui-vendor-BLoy3R85.js";import{S as W}from"./StepStatusPill-uRH84Jrc.js";import{S as O}from"./index-DVfXjkeJ.js";import{d as L,D as q,b as B,a as z}from"./scheduleHelpers-Dade5T3Q.js";import"./react-vendor-DoC2WAmd.js";import"./data-vendor-CWegSrCC.js";import"./chart-vendor-DbvXzfx8.js";import"./router-vendor-CDc5MEim.js";const P={amrapCapRPE:9,holdTMIfE1RMDrops:!0,holdThresholdPct:2,allowHalfIncrementsOnStall:!0};function F(t={},x={upper:5,lower:10},d=P){const h=["bench","press","squat","deadlift"],l={};for(const a of h){const c=Array.isArray(t[a])?t[a]:[],r=c[c.length-1],n=c[c.length-2],u=a==="bench"||a==="press"?x.upper:x.lower;if(r&&n&&d.holdTMIfE1RMDrops&&(r-n)/n*100<=-Math.abs(d.holdThresholdPct||2)){l[a]=d.allowHalfIncrementsOnStall?Math.max(0,Math.round(u/2*2)/2):0;continue}l[a]=u}return l}const U="fiveThreeOne_prs_v1";function H(){try{const t=localStorage.getItem(U);return t?JSON.parse(t):{}}catch{return{}}}const _={press:"Overhead Press",bench:"Bench Press",squat:"Squat",deadlift:"Deadlift"};function $(t,x,d,h,l=5){const a=z(t,h,l),c=B(t,x,d,l);return[...a,...c]}function K({state:t}){var y,s,o,v,N,g;const[x,d]=b.useState(1),[h,l]=b.useState(!0),[a,c]=b.useState(5),r=(t==null?void 0:t.lifts)||{},n={press:Number(((y=r==null?void 0:r.press)==null?void 0:y.tm)??0),bench:Number(((s=r==null?void 0:r.bench)==null?void 0:s.tm)??0),squat:Number(((o=r==null?void 0:r.squat)==null?void 0:o.tm)??0),deadlift:Number(((v=r==null?void 0:r.deadlift)==null?void 0:v.tm)??0)},p=Number(((N=t==null?void 0:t.loading)==null?void 0:N.option)??(t==null?void 0:t.loadingOption)??((g=t==null?void 0:t.cycle)==null?void 0:g.loadingOption)??1),u=b.useMemo(()=>L(t),[t]),m=q.map(i=>({day:i,lift:u[i]||null})).filter(i=>!!i.lift);return e.jsxs("div",{className:"printable-wrap",children:[e.jsx("div",{className:"printable-controls no-print",children:e.jsxs("div",{className:"row",children:[e.jsx("label",{children:"Week"}),e.jsxs("select",{value:x,onChange:i=>d(Number(i.target.value)),children:[e.jsx("option",{value:1,children:"Week 1 (5s)"}),e.jsx("option",{value:2,children:"Week 2 (3s)"}),e.jsx("option",{value:3,children:"Week 3 (5/3/1)"}),e.jsx("option",{value:4,children:"Week 4 (Deload)"})]}),e.jsx("label",{children:"Include Warm-ups"}),e.jsx("input",{type:"checkbox",checked:h,onChange:i=>l(!!i.target.checked)}),e.jsx("label",{children:"Rounding"}),e.jsxs("select",{value:a,onChange:i=>c(Number(i.target.value)),children:[e.jsx("option",{value:5,children:"5 lb"}),e.jsx("option",{value:2.5,children:"2.5 lb"})]}),e.jsx("button",{onClick:()=>window.print(),children:"Print"})]})}),e.jsx("div",{className:"print-grid",children:m.map(({day:i,lift:w})=>{const k=w,j=Number((n==null?void 0:n[k])||0),S=j?$(j,p,x,h,a):[];return e.jsxs("div",{className:"print-card",children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{className:"title",children:[i," — ",_[k]||w]}),e.jsxs("div",{className:"sub",children:["TM: ",j?`${j} lb`:"—"]})]}),j?e.jsxs("table",{className:"set-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"%TM"}),e.jsx("th",{children:"Weight"}),e.jsx("th",{children:"Reps"})]})}),e.jsx("tbody",{children:S.map((f,T)=>e.jsxs("tr",{children:[e.jsx("td",{children:f.type==="warmup"?"WU":"Main"}),e.jsxs("td",{children:[f.pct,"%"]}),e.jsx("td",{children:f.weight}),e.jsx("td",{children:f.reps})]},T))})]}):e.jsx("div",{className:"empty",children:"No TM set for this lift."}),e.jsx("div",{className:"notes",children:"Notes:"})]},i)})})]})}const M=[{key:"press",label:"Overhead Press",type:"upper"},{key:"bench",label:"Bench Press",type:"upper"},{key:"squat",label:"Squat",type:"lower"},{key:"deadlift",label:"Deadlift",type:"lower"}];function se({data:t,updateData:x}){const d=t||{},h=s=>x({...d,...s}),l=d.advanced||{},a={...P,...l.autoreg||{}},c=l.specialization||{focus:[],volumeBiasPct:15},r=H()||{},n=(l==null?void 0:l.history)||{},p=b.useMemo(()=>F({bench:n.bench||[],press:n.press||[],squat:n.squat||[],deadlift:n.deadlift||[]},{upper:5,lower:10},a),[n,a]),u=s=>{const o=new Set(c.focus||[]);o.has(s)?o.delete(s):o.add(s),h({advanced:{...l,specialization:{...c,focus:Array.from(o)}}})},m=s=>{h({advanced:{...l,autoreg:{...a,...s}}})},y=s=>{h({advanced:{...l,specialization:{...c,...s}}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-1",children:"Step 7: Advanced Customization"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Dial in auto‑regulation, specialization emphasis, track PRs, and generate printable week sheets."})]}),e.jsx(W,{stepId:O.ADVANCED_CUSTOMIZATION,data:d})]}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-600 rounded p-4",children:e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx(R,{className:"w-5 h-5 text-blue-300 mt-0.5"}),e.jsxs("div",{className:"text-blue-100 text-sm",children:[e.jsx("div",{className:"font-medium mb-1",children:"Philosophy"}),e.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[e.jsx("li",{children:"5/3/1 progresses best when you start light and add small, consistent jumps."}),e.jsx("li",{children:"Use RPE caps to keep AMRAPs productive (avoid grinders)."}),e.jsx("li",{children:"Specialize only when needed; don’t wreck recovery."}),e.jsx("li",{children:"Track rep PRs / e1RMs to validate progress; adjust TMs conservatively."})]})]})]})}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx(A,{className:"w-5 h-5"})," Auto‑Regulation"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"AMRAP Cap (RPE)"}),e.jsx("input",{type:"number",min:"8",max:"10",step:"0.5",value:a.amrapCapRPE,onChange:s=>m({amrapCapRPE:Number(s.target.value)}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Stop '+' sets around this RPE."})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-gray-200",children:[e.jsx("input",{type:"checkbox",checked:!!a.holdTMIfE1RMDrops,onChange:s=>m({holdTMIfE1RMDrops:!!s.target.checked})}),"Hold TM increment if e1RM drops"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Hold Threshold (%)"}),e.jsx("input",{type:"number",min:"1",max:"5",step:"0.5",value:a.holdThresholdPct,onChange:s=>m({holdThresholdPct:Number(s.target.value)}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-gray-200",children:[e.jsx("input",{type:"checkbox",checked:!!a.allowHalfIncrementsOnStall,onChange:s=>m({allowHalfIncrementsOnStall:!!s.target.checked})}),"Use half increments on stalls"]})})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Note: This only affects ",e.jsx("b",{children:"recommended"})," TM changes at cycle rollover. We still apply +5/+10 by default."]})]}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx(C,{className:"w-5 h-5"})," Specialization Focus"]}),e.jsx("div",{className:"text-sm text-gray-300",children:"Pick lifts to receive slight assistance volume bias."}),e.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(s=>{var o;return e.jsx("button",{onClick:()=>u(s.key),className:`px-3 py-1 rounded border ${(o=c.focus)!=null&&o.includes(s.key)?"border-red-500 text-white":"border-gray-600 text-gray-300 hover:bg-gray-700/40"}`,children:s.label},s.key)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Volume Bias (%)"}),e.jsx("input",{type:"number",min:"0",max:"25",step:"1",value:c.volumeBiasPct,onChange:s=>y({volumeBiasPct:Number(s.target.value)}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Applied to assistance selection later."})]}),e.jsx("div",{className:"md:col-span-2 text-xs text-gray-400",children:"Keep bias small (≤15%) to avoid recovery issues."})]})]}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx(I,{className:"w-5 h-5"})," PRs & Next Cycle TM Suggestions"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-[520px] text-sm",children:[e.jsx("thead",{className:"text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left pr-4",children:"Lift"}),e.jsx("th",{className:"text-left pr-4",children:"Best e1RM"}),e.jsx("th",{className:"text-left pr-4",children:"Last Cycle e1RM"}),e.jsx("th",{className:"text-left pr-4",children:"Suggested TM +"})]})}),e.jsx("tbody",{children:M.map(s=>{var g;const o=(g=r[s.key])!=null&&g.e1RM?`${Number(r[s.key].e1RM).toFixed(1)} lb`:"—",v=Array.isArray(n[s.key])&&n[s.key].length?`${Number(n[s.key][n[s.key].length-1]).toFixed(1)} lb`:"—",N=(p==null?void 0:p[s.key])??(s.type==="upper"?5:10);return e.jsxs("tr",{className:"text-gray-200",children:[e.jsx("td",{className:"pr-4",children:s.label}),e.jsx("td",{className:"pr-4",children:o}),e.jsx("td",{className:"pr-4",children:v}),e.jsxs("td",{className:"pr-4",children:["+",N," lb"]})]},s.key)})})]})}),e.jsx("div",{className:"text-xs text-gray-400",children:"PRs update automatically when logged in the app. If no history is present yet, suggestions default to +5 (upper) / +10 (lower)."})]}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[e.jsx(E,{className:"w-5 h-5"})," Printable Week Sheet"]}),e.jsx("div",{className:"text-sm text-gray-300",children:"Preview and print a clean week sheet with warm-ups and main sets."}),e.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded p-2",children:e.jsx(K,{state:d})})]}),e.jsxs("div",{className:"bg-green-900/20 border border-green-500 rounded p-3 text-green-200 text-sm flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"})," Advanced settings saved. TM suggestions will appear at cycle rollover."]})]})}export{se as default};
//# sourceMappingURL=Step7AdvancedCustomization-DomjIEcn.js.map
