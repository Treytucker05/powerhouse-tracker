{"version":3,"file":"AuthPage-DfXAn3J4.js","sources":["../../src/pages/AuthPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { supabase } from '../lib/api/supabaseClient';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './AuthPage.css';\r\n\r\nexport default function AuthPage() {\r\n  const [isSignUp, setIsSignUp] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  // Redirect if already authenticated\r\n  useEffect(() => {\r\n    const checkUser = async () => {\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      if (session?.user) {\r\n        navigate('/');\r\n      }\r\n    };\r\n    checkUser();\r\n  }, [navigate]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setMessage('');\r\n\r\n    try {\r\n      if (isSignUp) {\r\n        // Sign up validation\r\n        if (password !== confirmPassword) {\r\n          throw new Error('Passwords do not match');\r\n        }\r\n        if (password.length < 6) {\r\n          throw new Error('Password must be at least 6 characters');\r\n        }\r\n\r\n        const { data, error } = await supabase.auth.signUp({\r\n          email,\r\n          password,\r\n        });\r\n\r\n        if (error) throw error;\r\n\r\n        if (data.user && !data.user.email_confirmed_at) {\r\n          setMessage('Check your email for the confirmation link!');\r\n        } else {\r\n          // User is signed up and confirmed, redirect to home\r\n          navigate('/');\r\n        }\r\n      } else {        // Sign in\r\n        const { error } = await supabase.auth.signInWithPassword({\r\n          email,\r\n          password,\r\n        });\r\n\r\n        if (error) throw error;\r\n\r\n        // Redirect to home after successful sign in\r\n        navigate('/');\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      const { error } = await supabase.auth.signInWithOAuth({\r\n        provider: 'google',\r\n        options: {\r\n          redirectTo: `${window.location.origin}/tracker`\r\n        }\r\n      });\r\n\r\n      if (error) throw error;\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleForgotPassword = async () => {\r\n    if (!email) {\r\n      setError('Please enter your email first');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n\r\n      const { error } = await supabase.auth.resetPasswordForEmail(email);\r\n\r\n      if (error) throw error;\r\n\r\n      setMessage('Password reset email sent! Check your inbox.');\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"auth-container\">\r\n        <div className=\"auth-header\">\r\n          <h1>PowerHouse Tracker</h1>\r\n          <p>Your intelligent training companion</p>\r\n        </div>\r\n\r\n        <div className=\"auth-form-container\">\r\n          <div className=\"auth-tabs\">\r\n            <button\r\n              className={`auth-tab ${!isSignUp ? 'active' : ''}`}\r\n              onClick={() => {\r\n                setIsSignUp(false);\r\n                setError('');\r\n                setMessage('');\r\n              }}\r\n            >\r\n              Sign In\r\n            </button>\r\n            <button\r\n              className={`auth-tab ${isSignUp ? 'active' : ''}`}\r\n              onClick={() => {\r\n                setIsSignUp(true);\r\n                setError('');\r\n                setMessage('');\r\n              }}\r\n            >\r\n              Sign Up\r\n            </button>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"auth-form\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email</label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                required\r\n                placeholder=\"Enter your email\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required\r\n                placeholder=\"Enter your password\"\r\n                minLength={6}\r\n              />\r\n            </div>\r\n\r\n            {isSignUp && (\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"confirmPassword\">Confirm Password</label>\r\n                <input\r\n                  id=\"confirmPassword\"\r\n                  type=\"password\"\r\n                  value={confirmPassword}\r\n                  onChange={(e) => setConfirmPassword(e.target.value)}\r\n                  required\r\n                  placeholder=\"Confirm your password\"\r\n                  minLength={6}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {error && <div className=\"error-message\">{error}</div>}\r\n            {message && <div className=\"success-message\">{message}</div>}\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"auth-button primary\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Loading...' : isSignUp ? 'Sign Up' : 'Sign In'}\r\n            </button>\r\n          </form>\r\n\r\n          <div className=\"auth-divider\">\r\n            <span>or</span>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleGoogleSignIn}\r\n            className=\"auth-button google\"\r\n            disabled={loading}\r\n          >\r\n            <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\">\r\n              <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\r\n              <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\r\n              <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" />\r\n              <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\r\n            </svg>\r\n            Continue with Google\r\n          </button>\r\n\r\n          {!isSignUp && (\r\n            <div className=\"auth-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"link-button\"\r\n                onClick={handleForgotPassword}\r\n                disabled={loading}\r\n              >\r\n                Forgot your password?\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"auth-footer\">\r\n            <p>\r\n              {isSignUp ? 'Already have an account? ' : \"Don't have an account? \"}\r\n              <button\r\n                type=\"button\"\r\n                className=\"link-button\"\r\n                onClick={() => {\r\n                  setIsSignUp(!isSignUp);\r\n                  setError('');\r\n                  setMessage('');\r\n                }}\r\n              >\r\n                {isSignUp ? 'Sign In' : 'Sign Up'}\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"auth-features\">\r\n          <h3>Features</h3>\r\n          <ul>\r\n            <li>ðŸŽ¯ Smart volume progression tracking</li>\r\n            <li>ðŸ“Š Advanced deload analysis</li>\r\n            <li>ðŸ§  AI-powered recommendations</li>\r\n            <li>ðŸ“ˆ Comprehensive progress analytics</li>\r\n            <li>ðŸ’¾ Automatic data backup</li>\r\n            <li>ðŸ“± Cross-device synchronization</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["AuthPage","isSignUp","setIsSignUp","useState","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","loading","setLoading","error","setError","message","setMessage","navigate","useNavigate","useEffect","session","supabase","handleSubmit","e","data","err","handleGoogleSignIn","handleForgotPassword","jsxs","jsx"],"mappings":"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"}