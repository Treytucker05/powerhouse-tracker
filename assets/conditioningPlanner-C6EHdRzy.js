import{O as u,K as m,N as h}from"./index-BJgVdXSK.js";function x(t){var a;const e=((a=t==null?void 0:t.schedule)==null?void 0:a.days)||(t==null?void 0:t.week)||{},i={};if(Array.isArray(e)){const l=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];let d=0;for(const o of e){const c=l[d]||l[0];o!=null&&o.lift&&(i[c]=o.lift),d++}}else for(const l of Object.keys(e||{})){const d=l.slice(0,3).toLowerCase(),o=u.find(c=>c.slice(0,3).toLowerCase()===d);o&&(i[o]=e[l])}return Object.keys(i).length===0&&(i.Mon="press",i.Tue="deadlift",i.Thu="bench",i.Fri="squat"),i}function D(t,e){const i=[],a=x(t),l=Math.max(0,Number((e==null?void 0:e.frequency)??2)),d=Math.min(l,Math.max(0,Number((e==null?void 0:e.hiitPerWeek)??l))),o=Math.max(0,Math.min(l-d,Number((e==null?void 0:e.lissPerWeek)??l-d))),c=(e==null?void 0:e.placement)||m.AFTER_LIFTS,f=n=>!!a[n],k=n=>["squat","deadlift"].includes(a[n]||""),w=((e==null?void 0:e.hiitModalities)||[]).filter(n=>{var s;return((s=h[n])==null?void 0:s.mode)==="hiit"}),r=((e==null?void 0:e.lissModalities)||[]).filter(n=>{var s;return((s=h[n])==null?void 0:s.mode)==="liss"}),F=(n,s)=>n.length?n[s%n.length]:null,S=u.filter(n=>f(n)),L=u.filter(n=>!f(n)),M=c===m.AFTER_LIFTS?S:c===m.OFF_DAYS?L:[...L,...S];let A=0;for(let n=0;n<M.length&&A<d;n++){const s=M[n],g=(u.indexOf(s)+1)%u.length,_=u[g];if(k(_)&&c!==m.AFTER_LIFTS)continue;const C=F(w,A)||"hill_sprint",N=h[C];i.push({day:s,mode:"hiit",modality:C,prescription:{...N.default},notes:f(s)?`After ${a[s]} session`:"Standalone session"}),A++}let T=0;for(let n=0;n<M.length&&T<o;n++){const s=M[n];if(i.some(P=>P.day===s))continue;const g=F(r,T)||"walk",_=h[g];i.push({day:s,mode:"liss",modality:g,prescription:{..._.default},notes:f(s)?`After ${a[s]} session (easy)`:"Standalone easy session"}),T++}return i.sort((n,s)=>u.indexOf(n.day)-u.indexOf(s.day)),i.slice(0,l)}function y(t,e){if(h[t])return t;const i=String(t).toLowerCase();return i.includes("prowler")?"prowler_push":i.includes("hill")?"hill_sprint":i.includes("sled")?"sled_drag":i.includes("row")&&e==="hiit"?"row_interval":i.includes("bike")&&e==="hiit"?"bike_interval":i.includes("walk")?"walk":i.includes("swim")?"swim":i.includes("bike")?"easy_bike":i.includes("row")?"easy_row":e==="hiit"?"hill_sprint":"walk"}function b(t={}){return{hiit:(t.hiit||[]).map(e=>y(e,"hiit")),liss:(t.liss||[]).map(e=>y(e,"liss"))}}function I(t){var k,w;const e=(t==null?void 0:t.conditioning)||{};if(Array.isArray(e.weeklyPlan)&&e.weeklyPlan.length)return e.weeklyPlan.map(r=>({day:r.day,mode:r.mode,modality:y(r.modality,r.mode),prescription:{...r.prescription||{}},notes:r.notes||(r.mode==="hiit"?"After lift":"Easy session")}));const i=e.options||e,a=Number(i.frequency??e.sessionsPerWeek??0)||0;if(!a)return[];const l=Number(i.hiitPerWeek??e.hiitPerWeek??a),d=Number(i.lissPerWeek??Math.max(0,a-l)),o=i.placement||m.AFTER_LIFTS,c=(i.hiitModalities||((k=e.modalities)==null?void 0:k.hiit)||[]).map(r=>y(r,"hiit")),f=(i.lissModalities||((w=e.modalities)==null?void 0:w.liss)||[]).map(r=>y(r,"liss"));try{return D(t,{frequency:a,hiitPerWeek:l,lissPerWeek:d,placement:o,hiitModalities:c,lissModalities:f})}catch(r){return console.warn("planConditioningFromState failed",r),[]}}export{D as b,x as d,b as n,I as p};
//# sourceMappingURL=conditioningPlanner-C6EHdRzy.js.map
