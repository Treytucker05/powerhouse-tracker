import{r as w,j as a}from"./ui-vendor-BLoy3R85.js";import{c as v,d as p,e as j,f as A}from"./index-IJKD4ygM.js";import{T as C,S as T}from"./TrainingStatusCard-Cs18WRZA.js";import"./react-vendor-DoC2WAmd.js";import"./data-vendor-CWegSrCC.js";import"./chart-vendor-DbvXzfx8.js";import"./router-vendor-CDc5MEim.js";function R(){const[x,m]=w.useState([]),[g,l]=w.useState(!1),[i,t]=w.useState(null),{state:d}=v();return{sessions:x,loading:g,error:i,fetchSessions:async r=>{try{l(!0),t(null);const{data:e,error:s}=await p.from("workout_sessions").select(`
          *,
          workout_sets (
            id,
            exercise_name,
            muscle_group,
            weight,
            reps,
            rir,
            completed_at,
            set_number
          )
        `).eq("user_id",r).order("started_at",{ascending:!1});if(s)throw s;return m(e||[]),e}catch(e){return t(e.message),console.error("Error fetching workout sessions:",e),null}finally{l(!1)}},createSession:async r=>{try{l(!0),t(null);const{data:e,error:s}=await p.from("workout_sessions").insert([{user_id:r.userId,session_name:r.sessionName,mesocycle_week:r.mesocycleWeek||d.currentMesocycle.currentWeek,planned_exercises:r.plannedExercises||[],started_at:new Date().toISOString(),status:"active"}]).select().single();if(s)throw s;return m(n=>[e,...n]),e}catch(e){return t(e.message),console.error("Error creating workout session:",e),null}finally{l(!1)}},updateSession:async(r,e)=>{try{l(!0),t(null);const{data:s,error:n}=await p.from("workout_sessions").update(e).eq("id",r).select().single();if(n)throw n;return m(u=>u.map(o=>o.id===r?{...o,...s}:o)),s}catch(s){return t(s.message),console.error("Error updating workout session:",s),null}finally{l(!1)}},finishSession:async(r,e)=>{try{l(!0),t(null);const{data:s,error:n}=await p.from("workout_sessions").update({status:"completed",completed_at:new Date().toISOString(),total_volume:e.totalVolume,total_sets:e.totalSets,duration_minutes:e.durationMinutes,notes:e.notes||""}).eq("id",r).select().single();if(n)throw n;return m(u=>u.map(o=>o.id===r?{...o,...s}:o)),s}catch(s){return t(s.message),console.error("Error finishing workout session:",s),null}finally{l(!1)}},deleteSession:async r=>{try{l(!0),t(null),await p.from("workout_sets").delete().eq("session_id",r);const{error:e}=await p.from("workout_sessions").delete().eq("id",r);if(e)throw e;return m(s=>s.filter(n=>n.id!==r)),!0}catch(e){return t(e.message),console.error("Error deleting workout session:",e),!1}finally{l(!1)}},logSet:async(r,e)=>{try{l(!0),t(null);const{data:s,error:n}=await p.from("workout_sets").insert([{session_id:r,exercise_name:e.exerciseName,muscle_group:e.muscleGroup,weight:e.weight,reps:e.reps,rir:e.rir,set_number:e.setNumber,completed_at:new Date().toISOString(),notes:e.notes||""}]).select().single();if(n)throw n;return m(u=>u.map(o=>o.id===r?{...o,workout_sets:[...o.workout_sets||[],s]}:o)),s}catch(s){return t(s.message),console.error("Error logging set:",s),null}finally{l(!1)}},undoLastSet:async r=>{try{l(!0),t(null);const{data:e,error:s}=await p.from("workout_sets").select("id").eq("session_id",r).order("completed_at",{ascending:!1}).limit(1).single();if(s)throw s;const{error:n}=await p.from("workout_sets").delete().eq("id",e.id);if(n)throw n;return m(u=>u.map(o=>{var h;return o.id===r?{...o,workout_sets:((h=o.workout_sets)==null?void 0:h.filter(c=>c.id!==e.id))||[]}:o})),!0}catch(e){return t(e.message),console.error("Error undoing last set:",e),!1}finally{l(!1)}},getSessionStats:r=>{const e=x.find(c=>c.id===r);if(!e||!e.workout_sets)return null;const s=e.workout_sets,n=s.reduce((c,y)=>c+y.weight*y.reps,0),u=s.length,o=new Set(s.map(c=>c.exercise_name)).size,h=s.length>0?s.reduce((c,y)=>c+y.rir,0)/s.length:0;return{totalVolume:n,totalSets:u,exerciseCount:o,avgRIR:Math.round(h*10)/10,muscleGroups:[...new Set(s.map(c=>c.muscle_group))]}},getWeeklyVolume:r=>{const e=x.filter(n=>n.mesocycle_week===r&&n.status==="completed"),s={};return e.forEach(n=>{var u;(u=n.workout_sets)==null||u.forEach(o=>{const h=o.muscle_group,c=o.weight*o.reps;s[h]=(s[h]||0)+c})}),s}}}const N=({muscle:x,sets:m,MEV:g,MAV:l,MRV:i})=>{const[t,d]=w.useState(m),_=f=>f<g||f>i?"#dc2626":"#22c55e",V=()=>{const f=Math.max(i*1.5,30),M=g/f*100,b=l/f*100,k=i/f*100;return`linear-gradient(to right, 
      #dc2626 0%, 
      #dc2626 ${M}%, 
      #eab308 ${M}%, 
      #22c55e ${b}%, 
      #eab308 ${k}%, 
      #dc2626 ${k}%, 
      #dc2626 100%)`},E=Math.max(i*1.5,30),S=_(t);return a.jsxs("div",{style:{backgroundColor:"#1f2937",border:`2px solid ${S}`,borderRadius:"0.75rem",padding:"1.5rem",transition:"all 0.3s ease",boxShadow:`0 4px 12px rgba(${S==="#22c55e"?"34, 197, 94":"220, 38, 38"}, 0.3)`},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[a.jsx("span",{style:{color:"#ffffff",fontWeight:"bold",fontSize:"1.125rem",textTransform:"uppercase"},children:x}),a.jsxs("span",{style:{color:S,fontSize:"1rem",fontWeight:"bold",textShadow:`0 0 8px ${S}`},children:["Current: ",t," sets"]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:"range",min:0,max:E,value:t,style:{width:"100%",height:"12px",background:V(),borderRadius:"6px",appearance:"none",cursor:"pointer",outline:"none"},onChange:f=>{d(parseInt(f.target.value))}}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"600"},children:[a.jsxs("span",{style:{color:"#eab308",fontWeight:"bold",textShadow:"0 0 4px #eab308"},children:["MEV: ",g]}),a.jsx("span",{style:{color:t>=g&&t<=i?"#22c55e":"#dc2626",fontWeight:"bold",textTransform:"uppercase",textShadow:`0 0 4px ${t>=g&&t<=i?"#22c55e":"#dc2626"}`},children:t>=g&&t<=i?"OPTIMAL RANGE":"OUT OF RANGE"}),a.jsxs("span",{style:{color:"#dc2626",fontWeight:"bold",textShadow:"0 0 4px #dc2626"},children:["MRV: ",i]})]})]})]})};function P(){R();const[x,m]=w.useState(null),[g,l]=w.useState(!0);w.useEffect(()=>{const d=setTimeout(()=>l(!1),800);return()=>clearTimeout(d)},[]);const i=[{muscle:"Chest",sets:12,MEV:8,MAV:18,MRV:22},{muscle:"Back",sets:16,MEV:10,MAV:20,MRV:25},{muscle:"Quads",sets:20,MEV:10,MAV:20,MRV:25},{muscle:"Glutes",sets:14,MEV:8,MAV:12,MRV:16},{muscle:"Hamstrings",sets:12,MEV:8,MAV:16,MRV:20},{muscle:"Shoulders",sets:10,MEV:6,MAV:16,MRV:20},{muscle:"Biceps",sets:8,MEV:6,MAV:12,MRV:16},{muscle:"Triceps",sets:10,MEV:6,MAV:14,MRV:18},{muscle:"Calves",sets:6,MEV:8,MAV:16,MRV:20},{muscle:"Abs",sets:6,MEV:4,MAV:6,MRV:16},{muscle:"Forearms",sets:4,MEV:4,MAV:4,MRV:12},{muscle:"Neck",sets:3,MEV:2,MAV:3,MRV:8},{muscle:"Traps",sets:4,MEV:4,MAV:4,MRV:12}],t={Chest:14,Back:16,Quads:12,Glutes:8,Hamstrings:10,Shoulders:12,Biceps:8,Triceps:10,Calves:12,Abs:10,Forearms:6,Neck:4,Traps:8,mev:{Chest:6,Back:10,Quads:10,Glutes:2,Hamstrings:6,Shoulders:8,Biceps:6,Triceps:6,Calves:8,Abs:6,Forearms:4,Neck:2,Traps:4},mrv:{Chest:22,Back:25,Quads:20,Glutes:25,Hamstrings:20,Shoulders:20,Biceps:20,Triceps:18,Calves:22,Abs:25,Forearms:16,Neck:12,Traps:16}};return a.jsx(j,{children:a.jsxs(A,{children:["        ",a.jsxs("div",{className:"space-y-8 max-w-7xl",children:[a.jsx(C,{}),a.jsx(T,{data:t}),a.jsxs("div",{className:"card-powerhouse",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"ðŸ’ª Muscle Volume Tracking"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:i.map((d,_)=>a.jsx(N,{muscle:d.muscle,sets:d.sets,MEV:d.MEV,MAV:d.MAV,MRV:d.MRV},_))})]})]})]})})}export{P as default};
//# sourceMappingURL=Tracking-Br0wY6pO.js.map
