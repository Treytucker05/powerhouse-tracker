import{j as e,r as u,I as $e,T as Ke,d as Be,X as Ks,c as Ts,e as Zs,B as Xs,f as Qs,g as et,P as st,h as tt,Z as rt,i as at,k as nt,l as Is,m as it,n as lt,o as ct,p as ys}from"./ui-vendor-BLoy3R85.js";import{u as xs,T as We,E as dt,A as as,n as bs,g as $s,s as ot,a as Ws,b as Ds,C as mt}from"./index-DgZCnbnc.js";import{p as Hs,n as pt}from"./conditioningPlanner-Dt_WoorF.js";import{loadPack531BBB as xt}from"./loadPack-BvEMKa-T.js";import{u as Vs,d as ut}from"./router-vendor-CDc5MEim.js";import"./react-vendor-DoC2WAmd.js";import"./data-vendor-CWegSrCC.js";import"./chart-vendor-DbvXzfx8.js";function ns(a,n=5,t="nearest"){if(!Number.isFinite(a))return 0;let i=5,d=t||"nearest";return typeof n=="string"?i=n==="kg"?2.5:5:typeof n=="number"&&(i=n>0?n:5),d==="ceil"?Math.ceil(a/i)*i:d==="floor"?Math.floor(a/i)*i:Math.round(a/i)*i}function Us(a=1,n=0){var d;const t={1:[[{pct:65,reps:5},{pct:75,reps:5},{pct:85,reps:5,amrap:!0}],[{pct:70,reps:3},{pct:80,reps:3},{pct:90,reps:3,amrap:!0}],[{pct:75,reps:5},{pct:85,reps:3},{pct:95,reps:1,amrap:!0}],[{pct:40,reps:5},{pct:50,reps:5},{pct:60,reps:5,amrap:!1}]],2:[[{pct:75,reps:5},{pct:80,reps:5},{pct:85,reps:5,amrap:!0}],[{pct:80,reps:3},{pct:85,reps:3},{pct:90,reps:3,amrap:!0}],[{pct:85,reps:5},{pct:90,reps:3},{pct:95,reps:1,amrap:!0}],[{pct:40,reps:5},{pct:50,reps:5},{pct:60,reps:5,amrap:!1}]]},i={1:[[65,75,85],[70,80,90],[75,85,95],[40,50,60]],2:[[75,80,85],[80,85,90],[85,90,95],[40,50,60]]};return arguments.length===1?i[a]||i[1]:((d=t[a])==null?void 0:d[n])||t[1][n]||[]}function Ms({tm:a,weekIndex:n,option:t=1,roundingIncrement:i=5,roundingMode:d="nearest",units:o="lbs"}){if(!a||a<=0)return{week:n+1,sets:[],amrapOnLast:!1};const N=Us(t),j=n+1,h=j===4,g=N[n],B=!h,A=g.map((R,s)=>{const y=a*(R/100),D=ns(y,i,d);let te;h?te=[5,5,5][s]:j===1?te=[5,5,5][s]:j===2?te=[3,3,3][s]:te=[5,3,1][s];const O=s===2&&!h?te+"+":te;return{percent:R,reps:O,weight:D,units:o}});return{week:j,sets:A,amrapOnLast:B}}function Es({includeWarmups:a,warmupScheme:n,tm:t,roundingIncrement:i=5,roundingMode:d="nearest",units:o="lbs"}){if(!a||!t||t<=0)return[];const N=Array.isArray(n==null?void 0:n.percentages)?n.percentages:[40,50,60],j=Array.isArray(n==null?void 0:n.reps)?n.reps:[5,5,3],h=Math.min(N.length,j.length),g=[];for(let B=0;B<h;B++){const A=t*(N[B]/100),R=ns(A,i,d);g.push({percent:N[B],reps:j[B],weight:R,units:o})}return g}function le({on:a,className:n="",children:t,...i}){return e.jsx("button",{type:i.type||"button","aria-pressed":!!a,"data-selected":a?"true":"false",className:["px-3 py-1.5 rounded-xl border text-sm font-medium transition select-none outline-none relative",a?"bg-indigo-600 text-white border-indigo-400 font-semibold shadow-inner after:absolute after:inset-0 after:rounded-xl after:ring-2 after:ring-indigo-300/70":"bg-zinc-100/70 dark:bg-zinc-800/60 text-zinc-800 dark:text-zinc-200 border-zinc-300 dark:border-zinc-600 hover:bg-zinc-200 dark:hover:bg-zinc-700","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 focus-visible:ring-offset-0","disabled:opacity-50 disabled:cursor-not-allowed",n].join(" "),...i,children:t})}function gt(a,n="bbb50"){var d;if(!a||!Array.isArray(a.templates))return null;const t=a.templates.find(o=>o.id===n),i=(d=t==null?void 0:t.effects)==null?void 0:d.supplemental;return i?{mode:i.mode||"bbb",pairing:i.pairing||"same",intensity:i.intensity||{kind:"percent_of",value:50,of:"TM"},sets:i.sets??5,reps:i.reps??10,_provenance:i.provenance||{source:"template",note:"pack"}}:null}function zs(a){var n;return Array.isArray((n=a==null?void 0:a.progressions)==null?void 0:n.warmups)?a.progressions.warmups:null}function Gs(a,n){var d;if(!Array.isArray((d=a==null?void 0:a.progressions)==null?void 0:d.weeks))return null;const t=o=>String(o||"").toLowerCase().replace(/\s+/g,""),i=t(n);return a.progressions.weeks.find(o=>t(o.label)===i)||null}function ht({pack:a,answers:n}){var j,h;if(!a)return null;const t={scheduleMode:null,templateId:null,tmMethod:null,_notes:[]},i=Number(n==null?void 0:n.daysPerWeek);t.scheduleMode=i===4?"4day":i===3?"3day":i===2?"2day":"1day";const d=String(n==null?void 0:n.assistanceChoice).toLowerCase();d.includes("bbb")?t.templateId="bbb50":d.includes("triumv")?t.templateId="triumvirate":d.includes("jack")?t.templateId="jack_shit":d.includes("period")||d.includes("bible")?t.templateId="periodization_bible":d.includes("bodyweight")?t.templateId="bodyweight":t.templateId=((h=(j=a==null?void 0:a.templates)==null?void 0:j[0])==null?void 0:h.id)||"bbb50";const o=String(n==null?void 0:n.tmMethod).toLowerCase();t.tmMethod=o.includes("estimate")?"estimate":"known_1rm";const N=(a.templates||[]).find(g=>g.id===t.templateId);return N?(t.effects=N.effects||{},t):(t._notes.push("template not found"),t)}function bt(a){if(!a)return[];const{slots:n=[]}=a;return n.map((t,i)=>{const d=t.category||t.id||`Assistance ${i+1}`;return{name:yt(d),sets:t.sets??null,reps:t.reps??null}})}function yt(a){if(!a)return"Assistance";const n={upper_pull_bw:"Bodyweight Pull (Pull-up/Chin)",pushup_or_dip:"Push-up / Dip",core_bw:"Core (BW)",single_leg_or_core:"Single Leg / Core"};return n[a]?n[a]:a.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function ft(a){const n=[];return a.forEach(t=>{if(!(!t.sets||!t.reps)){if(typeof t.reps=="string"){if(/amrap/i.test(t.reps))return;const i=t.reps.match(/^(\d+)\s*[-â€“]\s*(\d+)$/);if(i){const d=Number(i[1]),o=t.sets*d;(o<20||o>80)&&n.push(`${t.name}: sets x minReps (${t.sets}x${d}) out of 20-80 heuristic`);return}}if(Number.isFinite(t.reps)){const i=t.sets*t.reps;(i<20||i>80)&&n.push(`${t.name}: volume ${i} outside 20-80 heuristic`)}}}),n}const jt=["press","deadlift","bench","squat"],Nt=["3x5","3x3","5/3/1"];function fs({mode:a="4day",liftOrder:n=jt,state:t={}}={}){if(a==="4day"){const h=[0,1,2,3].map(g=>{const B=g===3?"Deload":Nt[g],A=n.map(R=>({lift:R,weekLabel:B,conditioning:{type:"LISS",minutes:30}}));return{label:B,days:A}});return{mode:a,weeks:h}}if(a!=="3day")return{mode:a,weeks:[]};const[i,d,o,N]=n,j=[{label:"Week 1",days:[{lift:i,weekLabel:"3x5"},{lift:d,weekLabel:"3x5"},{lift:o,weekLabel:"3x5"}]},{label:"Week 2",days:[{lift:N,weekLabel:"3x5"},{lift:i,weekLabel:"3x3"},{lift:d,weekLabel:"3x3"}]},{label:"Week 3",days:[{lift:o,weekLabel:"3x3"},{lift:N,weekLabel:"3x3"},{lift:i,weekLabel:"5/3/1"}]},{label:"Week 4",days:[{lift:d,weekLabel:"5/3/1"},{lift:o,weekLabel:"5/3/1"},{lift:N,weekLabel:"5/3/1"}]},{label:"Deload",days:[{lift:i,weekLabel:"Deload",combineWith:d},{lift:o,weekLabel:"Deload"},{lift:N,weekLabel:"Deload"}]}];try{const{CardioTemplates:h,pickCardio:g}=require("./cardioTemplates.js"),B=g(3,t||{});j.forEach(A=>A.days.forEach(R=>{R.conditioning||(R.conditioning=h[B])}))}catch{j.forEach(h=>h.days.forEach(g=>{g.conditioning||(g.conditioning={type:"LISS",minutes:45})}))}return{mode:a,weeks:j}}const ls=["press","deadlift","bench","squat"],vs=["bench","squat","press","deadlift"];function Bs({lift:a,weekLabel:n,state:t,pack:i,roundingPref:d,units:o}){var s,y,D,te;const N=((y=(s=t==null?void 0:t.lifts)==null?void 0:s[a])==null?void 0:y.tm)||0,j=Number(N);let h,g,B,A;try{({computeWarmups:h,computeMainSets:g,computeSupplemental:B,computeAssistance:A}=require("./calc.js"))}catch{}h=h||(()=>[]),g=g||(()=>({rows:[]})),B=B||(()=>null),A=A||(()=>[]);const R={lift:a,warmups:h(a,j,n,d,o,i),main:g(a,j,n,{amrap:n==="5/3/1"},d,o,i),supplemental:B(i,a,j,t),assistance:A(i,a,t)};try{const{CardioTemplates:O,pickCardio:f}=require("./cardioTemplates.js"),T=f(((te=(D=t==null?void 0:t.advanced)==null?void 0:D.schedulePreview)==null?void 0:te.daysPerWeek)||4,t||{});R.conditioning=O[T]}catch{R.conditioning={type:"LISS",minutes:30}}return R}function js({state:a,pack:n,split:t=ls,weekLabel:i="3x5"}){const d=(a==null?void 0:a.units)||"lbs",o=(a==null?void 0:a.roundingPref)||{lbs:5,kg:2.5};return{mode:"4day_live",daysPerWeek:4,days:t.map(j=>Bs({lift:j,weekLabel:i,state:a,pack:n,roundingPref:o,units:d})),meta:{split:t,weekLabel:i}}}function ws({state:a,pack:n,split:t=ls,weekLabel:i="3x5"}){const d=(a==null?void 0:a.week)??1,N=(((a==null?void 0:a.cycle)??1)+d)%2,j=N*2,h=[t[j%4],t[(j+1)%4]],g=(a==null?void 0:a.units)||"lbs",B=(a==null?void 0:a.roundingPref)||{lbs:5,kg:2.5};return{mode:"2day_live",daysPerWeek:2,days:h.map(R=>Bs({lift:R,weekLabel:i,state:a,pack:n,roundingPref:B,units:g})),meta:{split:t,weekLabel:i,rotationIndex:N}}}function ks({state:a,pack:n,split:t=ls,weekLabel:i="3x5"}){const d=(a==null?void 0:a.week)??1,N=(((a==null?void 0:a.cycle)??1)+d)%4,j=t[N],h=(a==null?void 0:a.units)||"lbs",g=(a==null?void 0:a.roundingPref)||{lbs:5,kg:2.5};return{mode:"1day_live",daysPerWeek:1,days:[Bs({lift:j,weekLabel:i,state:a,pack:n,roundingPref:g,units:h})],meta:{split:t,weekLabel:i,rotationIndex:N}}}function Rs(a,n="lbs",t={lbs:5,kg:2.5}){const i=n==="kg"?t.kg??2.5:t.lbs??5;return Math.round(a/i)*i}function Ls(a,n={}){return Number((n==null?void 0:n[a])??0)||0}function vt({pack:a,lift:n,tms:t,units:i="lbs",rounding:d}){var h,g;if(!a)return[];const o=Ls(n,t);if(!o)return[];const N=zs(a)||[],j=d||((g=(h=a==null?void 0:a.program)==null?void 0:h.defaults)==null?void 0:g.rounding)||{lbs:5,kg:2.5};return N.map(B=>{const A=B.value??B.percentage??B.pct,R=B.reps??0,s=Rs(A/100*o,i,j);return{pct:A,reps:R,weight:s}})}function wt({pack:a,lift:n,weekLabel:t,tms:i,units:d="lbs",rounding:o}){var R,s,y;if(!a)return{rows:[],amrapLast:!1};const N=Ls(n,i);if(!N)return{rows:[],amrapLast:!1};const j=Gs(a,t),h=(j==null?void 0:j.main)||[],g=o||((s=(R=a==null?void 0:a.program)==null?void 0:R.defaults)==null?void 0:s.rounding)||{lbs:5,kg:2.5},B=h.map(D=>{const te=D.value??D.percentage??D.pct,O=D.reps??0,f=!!D.amrap,T=Rs(te/100*N,d,g);return{pct:te,reps:O,amrap:f,weight:T}}),A=B.length?!!((y=B[B.length-1])!=null&&y.amrap):!1;return{rows:B,amrapLast:A}}function kt({supplemental:a,lift:n,tms:t,units:i="lbs",rounding:d,pack:o}){var A,R,s;if(!a||(a.strategy||a.mode)!=="bbb")return null;const j=Ls(n,t);if(!j)return null;const h=d||((R=(A=o==null?void 0:o.program)==null?void 0:A.defaults)==null?void 0:R.rounding)||{lbs:5,kg:2.5},g=a.percentOfTM??((s=a.intensity)==null?void 0:s.value)??50,B=Rs(j*g/100,i,h);return{sets:a.sets??5,reps:a.reps??10,pct:g,load:B}}function St(a){return!Array.isArray(a)||a.length===0?0:a.reduce((n,t)=>{const i=Number(t.weight),d=Number(t.reps);return Number.isFinite(i)&&Number.isFinite(d)?n+i*d:n},0)}function Ct(a){const n={};if(!a||!Array.isArray(a.assistance))return n;for(const t of a.assistance){const i=Number(t.sets)||0;let d=0;if(typeof t.reps=="number")d=t.reps;else if(typeof t.reps=="string")if(/^\d+-\d+/.test(t.reps)){const[j,h]=t.reps.split("-").map(g=>Number(g));Number.isFinite(j)&&Number.isFinite(h)&&(d=Math.round((j+h)/2))}else/^\d+/.test(t.reps)?d=Number(t.reps):d=12;const o=i*d,N=t.block||"general";n[N]=(n[N]||0)+o}return n}const os=["squat","bench","deadlift","press"];function Tt(a,n){const t=Number(n||5);return Math.round(Number(a)/t)*t}function At(a,n){const t=["bench","press"].includes(a);return n==="kg"?t?2.5:5:t?5:10}function Js(a,n){if(a==null)return!0;const t=Number((n==null?void 0:n.amrapMinWk3)??1);return Number(a)>=t}function Pt(a,n,t,i,d){const o=Number(n)||0,N=At(a,t),j=i?o+N:Math.max(0,o-N),h=t==="kg"?(d==null?void 0:d.kg)??2.5:(d==null?void 0:d.lbs)??5;return Tt(j,h)}function Mt({tms:a,units:n,rounding:t,amrapWk3:i={},state:d}){const o={};for(const N of os){const j=i==null?void 0:i[N],h=Js(j,d);o[N]=Pt(N,Number((a==null?void 0:a[N])||0),n,h,t)}return o}function Et(a,{amrapWk3:n={}}={}){var j,h,g;if(!a)return a;const t=a.units||"lbs",i=a.roundingPref||{lbs:5,kg:2.5},d={};for(const B of os)d[B]=((h=(j=a.lifts)==null?void 0:j[B])==null?void 0:h.tm)||((g=a.tms)==null?void 0:g[B])||0;const o=Mt({tms:d,units:t,rounding:i,amrapWk3:n,state:a}),N=a.cycle??1;return{...a,tms:o,lifts:{...a.lifts,...Object.fromEntries(Object.entries(a.lifts||{}).map(([B,A])=>[B,{...A,tm:o[B]}]))},cycle:N+1,week:1,history:[...a.history||[],{cycle:N,amrapWk3:n,tms:d,at:Date.now()}]}}function Bt(a){var n;return(n=a==null?void 0:a.weeks)!=null&&n.length?a.weeks.map(t=>{const i=(t.days||[]).map(d=>{const o=d.combineWith?[d.lift,d.combineWith]:[d.lift];return{weekLabel:t.label,sessionWeekLabel:d.weekLabel,lifts:o}});return{label:t.label,sessions:i}}):[]}const Ss=(a,n)=>!a||!n||n<1?null:a*(1+.0333*n),Cs=(a,n)=>!a||!n?null:a*n,Rt=(a,n)=>{if(!a||!n)return{level:"neutral",message:"Enter data to see validation"};const t=a/n;return t>.95?{level:"danger",message:"TM too high (>95% of e1RM). Risk of missing reps."}:t<.8?{level:"warning",message:"TM very conservative (<80% of e1RM). Room to increase."}:{level:"success",message:"TM in recommended range (80-95% of e1RM)."}},Lt={squat:"Squat",bench:"Bench Press",deadlift:"Deadlift",press:"Overhead Press"};function Ot({onValidChange:a,flashToken:n,missing:t=[]}){const{state:i,dispatch:d}=xs(),[o,N]=u.useState({units:i.units,rounding:i.rounding,tmPct:i.tmPct,lifts:{squat:{oneRM:i.lifts.squat.oneRM||"",repWeight:"",repCount:"",tmOverride:"",activeMethod:"oneRM"},bench:{oneRM:i.lifts.bench.oneRM||"",repWeight:"",repCount:"",tmOverride:"",activeMethod:"oneRM"},deadlift:{oneRM:i.lifts.deadlift.oneRM||"",repWeight:"",repCount:"",tmOverride:"",activeMethod:"oneRM"},press:{oneRM:i.lifts.press.oneRM||"",repWeight:"",repCount:"",tmOverride:"",activeMethod:"oneRM"}}}),[j,h]=u.useState(!1),g=u.useRef(null),B=u.useMemo(()=>{let O=0;const f=Object.keys(o.lifts).length;Object.entries(o.lifts).forEach(([S,q])=>{let Z=null;q.oneRM&&Number(q.oneRM)>0?Z=Number(q.oneRM):q.repWeight&&q.repCount&&Number(q.repWeight)>0&&Number(q.repCount)>0&&(Z=Ss(Number(q.repWeight),Number(q.repCount)));let C=null;q.tmOverride&&Number(q.tmOverride)>0?C=Number(q.tmOverride):Z&&(C=Cs(Z,o.tmPct)),C&&C>0&&(O+=1)});const T=f?Math.min(100,Math.round(O/f*100)):0;return{completed:O,total:f,percent:T}},[o.lifts,o.tmPct]);u.useEffect(()=>{const O=setTimeout(()=>{d({type:"SET_UNITS",units:o.units}),d({type:"SET_ROUNDING",rounding:o.rounding}),d({type:"SET_TM_PCT",tmPct:o.tmPct});const f={};Object.keys(o.lifts).forEach(T=>{const S=o.lifts[T];let q=null,Z=null;S.oneRM&&Number(S.oneRM)>0?q=Number(S.oneRM):S.repWeight&&S.repCount&&Number(S.repWeight)>0&&Number(S.repCount)>0&&(q=Ss(Number(S.repWeight),Number(S.repCount))),S.tmOverride&&Number(S.tmOverride)>0?Z=ns(Number(S.tmOverride),o.units,o.rounding):q&&(Z=ns(Cs(q,o.tmPct),o.units,o.rounding)),f[T]={name:T,oneRM:q,tm:Z}}),d({type:"BULK_SET_LIFTS",lifts:f}),h(!0),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>h(!1),1200)},250);return()=>clearTimeout(O)},[o,d]);const A=u.useMemo(()=>Object.keys(o.lifts).every(O=>{const f=o.lifts[O],T=f.oneRM&&Number(f.oneRM)>0,S=f.repWeight&&f.repCount&&Number(f.repWeight)>0&&Number(f.repCount)>0;return T||S}),[o.lifts]),R=u.useRef(A);u.useEffect(()=>{R.current!==A&&(a==null||a(A),R.current=A)},[A,a]);const s=u.useCallback(O=>{N(f=>({...f,...O}))},[]),y=u.useCallback((O,f)=>{N(T=>({...T,lifts:{...T.lifts,[O]:{...T.lifts[O],...f}}}))},[]),D=u.useCallback(O=>{const f=o.lifts[O];if(!f.repWeight||!f.repCount)return;const T={};Object.keys(o.lifts).forEach(S=>{S!==O&&(T[S]={...o.lifts[S],repWeight:f.repWeight,repCount:f.repCount,oneRM:""})}),N(S=>({...S,lifts:{...S.lifts,...T}}))},[o.lifts]),te=O=>{const f=o.lifts[O],T=f.oneRM&&Number(f.oneRM)>0,S=f.repWeight&&f.repCount&&Number(f.repWeight)>0&&Number(f.repCount)>0,q=f.tmOverride&&Number(f.tmOverride)>0;let Z=null;T?Z=Number(f.oneRM):S&&(Z=Ss(Number(f.repWeight),Number(f.repCount)));const C=Z?ns(Cs(Z,o.tmPct),o.units,o.rounding):null,F=q?ns(Number(f.tmOverride),o.units,o.rounding):C,_=Rt(F,Z),ae=(t.includes(`${O} TM`)||t.includes(O))&&n>0,Y=[{id:"oneRM",label:"Tested 1RM",hint:"Enter the heaviest weight you've successfully lifted for 1 rep."},{id:"reps",label:"Rep Calculator",hint:"Enter weight and reps from a recent set (3â€“10 reps work best)."},{id:"override",label:"Manual Override",hint:"Enter your desired training max directly (typically 85â€“90% of 1RM)."}],ge=G=>y(O,{activeMethod:G}),Re=G=>f.activeMethod===G,ce={oneRM:T,reps:S,override:q};return e.jsxs("div",{className:`p-4 rounded-xl bg-gray-800/40 border ${ae?"border-amber-500/70 animate-pulse":"border-gray-700/60"} space-y-3`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-white tracking-tight flex items-center gap-1",children:[Lt[O],F?e.jsx(Be,{className:"w-4 h-4 text-green-500","aria-label":"Training max set"}):null]}),e.jsxs("div",{className:"text-[12px] text-gray-400 mt-0.5 flex flex-wrap items-center gap-1",children:[Z?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"e1RM"}),e.jsx("span",{className:"text-gray-300 font-mono",children:Math.round(Z)})]}):e.jsx("span",{children:"Select a method"}),F&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-600",children:"â€¢"}),e.jsx("span",{children:"TM"}),e.jsx("span",{className:"text-gray-200 font-mono",children:F})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 self-start",children:[e.jsxs("span",{className:`px-3 py-1.5 rounded-md text-[12px] font-semibold flex items-center gap-1 bg-gray-900/80 border shadow-sm ${F?"border-green-600/60 text-green-300":"border-gray-700 text-gray-500"}`,children:["TM ",e.jsx("span",{className:`${F?"text-green-400 font-bold":"text-gray-500 font-medium"}`,children:F||"â€”"})]}),(_.level==="warning"||_.level==="danger")&&e.jsx("span",{className:`px-2 py-1 rounded text-[12px] font-medium border ${_.level==="warning"?"bg-yellow-500/15 text-yellow-400 border-yellow-600/40":"bg-red-500/15 text-red-400 border-red-600/40"}`,children:_.level==="warning"?"Low":"High"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-[13px] uppercase tracking-wide text-gray-400 font-medium",children:"Choose one method:"})}),e.jsx("div",{role:"tablist",className:"inline-flex flex-wrap gap-1 bg-gray-900/70 backdrop-blur-sm p-1.5 rounded-lg border border-gray-700/70 shadow-inner",children:Y.map(G=>e.jsxs("button",{role:"tab","aria-selected":Re(G.id),onClick:()=>ge(G.id),className:`px-3.5 py-1.5 text-[12px] md:text-sm font-semibold rounded-md border transition-colors flex items-center gap-1 focus:outline-none focus:ring-2 focus:ring-offset-0 focus:ring-red-600/40 ${Re(G.id)?"bg-red-600/30 border-red-500/70 text-red-200 shadow-sm":ce[G.id]?"bg-gray-800/90 border-green-600/60 text-green-400 hover:bg-gray-700":"bg-gray-800/70 border-gray-700 text-gray-400 hover:text-gray-200 hover:border-gray-600"}`,children:[G.label,ce[G.id]&&!Re(G.id)&&e.jsx("span",{className:"text-green-500",children:"âœ“"})]},G.id))}),e.jsxs("div",{className:"mt-2",children:[f.activeMethod==="oneRM"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[13px] text-gray-400",children:"Enter the heaviest weight you've successfully lifted for 1 rep."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[12px] uppercase tracking-wide text-gray-400 mb-1",children:"Weight"}),e.jsx("input",{type:"number",value:f.oneRM,onChange:G=>y(O,{oneRM:G.target.value,repWeight:"",repCount:"",tmOverride:""}),className:"w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-red-500 focus:outline-none",placeholder:"e.g. 280"})]}),C&&T&&e.jsxs("div",{className:"text-[13px] bg-gray-900/70 border border-red-500/40 rounded p-2 flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-400",children:["TM (",Math.round(o.tmPct*100),"%)"]}),e.jsx("span",{className:"text-red-400 font-semibold",children:C})]})]}),f.activeMethod==="reps"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[13px] text-gray-400",children:"Enter weight and reps from a recent set (3â€“10 reps work best)."}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("input",{type:"number",value:f.repWeight,onChange:G=>y(O,{repWeight:G.target.value,oneRM:"",tmOverride:""}),className:"flex-1 min-w-[120px] bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-red-500 focus:outline-none",placeholder:"Weight"}),e.jsx("input",{type:"number",value:f.repCount,onChange:G=>y(O,{repCount:G.target.value,oneRM:"",tmOverride:""}),className:"w-28 bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-red-500 focus:outline-none",placeholder:"Reps",min:1,max:12}),S&&e.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),D(O)},className:"text-[12px] px-3 py-2 rounded bg-gray-800 hover:bg-gray-700 text-gray-200 border border-gray-600",children:"Copy to All"})]}),S&&C&&e.jsxs("div",{className:"text-[13px] bg-gray-900/70 border border-red-500/40 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Est. 1RM "}),e.jsx("span",{className:"text-gray-300 font-mono",children:Z&&Math.round(Z)}),e.jsx("span",{className:"mx-1",children:"â†’"}),e.jsx("span",{className:"text-gray-400",children:"TM "}),e.jsx("span",{className:"text-red-400 font-semibold",children:C})]})]}),f.activeMethod==="override"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[13px] text-gray-400",children:"Enter your desired training max directly (typically 85â€“90% of 1RM)."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[12px] uppercase tracking-wide text-gray-400 mb-1",children:"Training Max"}),e.jsx("input",{type:"number",value:f.tmOverride,onChange:G=>y(O,{tmOverride:G.target.value,oneRM:"",repWeight:"",repCount:""}),className:"w-full bg-gray-900 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:border-red-500 focus:outline-none",placeholder:"e.g. 250"})]})]})]})]})]},O)};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg px-5 py-4 flex flex-col gap-3 md:gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"w-full md:w-auto flex-1",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-1 tracking-tight",children:"Step 1 â€” Program Fundamentals"}),e.jsx("p",{className:"text-gray-300 text-sm md:text-base mb-2 md:mb-1 leading-snug",children:"Configure base settings and establish training maxes (TMs) for all four main lifts."}),e.jsxs("div",{className:"flex items-center gap-3","aria-label":"Training max progress",children:[e.jsx("div",{className:"w-48 h-2.5 bg-gray-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 via-green-400 to-emerald-400 transition-all duration-300",style:{width:`${B.percent}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-400 tabular-nums",children:[B.completed,"/",B.total," set"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:j&&e.jsxs("div",{className:"inline-flex items-center gap-1 text-[12px] font-medium text-green-400 bg-green-500/10 border border-green-500/30 px-2 py-1 rounded-md shadow-sm transition-opacity animate-pulse",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-400"})," Auto-saved"]})})]}),e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg px-4 py-3",children:[e.jsx("div",{className:"flex items-center justify-start mb-2 gap-4",children:e.jsx("h3",{className:"text-lg font-semibold text-white tracking-wide uppercase",children:"Settings"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4 items-start",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[12px] font-semibold text-gray-300 mb-1 uppercase tracking-wide",children:"Units"}),e.jsx("div",{className:"flex gap-2 mb-1",children:["lb","kg"].map(O=>e.jsx(le,{on:o.units===O,onClick:()=>s({units:O}),className:"text-xs px-4",children:O.toUpperCase()},O))}),e.jsxs("p",{className:"text-[12px] leading-snug text-gray-400",children:["Choose weight units. ",e.jsx("span",{className:"font-medium text-gray-300",children:"LB"})," uses 2.5 / 5 lb increments, ",e.jsx("span",{className:"font-medium text-gray-300",children:"KG"})," uses 1.25 / 2.5 kg increments."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[12px] font-semibold text-gray-300 mb-1 uppercase tracking-wide",children:"Rounding"}),e.jsxs("select",{value:o.rounding,onChange:O=>s({rounding:O.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white text-sm focus:border-red-500 focus:outline-none mb-1",children:[e.jsx("option",{value:"ceil",children:"Round up"}),e.jsx("option",{value:"nearest",children:"Nearest"}),e.jsx("option",{value:"floor",children:"Round down"})]}),e.jsxs("ul",{className:"text-[12px] leading-snug text-gray-400 space-y-0.5",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-400 font-medium",children:"Round up:"})," Always to next increment (slightly heavier)."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-400 font-medium",children:"Nearest:"})," Standard rounding (recommended)."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-400 font-medium",children:"Round down:"})," Slightly lighter / conservative."]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[12px] font-semibold text-gray-300 mb-1 uppercase tracking-wide",children:"Training Max %"}),e.jsx("div",{className:"flex gap-2 mb-1",children:[.9,.85].map(O=>e.jsxs(le,{on:o.tmPct===O,onClick:()=>s({tmPct:O}),className:"text-xs px-4",children:[Math.round(O*100),"%"]},O))}),e.jsxs("ul",{className:"text-[12px] leading-snug text-gray-400 space-y-0.5",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-400 font-medium",children:"90%:"})," Standard starting point for most lifters."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-400 font-medium",children:"85%:"})," Conservative (new lifters, return from layoff/injury)."]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg px-5 py-6 space-y-6",children:[e.jsx("h3",{className:"text-3xl md:text-4xl font-extrabold text-white tracking-tight leading-tight",children:"Training Maxes"}),e.jsxs("div",{className:"prose prose-invert max-w-none text-sm md:text-[15px] leading-relaxed [&_strong]:text-gray-100 [&_strong]:font-semibold",children:[e.jsxs("p",{className:"text-gray-200",children:["Establish your training max for each lift using ",e.jsx("strong",{children:"ONE"})," of three methods. Your training max should be ",e.jsx("strong",{children:"85â€“90% of your true 1RM"})," to allow sustainable progress without burnout."]}),e.jsxs("div",{className:"space-y-5 mt-4",children:[e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700/70 rounded-lg p-4 shadow-sm",children:[e.jsxs("h4",{className:"text-base font-semibold text-white mb-1",children:["Tested 1RM ",e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"â€” Use your actual tested maximum"})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Enter the heaviest weight you can lift for 1 clean rep with solid form (no grind). Wendler suggests it should feel like you could perform 2â€“3 more reps on a fresh day."})]}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700/70 rounded-lg p-4 shadow-sm",children:[e.jsxs("h4",{className:"text-base font-semibold text-white mb-1",children:["Rep Calculator ",e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"â€” Calculate from recent rep test (3â€“10 reps)"})]}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Use Wendler's formula: ",e.jsx("span",{className:"font-mono",children:"Est. 1RM = Weight Ã— Reps Ã— 0.0333 + Weight"}),". Most accurate with sets of 3â€“5 reps. Enter weight and reps from your most recent heavy set."]})]}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700/70 rounded-lg p-4 shadow-sm",children:[e.jsxs("h4",{className:"text-base font-semibold text-white mb-1",children:["Manual Override ",e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"â€” Set custom training max (85â€“90% of 1RM)"})]}),e.jsxs("p",{className:"text-gray-300 text-sm",children:["Directly input your desired training max. Use ",e.jsx("strong",{children:"85%"})," if returning from a break, managing fatigue, or prioritizing long runway. Use ",e.jsx("strong",{children:"90%"})," for standard progression. Better to start ",e.jsx("em",{children:"too light"})," than too heavy."]})]})]}),e.jsx("p",{className:"mt-2 text-gray-400 text-sm",children:"Only one method is needed per lift. Switching tabs preserves previous entries but only the active tab's data is used."})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4 md:gap-5",children:Object.keys(o.lifts).map(te)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-blue-900/20 border border-blue-700/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx($e,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-300 mb-1",children:"Training Max Philosophy"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["TM should be 85-90% of your true 1RM. Rounding increments: ",o.units==="kg"?"2.5 kg":"5 lb"," (",o.rounding,")."]})]})]})}),e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-300 mb-1",children:"Training Max Validation"}),e.jsx("p",{className:"text-yellow-100 text-sm",children:"If you can't get 5+ reps at your TM on Week 1's top set, your TM is too high."})]})]})})]})]})}const cs={FAST:"30-40 min",MODERATE:"45-60 min",LONG:"60-90 min"},gs={[We.BBB]:{key:We.BBB,name:"Boring But Big (BBB)",blurb:"High-volume supplemental work (5Ã—10) for size and work capacity. Start conservative with 50% and progress slowly. Book-accurate assistance pairings from pages 46-47.",metaBadges:{time:cs.LONG,difficulty:"Intermediate",focus:"Hypertrophy"},structure:["Main 5/3/1 sets","Supplemental 5Ã—10 @ 50-60% TM (book range)","ONE assistance movement (25-50 reps)","Optional conditioning 2-3x weekly"],time:cs.LONG,recovery:"High local muscular fatigue; manage assistance & conditioning carefully. Deload as prescribed. Cut back on everything during Week 4.",who:"Intermediate/advanced lifters pursuing hypertrophy with significant mainâ€‘lift volume; not ideal for novices still grooving technique under lower fatigue.",assistanceHint:{intent:"BBB assistance should be ONE movement only (book-accurate). 25-50 reps total. Opposite movement pattern for balance.",examples:{Press:["Chin-ups: 5Ã—10"],Bench:["Dumbbell Row: 5Ã—10"],Deadlift:["Hanging Leg Raise: 5Ã—15"],Squat:["Leg Curl: 5Ã—10"]},totalReps:"25-50 reps total assistance work"}},[We.TRIUMVIRATE]:{key:We.TRIUMVIRATE,name:"Triumvirate",blurb:"Main lift + exactly two focused assistance movements (5 sets each). Balanced, timeâ€‘efficient baseline. For lifters wanting a sustainable structure without large assistance volume. 3â€“4 training days; avoid >2 consecutive days.",metaBadges:{time:"45-60 min",difficulty:"Intermediate",focus:"Balanced"},structure:["Main 5/3/1 sets","2 assistance exercises (5 sets each)","Optional conditioning"],time:cs.MODERATE,recovery:"Moderate systemic stress. Sustainable long-term baseline template.",who:"Beginner to early intermediate lifters building consistency; also useful as anchor between higher volume cycles.",assistanceHint:{intent:"Exactly three total movements per day: main lift + two assistance (book-accurate from pages 47-49).",examples:{Press:["Dips: 5Ã—15","Chin-ups: 5Ã—10"],Bench:["Dumbbell Bench Press: 5Ã—15","Dumbbell Row: 5Ã—10"],Deadlift:["Good Mornings: 5Ã—12","Hanging Leg Raises: 5Ã—15"],Squat:["Leg Press: 5Ã—15","Leg Curl: 5Ã—10"]},totalReps:"50-100 reps total assistance work"}},[We.PERIODIZATION_BIBLE]:{key:We.PERIODIZATION_BIBLE,name:"Periodization Bible",blurb:"Layered assistance blocks emphasizing multiple movement patterns (Dave Tate style). For lifters seeking broad movement pattern coverage and higher assistance volume in a fourâ€‘day split.",metaBadges:{time:"60-90 min",difficulty:"Advanced",focus:"Periodized"},structure:["Main 5/3/1 sets","4â€“5 varied assistance blocks (10â€“20 rep ranges)","Core & posterior chain emphasis","Conditioning kept brief"],time:cs.LONG,recovery:"High total volume; monitor joints & sleep. Scale blocks down if recovery degrades.",who:"Experienced lifters needing structured variation and comprehensive pattern balance over a training block.",assistanceHint:{intent:"Higher volume assistance: 100-200 reps total. Multiple movement patterns per day (Dave Tate style).",examples:{Press:["Shoulders: 5Ã—10-20","Lats: 5Ã—10-20","Triceps: 5Ã—10-20"],Bench:["Chest: 5Ã—10-20","Upper Back: 5Ã—10-20","Triceps: 5Ã—10-20"],Deadlift:["Hamstrings: 5Ã—10-20","Abs: 5Ã—10-20","Low Back: 5Ã—10-20"],Squat:["Quads: 5Ã—10-20","Hamstrings: 5Ã—10-20","Abs: 5Ã—10-20"]},totalReps:"100-200 reps total assistance work"}},[We.BODYWEIGHT]:{key:We.BODYWEIGHT,name:"Bodyweight Assistance",blurb:"Leverages bodyweight variations for assistance when equipment is limited. Good for beginners, older lifters, or jointâ€‘sensitive phases needing lower external loading.",metaBadges:{time:"30-40 min",difficulty:"Beginner Friendly",focus:"Equipment-Free"},structure:["Main 5/3/1 sets","Calisthenics assistance (push / pull / squat / core)","Short conditioning or finishers"],time:cs.FAST,recovery:"Lower external loading; easier joint stress but watch elbow/shoulder volume from high push/pull reps.",who:"Novice / detrained / equipmentâ€‘limited lifters focusing on movement quality and joint friendliness.",assistanceHint:{intent:"Bodyweight movements: Minimum 75 reps per exercise. Book-accurate pairings from page 52.",examples:{Press:["Chin-ups: 75+ reps","Dips: 75+ reps"],Bench:["Chin-ups: 75+ reps","Dips: 75+ reps"],Deadlift:["Good Morning: 75+ reps","Leg Raises: 75+ reps"],Squat:["Good Morning: 75+ reps","Leg Raises: 75+ reps"]},totalReps:"75+ reps per exercise minimum"}},[We.JACK_SHIT]:{key:We.JACK_SHIT,name:"Jack Shit",blurb:"Only the main 5/3/1 work. No supplemental or assistance. For experienced lifters during highly stressful or timeâ€‘constrained weeksâ€”maintain momentum without added fatigue.",metaBadges:{time:"30-40 min",difficulty:"Beginner Friendly",focus:"Strength Only"},structure:["Main 5/3/1 sets only","Leave gym (or do light mobility)","Add conditioning if energy allows"],time:cs.FAST,recovery:"Very low auxiliary fatigue. Ideal for stressful life phases or resetting motivation.",who:"Any lifter needing a strategic lowâ€‘stress microcycle (travel, finals week, high job stress).",assistanceHint:{intent:"Deliberately none. Focus only on main lifts. If you routinely add accessories, switch templates.",examples:{},totalReps:"0 reps assistance work"}}};function As(a){return gs[a]||null}function It(){return u.useMemo(()=>as?Array.isArray(as)?as:Object.entries(as).flatMap(([a,n])=>(n||[]).map(t=>({...t,block:t.block||(a==="singleLeg"?"Single-Leg":a.charAt(0).toUpperCase()+a.slice(1)),equipment:t.equipment||t.equip||[]}))):[],[])}function hs({block:a,equipment:n=[],onPick:t,onClose:i,limitIds:d=null,keepOpen:o=!1}){const[N,j]=u.useState(""),[h,g]=u.useState("All"),B=It(),A={All:"All Exercises",Push:"Push Pattern",Pull:"Pull Pattern",Core:"Core/Abs","Single-Leg":"Single-Leg/Unilateral"},R=u.useMemo(()=>B.filter(s=>{if(d&&!d.includes(s.id))return!1;const y=a&&a!=="All"?s.block===a:!0,D=h==="All"?!0:(()=>{const T=(s.block||"").toLowerCase(),S=(s.name||"").toLowerCase();switch(h){case"Push":return T.includes("push")||S.includes("dip")||S.includes("press")||S.includes("tricep");case"Pull":return T.includes("pull")||S.includes("chin")||S.includes("pullup")||S.includes("row")||S.includes("curl");case"Core":return T.includes("core")||S.includes("leg raise")||S.includes("hang")||S.includes("abs")||S.includes("plank");case"Single-Leg":return T.includes("single")||S.includes("lunge")||S.includes("leg curl")||S.includes("step")||S.includes("unilateral");default:return!0}})(),O=(s.equipment||[]).every(T=>n.includes(T)),f=N?s.name.toLowerCase().includes(N.toLowerCase()):!0;return y&&O&&f&&D}),[N,a,n,B,d,h]);return e.jsxs("div",{className:"p-3 border border-gray-600 rounded bg-gray-900 shadow-xl space-y-2 text-xs max-w-md",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 border border-gray-600 bg-gray-800 rounded px-2 py-1 text-xs text-gray-100",placeholder:"Search exercisesâ€¦",value:N,onChange:s=>j(s.target.value),onClick:s=>s.stopPropagation()}),e.jsx("button",{className:"border border-gray-600 hover:border-gray-400 rounded px-2 py-1 text-gray-300",onClick:s=>{s.stopPropagation(),i()},type:"button",children:"Close"})]}),o&&e.jsx("div",{className:"text-[10px] text-blue-300 bg-blue-900/20 border border-blue-500/40 rounded px-2 py-1",children:"ðŸ’¡ Modal stays open - browse and select multiple exercises"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-[10px] text-gray-400 font-medium",children:"Filter by Movement Pattern:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(A).map(([s,y])=>e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",onClick:D=>D.stopPropagation(),children:[e.jsx("input",{type:"radio",name:"categoryFilter",value:s,checked:h===s,onChange:D=>g(D.target.value),onClick:D=>D.stopPropagation(),className:"w-3 h-3 text-indigo-600 bg-gray-800 border-gray-600 focus:ring-indigo-500"}),e.jsx("span",{className:`text-[10px] px-1 py-0.5 rounded ${h===s?"bg-indigo-600/20 text-indigo-300":"text-gray-400"}`,children:y})]},s))})]}),e.jsxs("div",{className:"max-h-64 overflow-auto divide-y divide-gray-700",children:[R.map(s=>{const y=dt[s.id];return e.jsxs("div",{className:"flex items-center justify-between py-1",title:y||"",children:[e.jsxs("div",{className:"pr-3",children:[e.jsxs("div",{className:"font-medium text-gray-200 leading-tight flex items-center gap-1",children:[s.block&&e.jsx("span",{className:"text-[9px] px-1 py-0.5 rounded bg-gray-700/60 border border-gray-600 text-gray-300",children:s.block}),e.jsx("span",{children:s.name})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[(s.equipment||[]).join(", ")||"Any",y&&e.jsxs("span",{className:"text-gray-600",children:[" â€” ",y]})]})]}),e.jsx("button",{className:"border border-indigo-600/60 hover:border-indigo-400 rounded px-2 py-1 text-[10px] text-indigo-300",onClick:D=>{D.stopPropagation(),t(s),o||i()},type:"button",children:"Select"})]},s.id)}),!R.length&&e.jsxs("div",{className:"py-2 text-gray-500",children:['No matches for "',h,'" category.']})]})]})}function Wt({onChoose:a,onAutoNext:n}){var Ce,He;const t=xs(),{state:i,dispatch:d}=t,[o,N]=u.useState(null),[j,h]=u.useState(null),[g,B]=u.useState(!1),[A,R]=u.useState([]),s=u.useMemo(()=>Object.values(gs).map(k=>({key:k.key,title:k.name,blurb:k.blurb,detail:k.recovery,spec:k})),[]);function y(k,L){var U;try{if(typeof window<"u"&&((U=window.localStorage)==null?void 0:U.getItem("debug.531.template"))==="off")return;console.info("[531:TEMPLATE_SYNC] Step2",k,L)}catch{}}function D(k){N(k),h(U=>U===k?null:k),R([]),y("select",{key:k});const L=te(k,i);L.isValid||R(L.errors)}function te(k,L){const U=[];if(!(L!=null&&L.lifts))return U.push("Complete Step 1 (Training Maxes) before selecting a template"),{isValid:!1,errors:U};const re=["press","bench","squat","deadlift"].filter(V=>{var pe;return!((pe=L.lifts[V])!=null&&pe.tm)||L.lifts[V].tm<=0});return re.length>0&&U.push(`Missing training maxes for: ${re.map(V=>V.charAt(0).toUpperCase()+V.slice(1)).join(", ")}`),{isValid:U.length===0,errors:U}}const[O,f]=u.useState("standard"),[T,S]=u.useState("same"),[q,Z]=u.useState(50),[C,F]=u.useState(60),[_,ae]=u.useState({}),[Y,ge]=u.useState(null);function Re(){return{Press:[{name:"Chin-up",sets:5,reps:10,block:"Pull"}],Bench:[{name:"DB Row",sets:5,reps:10,block:"Pull"}],Squat:[{name:"Leg Curl",sets:5,reps:10,block:"Single-Leg"}],Deadlift:[{name:"Hanging Leg Raise",sets:5,reps:15,block:"Core"}]}}function ce(k,L){ae(U=>{if(U[k])return U;const v={};if(k===We.BBB){const re=Re();L.forEach(V=>{const pe=re[V.lift]||[];v[V.lift]=pe.length>0?pe:[{name:"",sets:5,reps:10,block:null}]})}else L.forEach(re=>{const V=k===We.BBB?1:2;v[re.lift]=(re.items||[]).slice(0,V).map(pe=>({name:pe.name,sets:pe.sets||3,reps:pe.reps||10,block:pe.block||null}))});return{...U,[k]:v}})}u.useEffect(()=>{if(!j||_[j])return;const k=As(j);if(!k)return;const U=["Press","Deadlift","Bench","Squat"].map(v=>({lift:v,items:bs(k.key,v,i)}));ce(j,U)},[j,i]);function G(k,L,U,v){ae(re=>{const V={...re[k]||{}},pe=[...V[L]||[]];return U>=0&&U<pe.length&&(pe[U]={...pe[U],...v}),V[L]=pe,{...re,[k]:V}})}function Le(k,L,U){ae(v=>{const re={...v[k]||{}},V=[...re[L]||[]];if(V.length>=U)return v;const pe=k===We.BBB?5:3;return V.push({name:"",sets:pe,reps:10,block:null}),re[L]=V,{...v,[k]:re}})}function De(k,L,U){ae(v=>{const re={...v[k]||{}},V=[...re[L]||[]];return V.splice(U,1),re[L]=V,{...v,[k]:re}})}function de(k){var U,v;const L=k||o;if(!(!L||A.length>0)){B(!0),R([]);try{const re={};L===We.BBB&&(re.bbb={variant:O,pairing:T,startPercent:O==="standard"?q:30,progressTo:O==="standard"?C:60});const V=$s(L,t,re);if(!V)throw new Error(`Template ${L} configuration not found`);const pe=As(L);if(L===We.BBB)if(V.supplemental={...V.supplemental,percentOfTM:q,percentage:q,strategy:"bbb",sets:5,reps:10,pairing:T},!_[L])V.assistance={mode:"template",templateId:L};else{const c=_[L];V.assistance={mode:"custom",customPlan:c}}else if(_[L]){const c=_[L];V.assistance={mode:"custom",customPlan:c}}d({type:"SET_TEMPLATE_KEY",payload:V.key}),d({type:"APPLY_TEMPLATE_CONFIG",payload:V}),y("apply",{key:V.key,schedule:V.schedule,assistanceMode:(U=V.assistance)==null?void 0:U.mode,hasCustomAssist:!!_[L]}),pe&&(d({type:"SET_TEMPLATE_SPEC",payload:pe}),pe.assistanceHint&&d({type:"SET_ASSISTANCE_HINT",payload:pe.assistanceHint})),d({type:"SET_FLOW_MODE",payload:"template"}),d({type:"SET_ASSIST_MODE",payload:((v=V.assistance)==null?void 0:v.mode)||"template"}),setTimeout(()=>{var c,b;B(!1);try{const w=t.state;y("postDispatchState",{order:(c=w==null?void 0:w.schedule)==null?void 0:c.order,days:(b=w==null?void 0:w.schedule)==null?void 0:b.days})}catch{}a&&a("template"),n&&n(),h(null)},300)}catch(re){console.error("Template application error:",re),R([re.message]),B(!1)}}}function ke(){a&&a("custom")}function Oe(k){if(!k)return"";const L=k.toLowerCase();return/(chin|pull|row|face|lat)/.test(L)?"Pull":/(press|push|dip|triceps|bench|pushup)/.test(L)?"Push":/(single|split|lunge|step|pistol|cossack)/.test(L)?"Single-Leg":/(ab|core|plank|wheel|crunch|pallof|situp|side_plank|hanging|windshield)/.test(L)?"Core":/(back ext|good|rdl|ghr|ham|glute|hip|posterior|swing|reverse_hyper)/.test(L)?"Posterior":/(curl)/.test(L)?"Arms":k}function Pe(k,L,U,v,re=!1){if(!k)return"";const V=k.toLowerCase(),pe=v||Oe(U==null?void 0:U.block);return V===We.BBB?re?`5Ã—10 @ ${q}% TM`+(C&&C!==q?` (progress toward ${C}%)`:""):"5Ã—10":V===We.TRIUMVIRATE?pe==="Pull"?"5Ã—10":pe==="Push"?"5Ã—15":pe==="Posterior"?"5Ã—12":pe==="Core"?"5Ã—15":pe==="Single-Leg"?"5Ã—15-10":"5Ã—10":V===We.BODYWEIGHT?"Multiple sets to reach 75â€“100 reps":V===We.PERIODIZATION_BIBLE?"5Ã—10-20":V===We.JACK_SHIT?"None":""}return e.jsxs("div",{className:"space-y-6 relative",children:[g&&e.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm rounded-lg flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-white text-sm",children:"Configuring template..."})]})}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Step 2 â€” Template or Custom"}),e.jsx("p",{className:"text-gray-400",children:"Select a proven Wendler template for instant configuration or continue with a fully custom build."})]}),A.length>0&&e.jsx("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-red-400 mt-0.5",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-300 font-medium mb-2",children:"Template Selection Issues"}),e.jsx("ul",{className:"space-y-1",children:A.map((k,L)=>e.jsxs("li",{className:"text-red-200 text-sm",children:["â€¢ ",k]},L))}),e.jsx("div",{className:"mt-3 text-xs text-red-300",children:"ðŸ’¡ Complete Step 1 (Training Maxes) before selecting a template"})]})]})}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/40 rounded-lg p-4 flex space-x-3",children:[e.jsx($e,{className:"w-5 h-5 text-blue-300 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-100",children:["Applying a template will auto-configure schedule, supplemental, and assistance settings. Beginners typically start with ",e.jsx("span",{className:"font-semibold text-white",children:"Triumvirate"})," or ",e.jsx("span",{className:"font-semibold text-white",children:"Bodyweight Assistance"}),". Intermediate lifters chasing size may choose ",e.jsx("span",{className:"font-semibold text-white",children:"Boring But Big"}),". Adjust after 1â€“2 cycles based on recovery."]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Choose a Proven Template"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Each template provides complete configuration based on Jim Wendler's proven methodologies. Click to expand details and configure."}),e.jsx("div",{className:"flex flex-col gap-4",children:s.map(k=>{var b,w,P,H,K,ye,he,M,X;const L=o===k.key,U=j===k.key,v=k.spec;let re=null;if(U){const z=(i==null?void 0:i.units)==="kg"?"kg":"lbs",Q=typeof(i==null?void 0:i.rounding)=="string"?i==null?void 0:i.rounding:((b=i==null?void 0:i.rounding)==null?void 0:b.mode)||"nearest",oe=typeof(i==null?void 0:i.rounding)=="object"?(i==null?void 0:i.rounding.increment)||5:z==="kg"?2.5:5,be="Bench",xe=((P=(w=i==null?void 0:i.lifts)==null?void 0:w.bench)==null?void 0:P.tm)||0,ee=((H=i==null?void 0:i.schedule)==null?void 0:H.warmupScheme)||{percentages:[40,50,60],reps:[5,5,3]},I=((K=i==null?void 0:i.schedule)==null?void 0:K.includeWarmups)!==!1,ne=(i==null?void 0:i.loadingOption)||((ye=i==null?void 0:i.loading)==null?void 0:ye.option)||1,je=0,qe=I?Es({includeWarmups:!0,warmupScheme:ee,tm:xe,roundingIncrement:oe,roundingMode:Q,units:z}):[],_e=Ms({tm:xe,weekIndex:je,option:ne,roundingIncrement:oe,roundingMode:Q,units:z}).sets,Ie=_[k.key]||{},Ue=["Press","Deadlift","Bench","Squat"].every(E=>(Ie[E]||[]).length>0);let fe=v==null?void 0:v.name;if((v==null?void 0:v.key)==="bbb"){const E=i==null?void 0:i.supplemental;(E==null?void 0:E.strategy)==="bbb"&&((E==null?void 0:E.pairing)==="same"||!(E!=null&&E.pairing))&&((E==null?void 0:E.percentOfTM)===50?fe="BBB 50% (Same-Lift Start)":(E==null?void 0:E.percentOfTM)===60&&(fe="BBB 60% (Same-Lift)"))}const Ee=/^BBB (50% \(Same-Lift Start\)|60% \(Same-Lift\))$/.test(fe||""),Fe=(v==null?void 0:v.key)==="jack_shit",Ze=(he=i==null?void 0:i.supplemental)==null?void 0:he.percentOfTM,Qe=Ee?["Main 5/3/1 sets (Week 1â€“3 AMRAP, Week 4 deload)",`Supplemental: 5Ã—10 @ ${Ze||50}% TM (same lift)`,"Assistance: ONE movement (classic BBB) â€“ e.g. chins, dips, rows, back raises, abs"]:v==null?void 0:v.structure,es=Ee?"High supplemental volume â€“ start lighter (50%) and progress cautiously to 60% over time. Favor easy conditioning (LISS) and cap assistance at 25â€“50 quality reps per movement. Deload Week 4.":v==null?void 0:v.recovery,Ne=["Main 5/3/1 sets only (Week 1â€“3 AMRAP, Week 4 deload)","Optional: 1â€“2 easy assistance movements (chins / dips / core)"];re=e.jsxs("div",{className:"mt-4 border-t border-gray-700 pt-4 space-y-6 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[Fe?"Jack Shit":fe||(v==null?void 0:v.name)," ",e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-indigo-600/20 border border-indigo-500/40 text-indigo-300 text-[10px] uppercase tracking-wide",children:"Details"})]}),e.jsx("p",{className:"text-xs text-indigo-200 mt-1 leading-snug",children:Ee?`Highâ€‘volume BBB sameâ€‘lift at ${Ze||50}% TM. Start light (50%)â€”only increase when recovery is solid.`:Fe?"Bareâ€‘bones 5/3/1: main work only. Add a little optional assistance if fresh.":v==null?void 0:v.blurb}),(v==null?void 0:v.who)&&e.jsxs("p",{className:"text-[11px] text-gray-400 mt-2",children:[e.jsx("span",{className:"font-semibold text-gray-300",children:"Who This Is For:"})," ",v.who]})]}),e.jsx("button",{onClick:()=>h(null),className:"text-gray-500 hover:text-gray-300","aria-label":"Collapse template",children:e.jsx(Ks,{className:"w-4 h-4"})})]}),v.key==="bbb"&&e.jsxs("section",{className:"bg-gray-800/60 border border-gray-700 rounded p-3 space-y-4 text-xs",children:[e.jsx("h6",{className:"text-[11px] font-semibold uppercase tracking-wide text-indigo-300",children:"BBB Configuration"}),e.jsx("div",{className:"text-[11px] text-gray-300 space-y-2",children:e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-indigo-300",children:"Book-Accurate BBB:"})," Start at 50% of Training Max and work up to 60% over several cycles. Keep assistance minimal (1-2 exercises, 25-50 reps total)."]})}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] uppercase text-gray-400",children:"Start %"}),e.jsx("select",{value:q,onChange:E=>Z(Number(E.target.value)),className:"w-full bg-gray-900 border border-gray-700 rounded px-2 py-1.5 text-[11px] text-white",children:[50,55,60].map(E=>e.jsxs("option",{value:E,children:[E,"%"]},E))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] uppercase text-gray-400",children:"Progress To"}),e.jsx("select",{value:C,onChange:E=>F(Number(E.target.value)),className:"w-full bg-gray-900 border border-gray-700 rounded px-2 py-1.5 text-[11px] text-white",children:[55,60].map(E=>e.jsxs("option",{value:E,children:[E,"%"]},E))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-[10px] uppercase text-gray-400",children:"Pairing"}),e.jsxs("select",{value:T,onChange:E=>S(E.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded px-2 py-1.5 text-[11px] text-white",children:[e.jsx("option",{value:"same",children:"Same Lift"}),e.jsx("option",{value:"opposite",children:"Opposite Lift"})]})]})]}),e.jsx("div",{className:"text-[10px] text-gray-400 leading-snug",children:e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-300",children:"Book Guidance:"})," Begin at 50% and only increase when recovery is solid. Most lifters should stay at 50-60% range as described in the original 5/3/1 manual."]})})]}),e.jsxs("section",{className:"grid md:grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{className:"bg-gray-800/60 rounded p-3",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-gray-400 mb-1",children:"Session Time"}),e.jsx("div",{className:"text-gray-200",children:Fe?"Very short (10â€“25 min)":Ee?"Moderate (45â€“60 min)":v==null?void 0:v.time})]}),e.jsxs("div",{className:"bg-gray-800/60 rounded p-3 md:col-span-2",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-gray-400 mb-1",children:"Recovery"}),e.jsx("div",{className:"text-gray-300 leading-snug text-[11px]",children:Fe?"Extremely low systemic stress. Ideal when time, equipment, or recovery is limited, or when reâ€‘establishing training momentum.":es})]})]}),e.jsxs("section",{children:[e.jsx("h6",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-400 mb-1",children:"Structure"}),e.jsx("ul",{className:"list-disc list-inside text-[11px] text-gray-300 space-y-0.5",children:(M=Fe?Ne:Qe)==null?void 0:M.map((E,ve)=>e.jsx("li",{children:E},ve))})]}),v.assistanceHint&&!Fe&&e.jsxs("section",{className:"space-y-3",children:[e.jsx("h6",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-400 mb-1",children:"Assistance Guidance"}),e.jsx("p",{className:"text-[11px] text-gray-300 leading-snug",children:Ee?"Choose ONE assistance movement only (book example). 25â€“50 quality reps. Keep it simple (e.g., chins, dips, rows, back raises, ab wheel). Progress load or reps slowly once recovery is rock solid.":v.assistanceHint.intent}),v.assistanceHint.examples&&Object.keys(v.assistanceHint.examples).length>0&&e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-4 gap-2",children:Object.entries(v.assistanceHint.examples).map(([E,ve])=>e.jsxs("div",{className:"bg-gray-800/50 rounded p-2",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wide text-gray-500 mb-1",children:E}),e.jsx("ul",{className:"text-[11px] text-gray-300 space-y-0.5",children:ve.map((Ve,Je)=>e.jsx("li",{children:Ve},Je))})]},E))})]}),Fe&&e.jsxs("section",{className:"space-y-2",children:[e.jsx("h6",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-400 mb-1",children:"Guidance"}),e.jsxs("ul",{className:"list-disc list-inside text-[11px] text-gray-300 space-y-0.5",children:[e.jsx("li",{children:"Main 5/3/1 work only; optionally add chins / dips / core if very fresh."}),e.jsx("li",{children:"Use when life stress or time is high, or reâ€‘starting after a layoff."}),e.jsx("li",{children:"Great base for layering conditioning or mobility."})]})]}),e.jsxs("section",{className:"bg-gray-800/50 border border-gray-700 rounded p-3 text-[11px] text-gray-300 space-y-1",children:[e.jsx("h6",{className:"text-[10px] font-semibold uppercase tracking-wide text-indigo-300",children:"Week 4 Deload"}),e.jsx("p",{className:"leading-snug",children:"Main work: 40% Ã—5, 50% Ã—5, 60% Ã—5 of Training Max (no AMRAP). Cut back on everything - reduce or skip supplemental work and keep assistance light and restorative (easy pulls, core work) if desired."}),e.jsx("p",{className:"leading-snug text-gray-400",children:`Goal: "If you're deloading, DELOAD" - reduce all volume and intensity to prepare for the next cycle.`})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h6",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-400",children:"Assistance Configuration"}),Ue&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-green-600/20 border border-green-500/40 text-green-300",children:"âœ“ Configured"})]}),e.jsxs("div",{className:"mb-4 text-[11px] text-gray-400 leading-snug bg-gray-800/40 border border-gray-700 rounded p-3",children:[e.jsx("strong",{className:"text-gray-300",children:"Guidance:"})," Balance push / pull / singleâ€‘leg / core patterns. Pick movements that complement the main lift without duplicating its stress. Favor high quality reps over fatigue."]}),null,e.jsx("div",{className:"space-y-4",children:["Press","Deadlift","Bench","Squat"].map(E=>{const ve=Ie[E]||[],Ve=k.key===We.BBB?1:2,Je=ve.length<Ve,rs=()=>{ve.length===0&&Le(k.key,E,Ve)},ss={Press:["Pull"],Deadlift:["Core","Single-Leg"],Bench:["Pull"],Squat:["Posterior","Pull","Core","Single-Leg"]},x=new Set(ve.map(r=>Oe(r.block)).filter(Boolean)),$=ss[E]||[],se=$.length?$.some(r=>x.has(r)):!0,ie=ve.length&&!se,we=ie?E==="Press"||E==="Bench"?"Consider a Pull movement for shoulder balance.":E==="Deadlift"?"Add Core or Singleâ€‘Leg for balance.":"Add posterior chain or upper back assistance.":null;return e.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-900/60 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-xs font-semibold tracking-wide uppercase text-indigo-300",children:E}),Je&&ve.length===0&&e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),rs()},className:"text-[10px] px-2 py-1 rounded bg-gray-700/60 hover:bg-gray-700 text-gray-200 border border-gray-600",children:"Add"})]}),ie&&e.jsxs("div",{className:"mb-2 text-[10px] flex items-center gap-2 text-amber-300 bg-amber-600/10 border border-amber-500/40 rounded px-2 py-1",children:[e.jsx("span",{className:"font-medium",children:"Pattern Tip:"})," ",we]}),ve.length===0&&e.jsx("p",{className:"text-[11px] text-gray-500 italic mb-1",children:"No assistance selected."}),ve.map((r,l)=>{const p=!r.name;return e.jsxs("div",{className:"relative mb-2 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("button",{type:"button",className:`flex-shrink-0 flex-1 basis-[60%] text-left text-[11px] px-3 py-2 rounded border ${p?"bg-gray-800/40 border-amber-500/40 text-amber-200":"bg-gray-900/70 border-gray-600 text-gray-100 hover:bg-gray-700/70"} truncate`,title:r.name||"Pick assistance movement",onClick:m=>{m.stopPropagation(),ge({templateKey:k.key,lift:E,index:l})},children:r.name||"Select Movement"}),e.jsxs("label",{className:"flex items-center gap-1 basis-[15%] text-[10px] text-gray-400",children:[e.jsx("span",{className:"uppercase tracking-wide",children:"Sets"}),e.jsx("input",{type:"number",min:1,max:10,value:r.sets,onChange:m=>G(k.key,E,l,{sets:Number(m.target.value)}),onClick:m=>m.stopPropagation(),className:"w-full bg-gray-900 border border-gray-600 rounded px-1 py-1 text-[10px] text-gray-100 focus:outline-none focus:ring-1 focus:ring-indigo-400"})]}),e.jsxs("label",{className:"flex items-center gap-1 basis-[15%] text-[10px] text-gray-400",children:[e.jsx("span",{className:"uppercase tracking-wide",children:"Reps"}),e.jsx("input",{type:"number",min:1,max:50,value:r.reps,onChange:m=>G(k.key,E,l,{reps:Number(m.target.value)}),onClick:m=>m.stopPropagation(),className:"w-full bg-gray-900 border border-gray-600 rounded px-1 py-1 text-[10px] text-gray-100 focus:outline-none focus:ring-1 focus:ring-indigo-400"})]}),e.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),De(k.key,E,l)},className:"basis-[10%] text-right text-[12px] font-bold text-red-400 hover:text-red-300","aria-label":"Remove assistance movement",children:"âœ•"})]}),(()=>{const m=Pe(k.key,O,r,Oe(r.block),!1);return m?e.jsxs("div",{className:"text-[10px] text-gray-500 mt-1 pl-1",children:["Scheme: ",m]}):null})(),Y&&Y.templateKey===k.key&&Y.lift===E&&Y.index===l&&e.jsx("div",{className:"relative z-30 mb-2",onClick:m=>m.stopPropagation(),children:e.jsx(hs,{equipment:i.equipment||[],onPick:m=>{G(k.key,E,Y.index,{name:m.name,block:m.block,sets:ve[Y.index].sets||m.sets||5,reps:ve[Y.index].reps||Number(m.reps)||10})},onClose:()=>ge(null),keepOpen:!0})})]},l)}),Je&&ve.length>0&&e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),Le(k.key,E,Ve)},className:"text-[10px] px-2 py-1 rounded bg-gray-700/60 hover:bg-gray-700 text-gray-200 border border-gray-600",children:"+ Add Movement"})]},E)})}),e.jsx("p",{className:"mt-3 text-[10px] text-gray-500 leading-snug",children:"Adjust assistance now to skip the Design step. BBB keeps assistance to ONE simple movement (25â€“50 quality reps total). Jack Shit: leave blank or add one easy core / pull if very fresh."})]}),e.jsxs("section",{children:[e.jsxs("h6",{className:"text-[11px] font-semibold uppercase tracking-wide text-gray-400 mb-2",children:["Example Day (Week 1 â€“ ",be,")"]}),e.jsx("div",{className:"overflow-x-auto text-[11px]",children:e.jsxs("table",{className:"min-w-full text-left border-separate border-spacing-y-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500",children:[e.jsx("th",{className:"pr-4 font-medium",children:"Block"}),e.jsx("th",{className:"pr-4 font-medium",children:"Details"})]})}),e.jsxs("tbody",{children:[I&&qe.map((E,ve)=>e.jsxs("tr",{children:[e.jsx("td",{className:"pr-4 text-gray-400",children:"Warm-up"}),e.jsxs("td",{className:"pr-4 font-mono",children:[E.percent,"% x ",E.reps," @ ",E.weight,z]})]},ve)),_e.map((E,ve)=>e.jsxs("tr",{children:[e.jsx("td",{className:"pr-4 text-gray-400",children:"Main"}),e.jsxs("td",{className:"pr-4 font-mono",children:[E.percent,"% x ",E.reps," @ ",E.weight,z]})]},ve)),(Ie[be]||[]).map((E,ve)=>e.jsxs("tr",{children:[e.jsx("td",{className:"pr-4 text-gray-400",children:"Assist"}),e.jsxs("td",{className:"pr-4 font-mono",children:[E.name||"â€”"," ",E.sets,"x",E.reps]})]},ve))]})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 pt-1",children:[e.jsx("div",{className:"text-[11px] text-gray-500",children:"Review details then apply to auto-configure your cycle (assistance saved)."}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>de(k.key),type:"button",className:"inline-flex items-center space-x-2 px-4 py-2 rounded-lg bg-indigo-600/20 border border-indigo-500 text-indigo-200 text-xs font-medium hover:bg-indigo-600/30",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Use This Template"})]}),e.jsx("button",{onClick:()=>h(null),type:"button",className:"text-[11px] text-gray-500 hover:text-gray-300",children:"Collapse"})]})]})]})}const V=(v==null?void 0:v.metaBadges)||{};function pe(z,Q){const oe="px-2 py-0.5 rounded text-[10px] font-medium tracking-wide";if(z==="difficulty"){if(Q==="Beginner Friendly")return oe+" bg-green-600/20 text-green-300 border border-green-500/40";if(Q==="Intermediate")return oe+" bg-blue-600/20 text-blue-300 border border-blue-500/40";if(Q==="Advanced")return oe+" bg-amber-600/20 text-amber-300 border border-amber-500/40"}return z==="time"?oe+" bg-gray-700/60 text-gray-300 border border-gray-600":z==="focus"?oe+" bg-indigo-600/20 text-indigo-300 border border-indigo-500/40":oe+" bg-gray-700/60 text-gray-300 border border-gray-600"}const c=[{key:"time",label:"time",value:V.time,tip:V.time==="60-90 min"?"Longer workouts due to higher volume supplemental work.":V.time==="45-60 min"?"Standard full 5/3/1 training session length.":"Short, minimalist session focusing only on main work."},{key:"difficulty",label:"difficulty",value:V.difficulty,tip:V.difficulty==="Advanced"?"Higher total volume and recovery demand.":V.difficulty==="Intermediate"?"Moderate volume; balanced recovery demand.":"Simple, low stress structure."},{key:"focus",label:"focus",value:V.focus,tip:V.focus}].filter(z=>z.value).slice(0,3);return e.jsxs("div",{className:["relative rounded-lg border group transition-all duration-200 p-6 flex flex-col justify-between outline-none cursor-pointer",U?"border-indigo-500 bg-indigo-600/10 ring-2 ring-indigo-400 shadow-lg":L?"border-green-500 bg-green-600/10 ring-1 ring-green-400":"border-gray-700 bg-gray-800/40 hover:border-gray-500 hover:bg-gray-800/60"].join(" "),onClick:()=>D(k.key),children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-bold text-white text-base leading-snug pr-6",children:k.title}),L&&e.jsx(Be,{className:"w-6 h-6 text-green-400"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:c.map(z=>e.jsx("span",{className:pe(z.label,z.value),title:z.tip,children:z.value},z.key))}),e.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-4 flex-1",children:k.blurb}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2",children:"Key Features"}),e.jsx("ul",{className:"text-xs text-gray-400 space-y-1",children:(X=v==null?void 0:v.structure)==null?void 0:X.slice(0,3).map((z,Q)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-indigo-400 mt-0.5",children:"â€¢"}),e.jsx("span",{children:z})]},Q))})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-auto",children:[e.jsx(le,{on:U,className:"text-sm px-4 py-2",onClick:z=>{z.stopPropagation(),D(k.key)},children:U?"Collapse Details":L?"View Details":"Select & Configure"}),L&&!U&&e.jsx("button",{onClick:z=>{z.stopPropagation(),de(k.key)},disabled:A.length>0,className:"text-sm px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"Use This Template â†’"})]})]}),U&&re]},k.key)})})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-900/20 to-purple-900/20 border border-blue-700/50 rounded-lg p-6 hover:border-blue-600/70 transition-all duration-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-blue-600/20 rounded-lg p-3 flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Want Full Control?"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4 leading-relaxed",children:"Skip presets and design every layer yourself: supplemental strategy, assistance volume, conditioning, and advanced options. Perfect for experienced lifters with specific needs."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2",children:"You'll Configure"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Training schedule (3-day, 4-day splits)"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Supplemental work (BBB, FSL, etc.)"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 mt-0.5",children:"â€¢"}),e.jsx("span",{children:"Assistance exercises & volume"})]})]})]}),e.jsx(le,{on:!1,onClick:ke,className:"text-sm px-6 py-3 bg-gradient-to-r from-blue-700 to-blue-600 hover:from-blue-600 hover:to-blue-500",children:"Continue with Custom Design â†’"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-800/80 to-gray-700/80 border border-gray-600 rounded-lg p-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-indigo-600/20 rounded-lg p-2",children:e.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})}),e.jsx("h4",{className:"text-lg font-bold text-white",children:"Ready to Continue?"})]}),e.jsx("div",{className:"space-y-4",children:o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-900/30 border border-green-500/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Be,{className:"w-5 h-5 text-green-400"}),e.jsxs("span",{className:"text-green-300 font-semibold",children:["Template Selected: ",(Ce=gs[o])==null?void 0:Ce.name]})]}),e.jsx("p",{className:"text-green-200 text-sm leading-relaxed",children:"This template will automatically configure your schedule, supplemental work, and assistance exercises based on Jim Wendler's proven methodology. You can review and adjust everything before generating your program."})]}),A.length>0&&e.jsxs("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-red-300 font-medium",children:"Issues to Fix"})]}),e.jsx("ul",{className:"text-red-200 text-sm space-y-1",children:A.map((k,L)=>e.jsxs("li",{children:["â€¢ ",k]},L))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{on:!0,disabled:A.length>0,onClick:()=>de(o),className:"text-base px-8 py-4 bg-gradient-to-r from-green-700 to-green-600 hover:from-green-600 hover:to-green-500 disabled:from-gray-700 disabled:to-gray-600 disabled:cursor-not-allowed",children:A.length>0?"Fix Issues Above First":`Use ${(He=gs[o])==null?void 0:He.name} Template â†’`}),!A.length&&e.jsx("span",{className:"text-xs text-gray-400",children:"Will jump to Step 4 (Review & Export)"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-900/30 border border-blue-500/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx($e,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-blue-300 font-semibold",children:"Choose Your Path"})]}),e.jsx("p",{className:"text-blue-200 text-sm leading-relaxed",children:"Select a proven template above for instant configuration, or continue with custom design to build your program step-by-step with full control over every detail."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{on:!1,onClick:ke,className:"text-base px-8 py-4 bg-gradient-to-r from-blue-700 to-blue-600 hover:from-blue-600 hover:to-blue-500",children:"Continue with Custom Design â†’"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Will proceed to Step 3 (Design Custom)"})]})]})})]})]})})]})}const Ns=["Press","Deadlift","Bench","Squat"],is=[{week:1,days:["Press","Deadlift","Bench"]},{week:2,days:["Squat","Press","Deadlift"]},{week:3,days:["Bench","Squat","Press"]},{week:4,days:["Deadlift","Bench","Squat"]},{week:5,days:["Deload All","Deload All","Deload All"]}],Dt=["Monday","Wednesday","Friday"];function ds(a){return a?a.split(",").map(n=>n.trim()).filter(n=>n.length>0).map(n=>Number(n)).filter(n=>Number.isFinite(n)):[]}function qt(a){var ee,I,ne,je,qe,_e,Ie,Ue,fe,Ee,Fe,Ze,Qe,es,Ne,Ge,E,ve,Ve,Je,rs,ss,x,$,se,ie,we;const{onValidChange:n}=a||{},{state:t,dispatch:i}=xs(),[d,o]=u.useState(!1),[N,j]=u.useState([]);if(!t)return console.warn("ProgramV2 state not available, using defaults"),e.jsx("div",{className:"p-4 text-red-500",children:"Loading program data..."});u.useEffect(()=>{t.supplemental||(console.log("Initializing supplemental state"),i({type:"SET_SUPPLEMENTAL",supplemental:{strategy:"none",type:"fsl",details:{}}}))},[t,i]);const h=(t==null?void 0:t.schedule)||{},[g,B]=u.useState(h.frequency||"4day"),[A,R]=u.useState(h.order||["Press","Deadlift","Bench","Squat"]),[s,y]=u.useState(h.includeWarmups!==!1),[D,te]=u.useState((((ee=h.warmupScheme)==null?void 0:ee.percentages)||[40,50,60]).join(",")),[O,f]=u.useState((((I=h.warmupScheme)==null?void 0:I.reps)||[5,5,3]).join(",")),[T,S]=u.useState(1),[q,Z]=u.useState((t==null?void 0:t.deadliftRepStyle)||"dead_stop"),[C,F]=u.useState((h==null?void 0:h.order)&&h.order[0]||"Press"),_=r=>{B(r),r==="3day"?(S(1),R(is[0].days)):r==="4day"?R(["Press","Deadlift","Bench","Squat"]):r==="2day"&&R(["Press","Deadlift"])},ae=u.useRef(null);u.useEffect(()=>{var r,l,p;try{const m=(t==null?void 0:t.templateKey)||(t==null?void 0:t.template),W=(r=t==null?void 0:t.schedule)==null?void 0:r.order,J=(l=t==null?void 0:t.schedule)==null?void 0:l.frequency;if(!m||!Array.isArray(W)||!W.length||ae.current===m)return;const me=W.map(Te=>{if(!Te)return"Press";const Se=Te.toLowerCase();return Se==="press"?"Press":Se==="deadlift"?"Deadlift":Se==="bench"?"Bench":Se==="squat"?"Squat":Te.charAt(0).toUpperCase()+Te.slice(1)});R(me),J&&B(J),ae.current=m,typeof window<"u"&&((p=window==null?void 0:window.localStorage)==null?void 0:p.getItem("debug.531.template"))!=="off"&&console.info("[531:TEMPLATE_SYNC]","step3.reconciledFromTemplate",{templateKey:m,order:me,frequency:J})}catch(m){console.warn("[531:TEMPLATE_SYNC]","step3.reconcileError",m.message)}},[t==null?void 0:t.templateKey,t==null?void 0:t.template,(ne=t==null?void 0:t.schedule)==null?void 0:ne.order,(je=t==null?void 0:t.schedule)==null?void 0:je.frequency]);const[Y,ge]=u.useState((t==null?void 0:t.programmingApproach)||"basic"),[Re,ce]=u.useState((t==null?void 0:t.leaderAnchorPattern)||"2+1"),[G,Le]=u.useState((t==null?void 0:t.supplemental)&&t.supplemental.strategy||"none"),[De,de]=u.useState((t==null?void 0:t.supplemental)&&t.supplemental.pairing||"same"),[ke,Oe]=u.useState((t==null?void 0:t.supplemental)&&t.supplemental.percentOfTM||50),[Pe,Ce]=u.useState((t==null?void 0:t.assistance)&&t.assistance.mode||"minimal"),He=(t==null?void 0:t.assistance)&&t.assistance.customPlan||{},[k,L]=u.useState(He),[U,v]=u.useState(null),[re,V]=u.useState(null);u.useMemo(()=>as?Array.isArray(as)?as:Object.entries(as).flatMap(([r,l])=>(l||[]).map(p=>({...p,block:p.block||(r==="singleLeg"?"Single-Leg":r.charAt(0).toUpperCase()+r.slice(1)),equipment:p.equip||p.equipment||[]}))):[],[]);const pe=["All","Push","Pull","Single-Leg","Posterior","Core"],[c,b]=u.useState("All"),w=["bw","db","bb","machine","cable","band","kb","dip","rings","bench","box","landmine","plate","abwheel","bar"],[P,H]=u.useState((t==null?void 0:t.equipment)||["bw","db","bb"]);function K(r){H(l=>l.includes(r)?l.filter(p=>p!==r):[...l,r])}u.useEffect(()=>{R(r=>{const l=g==="4day"?4:g==="3day"?3:2;let p=r.slice(0,l);for(;p.length<l;)p.push(Ns[p.length]||"Press");return p})},[g]);function ye(r,l){R(p=>p.map((m,W)=>W===r?l:m)),l==="Deadlift"?F("Deadlift"):C==="Deadlift"&&!he(r,l)&&F(l)}function he(r,l){return A.some((p,m)=>(m===r?l:p)==="Deadlift")}function M(){B("4day"),R(["Press","Deadlift","Bench","Squat"]),S(1)}function X(){g==="4day"?R(["Press","Deadlift","Bench","Squat"]):g==="3day"?(S(1),R(is[0].days)):R(["Press","Deadlift"])}function z(r){L(l=>{const p=A[r],m=l[p]?[...l[p]]:[];return m.length>=2?l:(m.push({name:"",sets:3,reps:10}),{...l,[p]:m})})}function Q(r,l,p){L(m=>{const W=m[r]?[...m[r]]:[];return W[l]?(W[l]={...W[l],...p},{...m,[r]:W}):m})}function oe(r,l){L(p=>{const m=p[r]?[...p[r]]:[];if(m.splice(l,1),m.length===0){const W={...p};return delete W[r],W}return{...p,[r]:m}})}const be=u.useMemo(()=>{const r=[],l=[],p=g==="4day"?4:g==="3day"?3:2;if(A.length!==p&&r.push(`Schedule must have ${p} days for ${g} frequency`),new Set(A).size!==A.length&&r.push("Each training day must use a different main lift"),A.every(W=>Ns.includes(W))||r.push("All lifts must be from the core 4: Press, Deadlift, Bench, Squat"),s){const W=ds(D),J=ds(O);(W.length===0||W.length!==J.length)&&r.push("Warmup percentages and reps must have matching counts"),W.length>5&&l.push("More than 5 warmup sets may cause fatigue"),W.every(me=>me>0&&me<100)||r.push("Warmup percentages must be between 1-99%"),J.every(me=>me>0&&me<30)||r.push("Warmup reps must be between 1-29")}if(Y?Y==="leaderAnchor"&&!Re&&r.push("Select a Leader/Anchor pattern"):r.push("Select a programming approach"),G==="bbb"&&(ke>=50&&ke<=70||l.push("BBB percentage should be 50-60% of TM (book range)"),ke<40&&r.push("BBB percentage too low (minimum 40%)"),ke>80&&r.push("BBB percentage too high (maximum 80%)")),Pe==="custom")for(const W of A){const J=k[W]||[];J.length>2&&l.push(`${W} has more than recommended 2 assistance exercises`);for(const me of J)(!me.name||me.name.trim().length===0)&&r.push(`${W} has unnamed assistance exercise`),me.sets>=1&&me.sets<=10||r.push(`${W} assistance sets must be 1-10`),me.reps>=1&&me.reps<=30||r.push(`${W} assistance reps must be 1-30`)}return(!P||P.length===0)&&l.push("No equipment selected - this will limit exercise options"),{isValid:r.length===0,errors:r,warnings:l,hasWarnings:l.length>0}},[g,A,s,D,O,Y,Re,G,ke,Pe,k,P]);u.useEffect(()=>{j(be.errors)},[be]);const xe=u.useMemo(()=>{var Xe;const r=g==="4day"?4:g==="3day"?3:2;let l=A.length===r;new Set(A).size!==A.length&&(l=!1),A.every(Me=>Ns.includes(Me))||(l=!1);let m=!0,W=ds(D),J=ds(O);s&&((W.length===0||W.length!==J.length)&&(m=!1),W.length>5&&(m=!1),(!W.every(Me=>Me>0&&Me<100)||!J.every(Me=>Me>0&&Me<30))&&(m=!1));let me=!0;G==="bbb"&&(ke>=50&&ke<=70||(me=!1));let Te=!0;if(Pe==="custom")for(const Me of A){const Ye=k[Me]||[];if(Ye.length>2){Te=!1;break}for(const ue of Ye){if(!ue.name||ue.name.trim().length===0){Te=!1;break}if(!(ue.sets>=1&&ue.sets<=10)){Te=!1;break}if(!(ue.reps>=1&&ue.reps<=30)){Te=!1;break}}if(!Te)break}let Se=!0;Y==="leaderAnchor"&&(["2+1","3+1"].includes(Re)||(Se=!1));let Ae=!0;return(((Xe=t==null?void 0:t.conditioning)==null?void 0:Xe.protocols)||[]).length||(Ae=!1),{valid:l&&m&&me&&Te&&Se&&Ae,scheduleOk:l,warmupsOk:m,supplementalOk:me,assistanceOk:Te,programmingOk:Se,conditioningOk:Ae}},[g,A,s,D,O,G,ke,Pe,k,Y,Re]);return u.useEffect(()=>{n&&n(xe.valid)},[xe,n]),u.useEffect(()=>{const r=setTimeout(()=>{const l={frequency:g,order:A,includeWarmups:s,warmupScheme:{percentages:ds(D),reps:ds(O)}};g==="3day"&&(l.rotationWeek=T,l.rotationPattern=is),ot(i,l),i({type:"SET_DEADLIFT_REP_STYLE",payload:q}),G==="bbb"?Ws(i,{strategy:"bbb",pairing:De,percentOfTM:ke,sets:5,reps:10}):Ws(i,{strategy:"none"}),Pe==="custom"?Ds(i,{mode:"custom",customPlan:k}):Ds(i,{mode:Pe})},250);return()=>clearTimeout(r)},[g,A,s,D,O,q,G,De,ke,Pe,k,T,i]),u.useEffect(()=>{const r=setTimeout(()=>i({type:"SET_EQUIPMENT",payload:P}),200);return()=>clearTimeout(r)},[P,i]),u.useEffect(()=>{const r=setTimeout(()=>{var l,p,m;i({type:"SET_PROGRAMMING_APPROACH",payload:{programmingApproach:Y,leaderAnchorPattern:Y==="leaderAnchor"?Re:void 0,userProfile:(t==null?void 0:t.userProfile)||{experience:"intermediate",recovery:"average"},advanced:{...(t==null?void 0:t.advanced)||{},useJokerSets:Y==="competition"&&((l=t==null?void 0:t.advanced)==null?void 0:l.useJokerSets)||!1,strictPrSets:Y==="traditional"?((p=t==null?void 0:t.advanced)==null?void 0:p.strictPrSets)||!0:!1,deloadStrategy:Y==="traditional"&&((m=t==null?void 0:t.advanced)==null?void 0:m.deloadStrategy)||"every7th"}}})},200);return()=>clearTimeout(r)},[Y,Re,t==null?void 0:t.advanced,t==null?void 0:t.userProfile,i]),e.jsxs("div",{className:"space-y-8 relative",children:[d&&e.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm rounded-lg flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-white text-sm",children:"Saving configuration..."})]})}),e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Step 3: Design Your Cycle"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Configure your training schedule, supplemental work, and assistance exercises."}),be.isValid?e.jsxs("div",{className:"bg-green-900/20 border border-green-500/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-green-300 text-sm font-medium",children:"Configuration Complete"})]}),be.hasWarnings&&e.jsxs("div",{className:"mt-2 text-xs text-yellow-300",children:[be.warnings.length," recommendation(s) below"]})]}):e.jsx("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-red-300 text-sm font-medium",children:[be.errors.length," issue(s) need attention"]}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[be.errors.slice(0,3).map((r,l)=>e.jsxs("li",{className:"text-red-200 text-xs",children:["â€¢ ",r]},l)),be.errors.length>3&&e.jsxs("li",{className:"text-red-200 text-xs",children:["â€¢ ... and ",be.errors.length-3," more"]})]})]})]})}),be.hasWarnings&&e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/50 rounded-lg p-3 mt-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-yellow-300 text-sm font-medium",children:"Recommendations"}),e.jsx("ul",{className:"mt-1 space-y-1",children:be.warnings.map((r,l)=>e.jsxs("li",{className:"text-yellow-200 text-xs",children:["â€¢ ",r]},l))})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Design your cycle"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Set your warm-ups, main % by week, and supplemental style. You can convert assistance to custom later."}),e.jsxs("ul",{className:"mt-3 space-y-1 text-sm list-disc pl-5 text-gray-300",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Warm-ups:"})," 40/50/60% of TM ramps without fatigue."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Main:"})," Week 1â€“3 last set AMRAP; Week 4 deload (no AMRAP) ",e.jsx("span",{className:"text-gray-400",children:"(can optionally skip below if running a longer Leader block)."})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Supplemental (BBB):"})," 5Ã—10 @ 50â€“60% (book-accurate range)."]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 flex flex-col gap-1",children:[e.jsx("span",{children:"Change days/split in Step 2. Rounding set in Step 1."}),e.jsx("span",{className:"text-gray-400 italic",children:"Conditioning: 2 easy LISS sessions weekly; donâ€™t let conditioning hurt lifting."})]}),e.jsxs("div",{className:"mt-4 bg-gray-900/40 border border-gray-700 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold tracking-wide text-gray-300",children:"Deload Week 4"}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("input",{type:"checkbox",className:"h-3 w-3",checked:!((qe=t==null?void 0:t.advanced)!=null&&qe.skipDeload),onChange:r=>{i({type:"SET_ADVANCED",advanced:{...(t==null?void 0:t.advanced)||{},skipDeload:!r.target.checked}})}}),e.jsx("span",{children:(_e=t==null?void 0:t.advanced)!=null&&_e.skipDeload?"Off (skipped this cycle)":"On (default)"})]})]}),e.jsx("p",{className:"mt-2 text-[11px] leading-relaxed text-gray-400",children:"Keep ON for standard 4-week cycles. Advanced users running multi-phase (Leader/Anchor) can disable interim deloads (e.g. only deload after final Anchor). When OFF, export will show only 3 loading weeks; progression still expects full recovery management on you."})]})]}),e.jsxs("section",{className:"bg-gray-800/60 border border-gray-700 rounded-lg p-6 space-y-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"A) Schedule"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Configure your training frequency and lift order"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(le,{on:!1,onClick:M,className:"text-xs bg-gray-700/50 hover:bg-gray-700",children:"Standard Order"}),e.jsx(le,{on:!1,onClick:X,className:"text-xs bg-gray-700/50 hover:bg-gray-700",children:"Reset Order"})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:"Training Frequency"}),e.jsx("div",{className:"flex flex-wrap gap-3 items-center",children:["4day","3day","2day"].map(r=>e.jsx(le,{on:g===r,onClick:()=>_(r),className:"px-4 py-2 font-medium",children:r.replace("day","-day")},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:g==="3day"?"Rotation Schedule":"Lift Order"}),g==="4day"&&e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-4 gap-4",children:A.map((r,l)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs uppercase tracking-wide text-gray-400",children:["Slot ",l+1]}),e.jsx("select",{value:r,onFocus:()=>F(r),onChange:p=>{ye(l,p.target.value),F(p.target.value)},className:`w-full bg-gray-800 border rounded px-2 py-2 text-sm text-white focus:border-red-500 ${C===r?"border-red-500":"border-gray-600"}`,children:Ns.map(p=>e.jsx("option",{value:p,children:p},p))}),C==="Deadlift"&&r==="Deadlift"&&e.jsxs("div",{className:"mt-2 bg-gray-800/60 border border-gray-700 rounded p-2 space-y-1",children:[e.jsx("label",{className:"text-[11px] font-medium text-gray-200",children:"Deadlift rep style"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Affects how reps are performed."}),e.jsxs("div",{className:"flex items-center gap-3 text-[11px]",role:"radiogroup","aria-label":"Deadlift rep style",children:[e.jsxs("label",{className:"inline-flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"dlRepStyle",value:"dead_stop",checked:q==="dead_stop",onChange:()=>Z("dead_stop")}),e.jsx("span",{children:"Reset each rep"})]}),e.jsxs("label",{className:"inline-flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"dlRepStyle",value:"touch_and_go",checked:q==="touch_and_go",onChange:()=>Z("touch_and_go")}),e.jsx("span",{children:"Touch-and-go"})]})]})]})]},l))}),g==="3day"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-red-300",children:["Current Week ",T," Schedule"]}),T===5&&e.jsx("span",{className:"text-xs bg-blue-800/40 border border-blue-500/40 text-blue-200 px-2 py-1 rounded",children:"Deload Week"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 text-sm",children:Dt.map((r,l)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:r}),e.jsx("div",{className:"text-white font-medium",children:is[T-1].days[l]})]},r))})]}),e.jsxs("div",{className:"bg-gray-800/40 border border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-white",children:"5-Week Rotation Pattern"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Current Week:"}),e.jsx("select",{value:T,onChange:r=>{const l=parseInt(r.target.value);S(l),R(is[l-1].days)},className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 text-xs text-white",children:is.map((r,l)=>e.jsxs("option",{value:r.week,children:["Week ",r.week," ",r.week===5?"(Deload)":""]},l))})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-600",children:[e.jsx("th",{className:"text-left py-2 px-3 text-gray-300 font-medium",children:"Week"}),e.jsx("th",{className:"text-left py-2 px-3 text-gray-300 font-medium",children:"Monday"}),e.jsx("th",{className:"text-left py-2 px-3 text-gray-300 font-medium",children:"Wednesday"}),e.jsx("th",{className:"text-left py-2 px-3 text-gray-300 font-medium",children:"Friday"})]})}),e.jsx("tbody",{children:is.map((r,l)=>e.jsxs("tr",{className:`border-b border-gray-700/50 ${r.week===T?"bg-red-900/20 border-red-500/30":""}`,children:[e.jsxs("td",{className:"py-2 px-3",children:[e.jsxs("span",{className:`font-medium ${r.week===T?"text-red-300":"text-gray-200"}`,children:["Week ",r.week]}),r.week===5&&e.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"(Deload)"})]}),r.days.map((p,m)=>e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`text-sm ${r.week===T?"text-white font-medium":"text-gray-300"}`,children:p})},m))]},r.week))})]})}),e.jsxs("div",{className:"mt-3 text-xs text-gray-400",children:[e.jsx("p",{children:"â€¢ Each lift follows the same 5/3/1 progression across the 4-week cycle"}),e.jsx("p",{children:"â€¢ All four lifts progress together, rotating through 3 training days"}),e.jsx("p",{children:"â€¢ Week 5 is optional deload for all lifts"})]})]})]}),g==="2day"&&e.jsx("div",{className:"bg-gray-800/40 border border-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx($e,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"2-Day Split Configuration"}),e.jsx("p",{className:"text-xs mt-1",children:"Coming soon - Upper/Lower split options"})]})}),!xe.scheduleOk&&g==="4day"&&e.jsxs("div",{className:"flex items-start space-x-2 text-yellow-300 text-xs bg-yellow-900/20 border border-yellow-700/40 rounded p-3",children:[e.jsx(Ke,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"Schedule invalid: ensure unique lifts and correct number of slots."})]})]})]})]}),e.jsxs("section",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6 space-y-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"B) Warm-up Scheme"}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:r=>y(r.target.checked)}),e.jsx("span",{className:"text-gray-300",children:"Include warm-ups"})]}),s&&e.jsx("div",{className:"flex space-x-2",children:(()=>{const r=D.replace(/\s/g,""),l=O.replace(/\s/g,""),p=r==="40,50,60"&&l==="5,5,3",m=r==="40,55"&&l==="5,3";return e.jsxs(e.Fragment,{children:[e.jsx(le,{on:p,className:"text-xs",title:"Classic Wendler 3-set ramp",onClick:()=>{te("40,50,60"),f("5,5,3")},children:"Standard (3 sets)"}),e.jsx(le,{on:m,className:"text-xs",title:"Fast ramp: first two sets only",onClick:()=>{te("40,55"),f("5,3")},children:"Minimal (2 quick)"})]})})()})]}),s?e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/40 rounded p-3 text-[11px] text-blue-100 flex space-x-2 leading-snug",children:[e.jsx($e,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"Choose a ramp that wakes tissues without stealing performance. Standard (40/50/60 x 5/5/3) gives more gradual practice; Minimal (40/55 x 5/3) is a faster primer for timeâ€‘crunched sessions. Adjust percentages or reps if bar speed feels off."})]}):e.jsxs("div",{className:"bg-gray-800/40 border border-gray-700/60 rounded p-3 text-[11px] text-gray-400 flex space-x-2 leading-snug",children:[e.jsx($e,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"Warm-ups skipped. Make sure you still perform a few empty bar / light acclimation sets before main work."})]}),s&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase text-gray-400 mb-1",children:"Percentages"}),e.jsx("input",{value:D,onChange:r=>te(r.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-2 text-sm text-white focus:border-red-500",placeholder:"40,50,60"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase text-gray-400 mb-1",children:"Reps"}),e.jsx("input",{value:O,onChange:r=>f(r.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-2 text-sm text-white focus:border-red-500",placeholder:"5,5,3"})]})]}),s&&!xe.warmupsOk&&e.jsxs("div",{className:"text-xs text-yellow-300 flex items-start space-x-2 bg-yellow-900/20 border border-yellow-700/40 rounded p-3",children:[e.jsx(Ke,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"Warm-up arrays must be equal length numeric lists (1-5 entries)."})]})]}),e.jsxs("section",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"C) Programming Approach"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Choose your periodization strategy and training philosophy."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[{id:"traditional",title:"Traditional 5/3/1",label:"CLASSIC APPROACH",desc:"Standard progression with PR sets and simple wave loading (5/3/1 pattern)",best:"All lifters seeking balanced strength progress with auto-regulation",features:["AMRAP final sets","Wave loading percentages","Time-tested progression"]},{id:"leaderAnchor",title:"Leader/Anchor Cycles",label:"ADVANCED PERIODIZATION",desc:"Alternating volume (Leader) and intensity (Anchor) phases in strategic patterns",best:"Intermediate to advanced lifters seeking optimized long-term gains",features:["Volume accumulation (Leader)","Intensity realization (Anchor)","7th Week Protocol","Strategic deloads"]},{id:"fivespro",title:"5's PRO Progression",label:"CONTROLLED INTENSITY",desc:"All main work sets performed for clean sets of 5 reps without AMRAP tests",best:"Recovery-focused lifters or those prioritizing supplemental volume",features:["No PR sets/AMRAPs","Technique refinement","Better bar speed","Lower CNS fatigue"]},{id:"competition",title:"Competition Prep",label:"PERFORMANCE PEAKING",desc:"Modified loading with 3/5/1 order and optional Joker sets for peak preparation",best:"Powerlifters and those preparing for max testing",features:["3/5/1 wave loading","Joker sets","Heavier top sets","Peaking protocols"]}].map(r=>{const l=Y===r.id;return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>ge(r.id),type:"button",className:`w-full text-left bg-gray-800/50 border rounded p-3 hover:bg-gray-800 transition ${l?"border-red-500 ring-2 ring-red-600":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] tracking-wide font-semibold text-red-300",children:r.label}),e.jsx("div",{className:"text-sm font-semibold text-white leading-tight mt-0.5",children:r.title})]}),l&&e.jsx(Be,{className:"w-4 h-4 text-green-400"})]}),e.jsx("div",{className:"text-xs text-gray-300 mt-2 leading-snug",children:r.desc}),e.jsxs("div",{className:"mt-2 text-[10px] text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Best for:"})," ",r.best]}),e.jsx("ul",{className:"mt-2 text-[10px] text-gray-400 list-disc ml-4 space-y-0.5",children:r.features.map(p=>e.jsx("li",{children:p},p))})]})},r.id)})}),Y==="traditional"&&e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded p-4 space-y-3",children:[e.jsx("div",{className:"text-white font-medium",children:"Traditional 5/3/1 Configuration"}),e.jsx("p",{className:"text-xs text-gray-400",children:"The classic 5/3/1 approach with standard wave loading and PR sets."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-medium text-gray-200 mb-1",children:"Wave Loading Pattern"}),e.jsxs("table",{className:"w-full text-[10px] text-gray-300 mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400",children:[e.jsx("th",{className:"text-left py-1",children:"Week"}),e.jsx("th",{className:"text-center py-1",children:"Sets/Reps"}),e.jsx("th",{className:"text-center py-1",children:"Percentages"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 1"}),e.jsx("td",{className:"py-1 text-center",children:"5/5/5+"}),e.jsx("td",{className:"py-1 text-center",children:"65/75/85%"})]}),e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 2"}),e.jsx("td",{className:"py-1 text-center",children:"3/3/3+"}),e.jsx("td",{className:"py-1 text-center",children:"70/80/90%"})]}),e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 3"}),e.jsx("td",{className:"py-1 text-center",children:"5/3/1+"}),e.jsx("td",{className:"py-1 text-center",children:"75/85/95%"})]}),e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 4 (Optional)"}),e.jsx("td",{className:"py-1 text-center",children:"Deload"}),e.jsx("td",{className:"py-1 text-center",children:"40/50/60%"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-medium text-gray-200 mb-1",children:"PR Set Guidelines"}),e.jsx("p",{className:"text-[10px] text-gray-400 mb-2",children:'The "+" sets are AMRAP (As Many Reps As Possible) sets for progressive overload.'}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-[11px]",children:[e.jsx("input",{type:"checkbox",checked:((Ie=t==null?void 0:t.advanced)==null?void 0:Ie.strictPrSets)||!1,onChange:r=>{i({type:"SET_ADVANCED",advanced:{...(t==null?void 0:t.advanced)||{},strictPrSets:r.target.checked}})}}),e.jsx("span",{className:"text-gray-300",children:"Use strict form on PR sets"})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/40 rounded p-2 text-[10px] text-blue-100 leading-snug",children:[e.jsx("p",{children:"For PR sets:"}),e.jsxs("ul",{className:"list-disc pl-4 mt-1 space-y-1",children:[e.jsx("li",{children:"Stop when form breaks down"}),e.jsx("li",{children:"Leave 1-2 reps in reserve on Week 1-2"}),e.jsx("li",{children:"Push harder on Week 3 PR sets"}),e.jsx("li",{children:"Record your rep PRs for progress tracking"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-[11px] font-medium text-gray-200",children:"Deload Configuration"}),e.jsx("div",{className:"flex gap-3",children:[{id:"every4th",label:"Every 4th Week"},{id:"every7th",label:"7th Week Protocol"},{id:"asNeeded",label:"As Needed"}].map(r=>{var l;return e.jsx("button",{type:"button",onClick:()=>i({type:"SET_ADVANCED",advanced:{...(t==null?void 0:t.advanced)||{},deloadStrategy:r.id}}),className:`px-2 py-1 rounded border text-[10px] ${(((l=t==null?void 0:t.advanced)==null?void 0:l.deloadStrategy)||"every7th")===r.id?"border-red-500 ring-1 ring-red-600 text-white":"border-gray-600 text-gray-300 hover:bg-gray-700/40"}`,children:r.label},r.id)})}),e.jsx("p",{className:"text-[10px] text-gray-500 italic",children:"7th Week Protocol (recommended) places deloads after two full 3-week cycles for better progress."})]})]}),Y==="leaderAnchor"&&e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded p-4 space-y-3",children:[e.jsx("div",{className:"text-white font-medium",children:"Leader/Anchor Pattern"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Select how many leader cycles before each anchor cycle."}),e.jsxs("div",{className:"bg-gray-900/50 border border-gray-700/70 rounded p-3 space-y-2 mb-2",children:[e.jsxs("div",{className:"text-[11px] font-medium text-gray-200 flex items-center gap-2",children:[e.jsx("span",{children:"Auto-Selection Guidance"}),e.jsx("button",{type:"button",onClick:()=>{var p,m;const r=((p=t==null?void 0:t.userProfile)==null?void 0:p.experience)||"intermediate",l=((m=t==null?void 0:t.userProfile)==null?void 0:m.recovery)||"average";ce(r==="advanced"||l==="excellent"?"3+1":"2+1")},className:"px-2 py-0.5 bg-blue-600/50 hover:bg-blue-600/70 rounded text-[10px] text-blue-100",children:"Auto-Select"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-[10px]",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-gray-300",children:"Training Experience:"}),e.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(r=>{var l;return e.jsx("button",{type:"button",onClick:()=>{i({type:"SET_USER_PROFILE",profile:{...(t==null?void 0:t.userProfile)||{},experience:r}}),r==="advanced"?ce("3+1"):r==="beginner"&&ce("2+1")},className:`px-2 py-0.5 rounded border ${(((l=t==null?void 0:t.userProfile)==null?void 0:l.experience)||"intermediate")===r?"border-red-500 bg-red-900/20 text-white":"border-gray-600 text-gray-300 hover:bg-gray-800"}`,children:r.charAt(0).toUpperCase()+r.slice(1)},r)})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-gray-300",children:"Recovery Capacity:"}),e.jsx("div",{className:"flex gap-1",children:["limited","average","excellent"].map(r=>{var l;return e.jsx("button",{type:"button",onClick:()=>{i({type:"SET_USER_PROFILE",profile:{...(t==null?void 0:t.userProfile)||{},recovery:r}}),r==="excellent"?ce("3+1"):r==="limited"&&ce("2+1")},className:`px-2 py-0.5 rounded border ${(((l=t==null?void 0:t.userProfile)==null?void 0:l.recovery)||"average")===r?"border-red-500 bg-red-900/20 text-white":"border-gray-600 text-gray-300 hover:bg-gray-800"}`,children:r.charAt(0).toUpperCase()+r.slice(1)},r)})})]})]}),e.jsx("div",{className:"text-gray-400 text-[10px] italic mt-1",children:"More advanced lifters with better recovery typically benefit from longer accumulation phases (3+1)."})]}),e.jsx("div",{className:"flex gap-2",children:["2+1","3+1"].map(r=>e.jsx("button",{type:"button",onClick:()=>ce(r),className:`px-3 py-1 rounded border text-sm ${Re===r?"border-red-500 ring-2 ring-red-600 text-white":"border-gray-600 text-gray-200 hover:bg-gray-700/40"}`,children:r},r))}),e.jsxs("div",{className:"text-[11px] text-gray-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Pattern Explanation:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-300",children:"2+1:"})," Two leader cycles (volume focus) followed by one anchor cycle (intensity focus)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-300",children:"3+1:"})," Three leader cycles followed by one anchor cycle (longer accumulation phase)"]})]}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Leaders focus on volume using FSL, BBB, or 5s PRO. Anchors use PR sets with SSL or heavy FSL."})]})]}),Y==="fivespro"&&e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded p-4 space-y-3",children:[e.jsx("div",{className:"text-white font-medium",children:"5's PRO Implementation Notes"}),e.jsx("p",{className:"text-xs text-gray-400",children:"All main work sets performed as sets of 5 reps regardless of week."}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/40 rounded p-3 text-[11px] text-blue-100 flex space-x-2 leading-snug",children:[e.jsx($e,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"5's PRO removes AMRAP sets for consistent performance. This allows higher supplemental volume while reducing CNS fatigue. PR tracking shifts to supplemental weight increases rather than rep PRs."})]}),e.jsxs("table",{className:"w-full text-xs text-gray-300 mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400",children:[e.jsx("th",{className:"text-left py-1",children:"Week"}),e.jsx("th",{className:"text-center py-1",children:"Standard Pattern"}),e.jsx("th",{className:"text-center py-1",children:"5's PRO Pattern"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 1"}),e.jsx("td",{className:"py-1 text-center",children:"5/5/5+ (AMRAP)"}),e.jsx("td",{className:"py-1 text-center",children:"5/5/5 (No AMRAP)"})]}),e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 2"}),e.jsx("td",{className:"py-1 text-center",children:"3/3/3+ (AMRAP)"}),e.jsx("td",{className:"py-1 text-center",children:"5/5/5 (No AMRAP)"})]}),e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 3"}),e.jsx("td",{className:"py-1 text-center",children:"5/3/1+ (AMRAP)"}),e.jsx("td",{className:"py-1 text-center",children:"5/5/5 (No AMRAP)"})]})]})]}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Use 5's PRO with higher supplemental volume (FSL 5Ã—5, BBB, etc.) or during Leader phases of the Leader/Anchor system."})]}),Y==="competition"&&e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded p-4 space-y-3",children:[e.jsx("div",{className:"text-white font-medium",children:"Competition Prep Configuration"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Modified loading pattern to optimize for max testing and competition."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-medium text-gray-200 mb-1",children:"3/5/1 Wave Loading"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Reverses week 1 and 2 to put heavier work closer to competition."}),e.jsxs("table",{className:"w-full text-[10px] text-gray-300 mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400",children:[e.jsx("th",{className:"text-left py-1",children:"Week"}),e.jsx("th",{className:"text-center py-1",children:"Sets/Reps"}),e.jsx("th",{className:"text-center py-1",children:"Percentages"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 1"}),e.jsx("td",{className:"py-1 text-center",children:"3/3/3+"}),e.jsx("td",{className:"py-1 text-center",children:"70/80/90%"})]}),e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 2"}),e.jsx("td",{className:"py-1 text-center",children:"5/5/5+"}),e.jsx("td",{className:"py-1 text-center",children:"65/75/85%"})]}),e.jsxs("tr",{className:"border-t border-gray-700/60",children:[e.jsx("td",{className:"py-1",children:"Week 3"}),e.jsx("td",{className:"py-1 text-center",children:"5/3/1+"}),e.jsx("td",{className:"py-1 text-center",children:"75/85/95%"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-medium text-gray-200 mb-1",children:"Joker Sets"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Optional heavier singles, doubles or triples after your main work on good days."}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-[11px]",children:[e.jsx("input",{type:"checkbox",checked:((Ue=t==null?void 0:t.advanced)==null?void 0:Ue.useJokerSets)||!1,onChange:r=>{i({type:"SET_ADVANCED",advanced:{...(t==null?void 0:t.advanced)||{},useJokerSets:r.target.checked}})}}),e.jsx("span",{className:"text-gray-300",children:"Enable Joker Sets"})]})}),e.jsx("div",{className:"text-[10px] text-gray-400 col-span-2",children:"Only attempt Joker sets when feeling strong and bar speed is excellent. Start with +5% increments above your top set."})]})]})]})]})]}),e.jsxs("section",{className:"bg-blue-900/20 border border-blue-700/40 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-5 h-5 text-blue-300 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-100",children:"Programming Approach Integration"}),e.jsxs("p",{className:"text-xs text-blue-200/70 mt-1",children:["Your selected approach (",Y==="traditional"?"Traditional 5/3/1":Y==="leaderAnchor"?"Leader/Anchor Cycles":Y==="fivespro"?"5's PRO":"Competition Prep",") influences the recommended settings below."]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-[11px]",children:(()=>{const r={traditional:{supplemental:"BBB or FSL",assistance:"Standard (balanced)",conditioning:"Standard to Extensive"},leaderAnchor:{supplemental:"Leader: BBB/SSL, Anchor: FSL/Jokers",assistance:"Minimal in Leaders, Standard in Anchors",conditioning:"Based on current phase"},fivespro:{supplemental:"Higher volume (BBB or BBS)",assistance:"Standard or Minimal",conditioning:"Standard (recovery-focused)"},competition:{supplemental:"SSL or Limited FSL",assistance:"Minimal (technique focus)",conditioning:"Reduced (performance focus)"}},l=r[Y]||r.basic||{supplemental:"N/A",assistance:"N/A",conditioning:"N/A"};return r[Y]||console.warn("STEP3 DEBUG missing recommendation for programmingApproach=",Y,"available keys=",Object.keys(r)),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-950/50 border border-blue-800/40 rounded p-2",children:[e.jsx("div",{className:"font-medium text-blue-300",children:"Supplemental Work"}),e.jsx("p",{className:"mt-1 text-blue-100/80",children:(l==null?void 0:l.supplemental)||"â€”"})]}),e.jsxs("div",{className:"bg-blue-950/50 border border-blue-800/40 rounded p-2",children:[e.jsx("div",{className:"font-medium text-blue-300",children:"Assistance Approach"}),e.jsx("p",{className:"mt-1 text-blue-100/80",children:(l==null?void 0:l.assistance)||"â€”"})]}),e.jsxs("div",{className:"bg-blue-950/50 border border-blue-800/40 rounded p-2",children:[e.jsx("div",{className:"font-medium text-blue-300",children:"Conditioning Focus"}),e.jsx("p",{className:"mt-1 text-blue-100/80",children:(l==null?void 0:l.conditioning)||"â€”"})]})]})})()}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>{let r="none",l="minimal",p="standard";switch(Y){case"traditional":r="fsl",l="standard",p="standard";break;case"leaderAnchor":r="bbb",l="minimal",p="extensive";break;case"fivespro":r="bbb",l="minimal",p="standard";break;case"competition":r="ssl",l="minimal",p="minimal";break}Le(r),Ce(l),i({type:"SET_CONDITIONING",conditioning:{...(t==null?void 0:t.conditioning)||{},approach:p}})},className:"px-3 py-1 bg-blue-600/60 hover:bg-blue-600/80 rounded text-xs text-white flex items-center gap-2",children:e.jsx("span",{children:"Auto-Configure Program"})})})]}),e.jsxs("section",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"D) Supplemental"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Choose your supplemental lifting strategy to build volume and drive hypertrophy."}),e.jsx("p",{className:"text-[11px] text-gray-500",children:"Supplemental work is the foundation of your training volume and a key driver of long-term progress."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-2",children:[e.jsxs("button",{type:"button",onClick:()=>{var r;return i({type:"SET_SUPPLEMENTAL_DETAILS",details:{...((r=t==null?void 0:t.supplemental)==null?void 0:r.details)||{},category:"standard"}})},className:`flex justify-between items-center p-3 rounded border ${(((Ee=(fe=t==null?void 0:t.supplemental)==null?void 0:fe.details)==null?void 0:Ee.category)||"standard")==="standard"?"bg-red-900/20 border-red-500 ring-1 ring-red-500":"bg-gray-900/50 border-gray-700 hover:bg-gray-800"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:"Standard Templates"}),e.jsx("div",{className:"text-[11px] text-gray-300 mt-0.5",children:"FSL, SSL, BBB, BBS"})]}),(((Ze=(Fe=t==null?void 0:t.supplemental)==null?void 0:Fe.details)==null?void 0:Ze.category)||"standard")==="standard"&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-full p-1",children:e.jsx(Be,{className:"w-4 h-4 text-red-400"})})]}),e.jsxs("button",{type:"button",onClick:()=>{var r;return i({type:"SET_SUPPLEMENTAL_DETAILS",details:{...((r=t==null?void 0:t.supplemental)==null?void 0:r.details)||{},category:"specialized"}})},className:`flex justify-between items-center p-3 rounded border ${(((es=(Qe=t==null?void 0:t.supplemental)==null?void 0:Qe.details)==null?void 0:es.category)||"standard")==="specialized"?"bg-red-900/20 border-red-500 ring-1 ring-red-500":"bg-gray-900/50 border-gray-700 hover:bg-gray-800"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:"Specialized Templates"}),e.jsx("div",{className:"text-[11px] text-gray-300 mt-0.5",children:"Widowmakers, SSL+BBS, Pyramids"})]}),(((Ge=(Ne=t==null?void 0:t.supplemental)==null?void 0:Ne.details)==null?void 0:Ge.category)||"standard")==="specialized"&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-full p-1",children:e.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]}),(((ve=(E=t==null?void 0:t.supplemental)==null?void 0:E.details)==null?void 0:ve.category)||"standard")==="standard"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[{id:"none",title:"None",desc:"Main work only without supplemental volume",best:"Very advanced lifters or special situations",note:"Focus on main lift performance"},{id:"fsl",title:"FSL (First Set Last)",desc:"Additional sets using first week percentage",best:"Balanced approach for most lifters",note:"Typically 5Ã—5 @ Week 1 percentage"},{id:"ssl",title:"SSL (Second Set Last)",desc:"Additional sets using second week percentage",best:"More advanced lifters seeking higher intensity",note:"Typically 5Ã—5 @ Week 2 percentage"},{id:"bbb",title:"BBB (Boring But Big)",desc:"5Ã—10 volume approach for hypertrophy",best:"Size-focused lifters, volume accumulation",note:"Typically 5Ã—10 @ 50-60% TM (book range)"},{id:"bbs",title:"BBS (Boring But Strong)",desc:"Higher intensity BBB variant",best:"Advanced lifters seeking both strength/size",note:"Typically 5Ã—5 @ 65-75% TM"}].map(r=>{const l=G===r.id;return e.jsxs("button",{type:"button",onClick:()=>Le(r.id),className:`text-left bg-gray-900/50 border rounded p-3 hover:bg-gray-900 transition ${l?"border-red-500 ring-2 ring-red-600":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:r.title}),l&&e.jsx(Be,{className:"w-4 h-4 text-green-400"})]}),e.jsx("div",{className:"text-[11px] text-gray-300 mt-1",children:r.desc}),e.jsxs("div",{className:"mt-2 text-[10px] text-gray-400",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:"Best for: "}),r.best]}),e.jsx("div",{className:"mt-1 text-[10px] text-gray-500 italic",children:r.note})]},r.id)})}),(((Je=(Ve=t==null?void 0:t.supplemental)==null?void 0:Ve.details)==null?void 0:Je.category)||"standard")==="specialized"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[{id:"widowmaker",title:"Widowmakers",desc:"1Ã—20 reps at FSL weight (65%)",best:"High threshold training, mental toughness",note:"Used primarily with squat, can be applied to other lifts",recovery:"High",volume:"Moderate-High",icon:"Skull"},{id:"pyramid",title:"Descending Pyramids",desc:"Sets of 5/3/1 after main work at same percentages",best:"Pure strength focus with moderate volume",note:"Efficient strength-building with minimal assistance needed",recovery:"Moderate",volume:"Moderate",icon:"Triangle"},{id:"sslbbs",title:"SSL + BBS Hybrid",desc:"5Ã—5 starting at SSL% (70-80% TM)",best:"Advanced lifters needing strength and size",note:"Combines intensity of SSL with volume approach of BBS",recovery:"Very High",volume:"High",icon:"Zap"},{id:"joker",title:"Joker Sets + FSL",desc:"Heavy singles above TM, then FSL volume",best:"Testing strength while still building volume",note:"Only on days feeling exceptional, not programmed every week",recovery:"High",volume:"Moderate",icon:"Joker"},{id:"fslpr",title:"FSL PR Sets",desc:"AMRAP sets using FSL weight",best:"Building work capacity and volume tolerance",note:"Leave 1-2 reps in tank on all but final set",recovery:"Moderate-High",volume:"High",icon:"Timer"},{id:"bbbbeef",title:"BBB Beefcake",desc:"5Ã—10 @ FSL% (65-75% TM)",best:"Size focus, high work capacity",note:"High volume, high intensity BBB variation",recovery:"Very High",volume:"Very High",icon:"Beef"}].map(r=>{var p;const l=((p=t==null?void 0:t.supplemental)==null?void 0:p.type)===r.id;return e.jsxs("button",{type:"button",onClick:()=>i({type:"SET_SUPPLEMENTAL",supplemental:{type:r.id}}),className:`flex flex-col bg-gray-900/50 border rounded p-3 hover:bg-gray-900 transition ${l?"border-red-500 ring-2 ring-red-600":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:r.title}),l&&e.jsx(Be,{className:"w-4 h-4 text-green-400"})]}),e.jsx("div",{className:"text-[11px] text-gray-300 mt-1",children:r.desc}),e.jsxs("div",{className:"mt-2 text-[10px] text-gray-400",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:"Best for: "}),r.best]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 mt-2 text-[10px]",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Recovery: "}),e.jsx("span",{className:`${r.recovery.includes("High")?"text-red-300":r.recovery.includes("Moderate")?"text-yellow-300":"text-green-300"}`,children:r.recovery})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Volume: "}),e.jsx("span",{className:`${r.volume.includes("High")?"text-blue-300":r.volume.includes("Moderate")?"text-teal-300":"text-gray-300"}`,children:r.volume})]})]}),e.jsx("div",{className:"mt-1 text-[10px] text-gray-500 italic",children:r.note})]},r.id)})}),e.jsxs("div",{className:"mt-5",children:[G==="bbb"&&e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-white font-medium",children:"BBB Configuration"}),e.jsxs("div",{className:"ml-auto flex items-center bg-blue-500/20 border border-blue-500/30 rounded-full px-2 py-0.5 text-[10px] text-blue-300",children:[e.jsx(Ts,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:"High Volume"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-200",children:"Supplemental Pairing"}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Choose how BBB is paired after your main lift."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("label",{className:"inline-flex items-center justify-between gap-2 text-xs bg-gray-900/50 border border-gray-700 rounded p-3 cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Same Lift"}),e.jsx("div",{className:"text-[11px] text-gray-400 mt-1",children:"BBB sets use same movement as main work"}),e.jsx("div",{className:"mt-2 text-[10px] text-blue-300",children:"Recommended for pure hypertrophy focus"})]}),e.jsx("input",{type:"radio",name:"suppPairing",value:"same",checked:De==="same",onChange:()=>de("same")})]}),e.jsxs("label",{className:"inline-flex items-center justify-between gap-2 text-xs bg-gray-900/50 border border-gray-700 rounded p-3 cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Opposite Lift"}),e.jsx("div",{className:"text-[11px] text-gray-400 mt-1",children:"Press + Bench, Squat + Deadlift pairings"}),e.jsx("div",{className:"mt-2 text-[10px] text-green-300",children:"Better recovery between workouts"})]}),e.jsx("input",{type:"radio",name:"suppPairing",value:"opposite",checked:De==="opposite",onChange:()=>de("opposite")})]})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs uppercase text-gray-400",children:"Percentage of TM"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"range",min:"50",max:"60",step:"5",value:ke,onChange:r=>Oe(Number(r.target.value)),className:"w-full"}),e.jsx("input",{type:"number",value:ke,min:50,max:60,onChange:r=>Oe(Number(r.target.value)),className:"w-16 bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm text-white focus:border-red-500"}),e.jsx("span",{className:"text-gray-400",children:"%"})]}),!xe.supplementalOk&&e.jsx("p",{className:"text-xs text-yellow-300",children:"Range 50-60% (book)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs uppercase text-gray-400",children:"Sets Ã— Reps"}),e.jsx("div",{className:"text-gray-300 text-sm font-mono flex items-center h-full",children:"5 Ã— 10"})]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/40 rounded p-3 text-[11px] text-blue-100 flex space-x-2 leading-snug",children:[e.jsx($e,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"BBB is a hypertrophy-focused protocol. Book range is 50-60% TM. Start at 50% and progress slowly to 60% only when recovery is excellent."})]})]}),G==="fsl"&&e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded p-4 space-y-4",children:[e.jsx("div",{className:"text-white font-medium",children:"FSL Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Format"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:[{id:"5x5",label:"5Ã—5",desc:"Standard format"},{id:"5x8",label:"5Ã—8",desc:"Higher volume"},{id:"3x8",label:"3Ã—8",desc:"Moderate volume"}].map(r=>{var l,p;return e.jsx("button",{type:"button",onClick:()=>{var m;return i({type:"SET_SUPPLEMENTAL_DETAILS",details:{...((m=t==null?void 0:t.supplemental)==null?void 0:m.details)||{},fslFormat:r.id}})},className:`px-3 py-1 rounded border text-sm ${(((p=(l=t==null?void 0:t.supplemental)==null?void 0:l.details)==null?void 0:p.fslFormat)||"5x5")===r.id?"border-red-500 ring-2 ring-red-600 text-white":"border-gray-600 text-gray-200 hover:bg-gray-700/40"}`,children:r.label},r.id)})}),e.jsx("p",{className:"text-[11px] text-gray-400 mt-2",children:"First Set Last uses your first working set percentage for additional volume."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Percentage Info"}),e.jsxs("div",{className:"text-[11px] text-gray-300 mt-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Week 1:"}),e.jsx("span",{className:"font-mono",children:"65% TM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Week 2:"}),e.jsx("span",{className:"font-mono",children:"70% TM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Week 3:"}),e.jsx("span",{className:"font-mono",children:"75% TM"})]})]})]})]})]}),G==="ssl"&&e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded p-4 space-y-4",children:[e.jsx("div",{className:"text-white font-medium",children:"SSL Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Format"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:[{id:"5x5",label:"5Ã—5",desc:"Standard format"},{id:"5x3",label:"5Ã—3",desc:"Lower volume"},{id:"3x5",label:"3Ã—5",desc:"Moderate volume"}].map(r=>{var l,p;return e.jsx("button",{type:"button",onClick:()=>{var m;return i({type:"SET_SUPPLEMENTAL_DETAILS",details:{...((m=t==null?void 0:t.supplemental)==null?void 0:m.details)||{},sslFormat:r.id}})},className:`px-3 py-1 rounded border text-sm ${(((p=(l=t==null?void 0:t.supplemental)==null?void 0:l.details)==null?void 0:p.sslFormat)||"5x5")===r.id?"border-red-500 ring-2 ring-red-600 text-white":"border-gray-600 text-gray-200 hover:bg-gray-700/40"}`,children:r.label},r.id)})}),e.jsx("p",{className:"text-[11px] text-gray-400 mt-2",children:"Second Set Last uses your second working set percentage for increased intensity."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Percentage Info"}),e.jsxs("div",{className:"text-[11px] text-gray-300 mt-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Week 1:"}),e.jsx("span",{className:"font-mono",children:"70% TM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Week 2:"}),e.jsx("span",{className:"font-mono",children:"80% TM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Week 3:"}),e.jsx("span",{className:"font-mono",children:"85% TM"})]})]})]})]})]}),G==="bbs"&&e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded p-4 space-y-4",children:[e.jsx("div",{className:"text-white font-medium",children:"BBS Configuration"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs uppercase text-gray-400",children:"Percentage of TM"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"range",min:"65",max:"75",step:"5",value:((ss=(rs=t==null?void 0:t.supplemental)==null?void 0:rs.details)==null?void 0:ss.bbsPercentage)||65,onChange:r=>{var l;return i({type:"SET_SUPPLEMENTAL_DETAILS",details:{...((l=t==null?void 0:t.supplemental)==null?void 0:l.details)||{},bbsPercentage:Number(r.target.value)}})},className:"w-full"}),e.jsx("input",{type:"number",value:(($=(x=t==null?void 0:t.supplemental)==null?void 0:x.details)==null?void 0:$.bbsPercentage)||65,min:65,max:75,onChange:r=>{var l;return i({type:"SET_SUPPLEMENTAL_DETAILS",details:{...((l=t==null?void 0:t.supplemental)==null?void 0:l.details)||{},bbsPercentage:Number(r.target.value)}})},className:"w-16 bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm text-white focus:border-red-500"}),e.jsx("span",{className:"text-gray-400",children:"%"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs uppercase text-gray-400",children:"Sets Ã— Reps"}),e.jsx("div",{className:"text-gray-300 text-sm font-mono flex items-center h-full",children:"5 Ã— 5"})]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/40 rounded p-3 text-[11px] text-blue-100 flex space-x-2 leading-snug",children:[e.jsx($e,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"Boring But Strong is a higher intensity variant of BBB. The heavier weight (65-75%) with moderate reps (5Ã—5) provides a balance of volume and intensity for strength-focused hypertrophy."})]})]})]})]}),e.jsxs("section",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"F) Equipment & Exercise Options"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Select available equipment to filter assistance exercise recommendations."}),e.jsx("p",{className:"text-[11px] text-gray-500",children:"Equipment selection determines which assistance exercises will be suggested and available for your program."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[{id:"full",title:"Commercial Gym / Full Setup",badge:"All Exercises Available",desc:"Complete equipment access including machines, cables, specialty items",items:[...w]},{id:"home",title:"Home Gym Essentials",badge:"Most Exercises Available",desc:"Basic home setup with key equipment for comprehensive training",items:["bb","plate","bench","db","dip","rings","bw"]},{id:"minimal",title:"Minimal Equipment",badge:"Core + Bodyweight",desc:"Barbellâ€‘centric with bodyweight accessories",items:["bb","plate","bw","dip","rings","bench"]},{id:"bodyweight",title:"Bodyweight Only",badge:"Bodyweight Only",desc:"Calisthenics / core focus",items:["bw","rings","dip","abwheel","box"]}].map(r=>{const l=JSON.stringify([...P].sort())===JSON.stringify([...r.items].sort());return e.jsxs("button",{type:"button",onClick:()=>H([...new Set(r.items)]),className:`text-left bg-gray-900/50 border rounded p-3 hover:bg-gray-900 transition relative ${l?"border-red-500 ring-2 ring-red-600":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-white leading-snug pr-4",children:r.title}),l&&e.jsx("span",{className:"text-green-400 text-[11px] font-medium",children:"Active"})]}),e.jsx("div",{className:"text-[11px] text-gray-300 mt-2 leading-snug",children:r.desc}),e.jsx("div",{className:"mt-3 inline-block text-[10px] px-2 py-0.5 rounded border border-red-500 text-red-300 tracking-wide",children:r.badge})]},r.id)})}),e.jsx("div",{className:"space-y-5",children:[{id:"essential",label:"Essential Equipment",note:"Core barbell requirements",items:[["bb","Barbell"],["plate","Plates"],["bench","Bench"],["bar","Straight Bar (Alt)"]]},{id:"assistance",label:"Assistance Equipment",note:"Expands accessory selection",items:[["db","Dumbbells"],["machine","Machines"],["cable","Cable Machine"],["band","Resistance Bands"]]},{id:"specialty",label:"Specialty Equipment",note:"Variation / overload tools",items:[["kb","Kettlebell"],["landmine","Landmine"],["box","Plyo Box"],["abwheel","Ab Wheel"]]},{id:"bodyweight",label:"Bodyweight Accessories",note:"Calisthenics & core tools",items:[["bw","Bodyweight"],["dip","Dip Station"],["rings","Rings"]]}].map(r=>e.jsxs("div",{className:"bg-gray-900/40 border border-gray-700 rounded p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium text-sm",children:r.label}),e.jsx("div",{className:"text-[11px] text-gray-400",children:r.note})]}),r.id==="essential"&&!["bb","plate","bench"].every(l=>P.includes(l))&&e.jsx("span",{className:"text-[10px] text-red-400",children:"Incomplete"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:r.items.map(([l,p])=>{const m=P.includes(l);return e.jsxs("button",{type:"button",onClick:()=>K(l),className:`px-2 py-1 rounded border text-[11px] flex items-center justify-between gap-2 ${m?"border-red-500 bg-red-600/10 text-white":"border-gray-600 bg-gray-900/40 text-gray-300 hover:bg-gray-800/60"}`,children:[e.jsx("span",{className:"truncate",children:p}),e.jsx("span",{className:`w-3 h-3 rounded-full ${m?"bg-green-500":"bg-gray-600"}`})]},l)})})]},r.id))}),e.jsx("div",{children:(()=>{const r={pull:4,push:6,core:6,single:4,posterior:3},l={bb:{push:2,posterior:3,single:1},plate:{push:1,posterior:1},bench:{push:4},db:{pull:4,push:3,single:3},cable:{pull:4,push:3,core:2},machine:{push:3,pull:2},band:{pull:2,push:1,core:1},kb:{posterior:2,core:2,single:1},bw:{core:2,pull:1,push:1},dip:{push:3},rings:{pull:3,push:2,core:1},abwheel:{core:4},box:{single:2,posterior:1},landmine:{posterior:2,push:1,single:1}},p={...r};return P.forEach(m=>{l[m]&&Object.entries(l[m]).forEach(([W,J])=>{p[W]+=J})}),e.jsxs("div",{className:"bg-gray-900/40 border border-gray-700 rounded p-4 space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-white font-medium text-sm",children:"Available Exercise Categories"})}),e.jsxs("p",{className:"text-[11px] text-gray-400",children:["With current selection: ",p.pull," pull, ",p.push," push, ",p.core," core (",p.single," singleâ€‘leg, ",p.posterior," posterior)."]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-[11px]",children:Object.entries(p).map(([m,W])=>e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded p-2 flex flex-col gap-1",children:[e.jsx("div",{className:"text-gray-300 font-medium capitalize",children:m}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-700 rounded overflow-hidden",children:e.jsx("div",{style:{width:Math.min(100,W/(r[m]+20)*100)+"%"},className:"h-full bg-red-600/70"})}),e.jsx("div",{className:"text-[10px] text-gray-400 w-6 text-right",children:W})]})]},m))}),e.jsx("div",{className:"text-[10px] text-gray-500 italic",children:"Illustrative counts only; final assistance builder will refine further."})]})})()})]}),e.jsxs("section",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6 space-y-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"E) Assistance"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Choose your assistance approach and configure exercises."}),e.jsx("p",{className:"text-[11px] text-gray-500",children:"Assistance work addresses weaknesses and adds volume without interfering with main lifts."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[{id:"minimal",title:"Minimal",subtitle:"Low Volume",desc:"Basic push/pull/core (25â€“50 total reps). Keep work small while TMs settle.",best:"New cycle starts | limited recovery",features:["Fast sessions","Low fatigue","Foundational balance"]},{id:"standard",title:"Standard",subtitle:"Balanced",desc:"Balanced assistance across movement patterns (50â€“75 reps per category).",best:"General strength & physique",features:["Push / Pull / Core","Single-Leg optional","Posterior chain focus"]},{id:"custom",title:"Custom",subtitle:"Full Control",desc:"Full control over assistance exercise selection and volume.",best:"Advanced needs / targeting",features:["Manual curation","Fine volume tuning","Specialization friendly"]},{id:"template",title:"Template-Based",subtitle:"Wendler Sets",desc:"Use proven assistance patterns from Wendler templates.",best:"Hypertrophy blocks / structured variety",features:["Preset volumes","Synergistic pairing","Reliable progression"]}].map(r=>{const l=Pe===r.id;return e.jsxs("button",{type:"button",onClick:()=>Ce(r.id),className:`text-left bg-gray-800/50 border rounded p-3 hover:bg-gray-800 transition relative ${l?"border-red-500 ring-2 ring-red-600":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] tracking-wide font-semibold text-red-300",children:r.subtitle.toUpperCase()}),e.jsx("div",{className:"text-sm font-semibold text-white leading-tight mt-0.5",children:r.title})]}),l&&e.jsx(Be,{className:"w-4 h-4 text-green-400"})]}),e.jsx("div",{className:"text-xs text-gray-300 mt-2 leading-snug",children:r.desc}),e.jsxs("div",{className:"mt-2 text-[10px] text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Best for:"})," ",r.best]}),e.jsx("ul",{className:"mt-2 text-[10px] text-gray-400 list-disc ml-4 space-y-0.5",children:r.features.map(p=>e.jsx("li",{children:p},p))})]},r.id)})}),Pe==="custom"&&e.jsx("div",{className:"md:col-span-2 space-y-4",children:A.map((r,l)=>{const p=k[r]||[];return e.jsxs("div",{className:"bg-gray-800/40 border border-gray-700 rounded p-3 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-white",children:[r," Day Assistance"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{on:!1,onClick:()=>v(U===r?null:r),className:"text-xs px-2 py-1",children:U===r?"Close Picker":"Browse Catalog"}),e.jsx(le,{on:!1,onClick:()=>z(l),className:"text-xs px-2 py-1",children:"Add Blank"})]})]}),U===r&&e.jsx("div",{className:"mb-3",children:e.jsx(hs,{equipment:P,onPick:m=>{L(W=>{const J=W[r]?[...W[r]]:[];return J.length>=2?W:(J.push({name:m.name,sets:m.sets||5,reps:m.reps||10,block:m.block}),{...W,[r]:J})})},onClose:()=>v(null),keepOpen:!0})}),e.jsxs("div",{className:"space-y-3",children:[p.map((m,W)=>((Number(m.sets)||0)*(Number(m.reps)||0),e.jsxs("div",{className:"border border-gray-700/60 rounded p-2 space-y-2 bg-gray-800/30",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-[10px] uppercase text-gray-500 mb-1",children:"Name"}),e.jsx("input",{value:m.name,onChange:J=>Q(r,W,{name:J.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1.5 text-xs text-white focus:border-red-500",placeholder:"Movement"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-[10px] uppercase text-gray-500 mb-1",children:"Sets"}),e.jsx("input",{type:"number",value:m.sets,min:1,max:10,onChange:J=>Q(r,W,{sets:Number(J.target.value)}),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1.5 text-xs text-white focus:border-red-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-[10px] uppercase text-gray-500 mb-1",children:"Reps"}),e.jsx("input",{type:"number",value:m.reps,min:1,max:30,onChange:J=>Q(r,W,{reps:Number(J.target.value)}),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1.5 text-xs text-white focus:border-red-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-[10px] uppercase text-gray-500 mb-1",children:"Block"}),e.jsx("input",{value:m.block||"",onChange:J=>Q(r,W,{block:J.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1.5 text-xs text-white focus:border-red-500",placeholder:"(opt)"})]}),e.jsxs("div",{className:"col-span-2 flex items-center gap-1",children:[e.jsxs("div",{className:"text-[10px] px-1.5 py-1 rounded bg-gray-700/50 border border-gray-600 text-gray-300 font-mono",title:"Sets Ã— Reps volume",children:[m.sets||0,"Ã—",m.reps||0]}),e.jsx(le,{on:!1,onClick:()=>V({lift:r,rowIdx:W}),className:"text-xs px-2 py-1",children:"Swap"}),e.jsx(le,{on:!1,onClick:()=>oe(r,W),className:"text-xs px-2 py-1",children:"âœ•"})]})]}),re&&re.lift===r&&re.rowIdx===W&&e.jsx("div",{className:"mt-1",children:e.jsx(hs,{block:m.block,equipment:P,onPick:J=>{Q(r,W,{name:J.name,id:J.id,block:J.block||m.block});try{const me=Ae=>(typeof Ae=="string"?Number(Ae.split(/[^0-9]/).filter(Boolean)[0]):Ae)||0,Te=(m.sets||0)*(m.reps||0),Se=(J.sets||0)*me(J.reps);Te&&Se&&(Se/Te>1.6||Te/Se>1.6)&&(Q(r,W,{volumeWarn:!0}),setTimeout(()=>Q(r,W,{volumeWarn:!1}),3e3))}catch{}},onClose:()=>V(null),keepOpen:!0})}),m.volumeWarn&&e.jsx("div",{className:"text-[10px] text-amber-300",children:"Volume mismatch vs default suggestion â€“ adjust if needed."})]},W))),p.length===0&&e.jsx("div",{className:"text-xs text-gray-500",children:"No assistance added."}),p.length>0&&(()=>{const m=p.reduce((W,J)=>W+(Number(J.sets)||0)*(Number(J.reps)||0),0);return e.jsxs("div",{className:`mt-1 text-[11px] flex items-center gap-2 ${m>100?"text-amber-300":"text-gray-400"}`,children:[e.jsxs("span",{className:"font-mono px-1.5 py-0.5 rounded bg-gray-700/40 border border-gray-600 text-gray-300",children:["Total: ",m]}),m>100&&e.jsx("span",{className:"text-amber-300",children:"High assistance volume â€“ ensure recovery."})]})})()]})]},r)})}),Pe!=="custom"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-[11px] text-gray-300 bg-gray-800/60 border border-gray-700 rounded p-3 leading-snug",children:[e.jsx("p",{className:"font-semibold text-gray-200 mb-1",children:"Template Assistance Preview"}),e.jsx("p",{className:"text-gray-400",children:"Below is the assistance that will be applied per main lift day using the selected mode."})]}),e.jsx("div",{className:"flex flex-wrap gap-2 text-[10px]",children:pe.map(r=>e.jsx(le,{on:c===r,onClick:()=>b(r),className:"px-2 py-1",children:r},r))}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:A.map(r=>{const p=(bs(Pe==="minimal"?"triumvirate":Pe,r,t)||[]).filter(m=>{const W=(m.equipment||[]).every(me=>P.includes(me)),J=c==="All"||m.block===c;return W&&J});return e.jsxs("div",{className:"bg-gray-800/40 border border-gray-700 rounded p-3",children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-300 mb-2",children:[r," Day"]}),p.length?e.jsx("ul",{className:"space-y-1 text-[11px]",children:p.map(m=>e.jsxs("li",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[9px] px-1 py-0.5 rounded bg-gray-700/40 border border-gray-600 text-gray-400",children:m.block||"â€”"}),e.jsx("span",{className:"text-gray-200",children:m.name}),e.jsxs("span",{className:"text-gray-500",children:[m.sets,"Ã—",m.reps]}),e.jsx("span",{className:"text-[9px] text-gray-500",children:(m.equipment||[]).join(", ")})]}),m.note&&e.jsx("div",{className:"text-[9px] text-gray-500 ml-5 leading-snug",children:m.note})]},m.name))}):e.jsx("div",{className:"text-[11px] text-gray-500",children:"None"})]},r)})})]}),Pe==="custom"&&!xe.assistanceOk&&e.jsxs("div",{className:"text-xs text-yellow-300 flex items-start space-x-2 bg-yellow-900/20 border border-yellow-700/40 rounded p-3",children:[e.jsx(Ke,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"Custom assistance invalid: ensure names & reps/sets within allowed ranges."})]}),Pe==="custom"&&(()=>{const r=A.reduce((p,m)=>{const W=k[m]||[];return p+W.reduce((J,me)=>J+(Number(me.sets)||0)*(Number(me.reps)||0),0)},0);if(!r)return null;const l=r>400;return e.jsxs("div",{className:`mt-3 text-[11px] flex items-center gap-2 ${l?"text-amber-300":"text-gray-400"}`,children:[e.jsxs("span",{className:"font-mono px-1.5 py-0.5 rounded bg-gray-700/40 border border-gray-600 text-gray-300",children:["Weekly assistance reps: ",r]}),l&&e.jsx("span",{className:"text-amber-300",children:"High cumulative assistance â€“ monitor recovery."})]})})(),Pe!=="custom"&&e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/40 rounded p-3 text-[11px] text-blue-100 flex space-x-2 leading-snug",children:[e.jsx($e,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"Assistance philosophy: Find push, pull, and single-leg/core exercises that address individual weaknesses without overtaxing recovery. Fewer but higher quality assistance exercises yield better results than exhaustive lists."})]})]}),e.jsxs("section",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"G) Conditioning"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Configure your conditioning approach to complement strength work."}),e.jsx("p",{className:"text-[11px] text-gray-500",children:"Well-designed conditioning enhances recovery, improves work capacity, and supports long-term progress."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Conditioning Approach"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{id:"minimal",title:"Minimal",desc:"Basic recovery work and light activity",examples:["Easy walking","Light rowing","Mobility circuits"],note:"For strength focus or limited time"},{id:"standard",title:"Standard",desc:"Balanced conditioning for overall fitness",examples:["Hill sprints","Prowler pushes","Circuit training"],note:"Recommended for most lifters"},{id:"extensive",title:"Extensive",desc:"Higher volume for improved work capacity",examples:["HIIT sessions","Sport practice","Dedicated cardio"],note:"For athletes or conditioning focus"}].map(r=>{var p;const l=(((p=t==null?void 0:t.conditioning)==null?void 0:p.approach)||"standard")===r.id;return e.jsxs("button",{type:"button",onClick:()=>i({type:"SET_CONDITIONING",conditioning:{...(t==null?void 0:t.conditioning)||{},approach:r.id}}),className:`text-left bg-gray-900/50 border rounded p-3 hover:bg-gray-900 transition ${l?"border-red-500 ring-2 ring-red-600":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:r.title}),l&&e.jsx(Be,{className:"w-4 h-4 text-green-400"})]}),e.jsx("div",{className:"text-[11px] text-gray-300 mt-1",children:r.desc}),e.jsxs("div",{className:"mt-2 text-[10px] text-gray-400",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:"Examples: "}),r.examples.join(", ")]}),e.jsx("div",{className:"mt-1 text-[10px] text-gray-500 italic",children:r.note})]},r.id)})})]}),e.jsx("div",{className:"bg-red-900/20 border border-red-800/30 rounded-md p-3 text-xs",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Zs,{className:"w-4 h-4 text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-red-300 font-medium",children:"Conditioning Auto-Limiter"}),e.jsx("p",{className:"text-gray-300 mt-1",children:"Your conditioning options are automatically adjusted based on your supplemental work selection:"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-2 text-[10px] text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-red-300 font-medium",children:"BBB/BBS:"})," Reduces high-intensity conditioning options"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-300 font-medium",children:"SSL/FSL:"})," Balanced conditioning approach"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-300 font-medium",children:"Minimal:"})," Allows more intense conditioning"]})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"overrideAutoLimiter",checked:((se=t==null?void 0:t.conditioning)==null?void 0:se.overrideAutoLimiter)||!1,onChange:()=>{var r;return i({type:"SET_CONDITIONING",conditioning:{...(t==null?void 0:t.conditioning)||{},overrideAutoLimiter:!((r=t==null?void 0:t.conditioning)!=null&&r.overrideAutoLimiter)}})},className:"form-checkbox rounded text-red-500"}),e.jsx("label",{htmlFor:"overrideAutoLimiter",className:"text-red-300",children:"Override auto-limiting (not recommended)"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200",children:"Select Conditioning Protocols"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[{id:"prowler",title:"Prowler/Sled Work",desc:"Push, pull or drag for power and conditioning",intensity:"Moderate-High",recovery:"Medium",placement:"After main training or separate day",limited:["bbb","bbs"],template:"10 x 40yd pushes w/ 60-90s rest (load: 90-135 lbs)"},{id:"sprints",title:"Hill Sprints",desc:"Short, intense uphill sprints",intensity:"High",recovery:"High",placement:"Separate from leg training days",limited:["bbb","bbs","ssl"],template:"6-10 x 30yd hill sprints w/ walk back recovery"},{id:"circuits",title:"Complexes/Circuits",desc:"Multi-exercise flows with minimal rest",intensity:"Moderate",recovery:"Medium",placement:"After training or separate day",limited:["bbb"],template:"3-5 rounds of 5 exercises, 30-60s work/15-30s rest"},{id:"walking",title:"Recovery Walking",desc:"Brisk walking for active recovery",intensity:"Low",recovery:"Low",placement:"Daily activity, including rest days",limited:[],template:"30-60 min brisk walk at conversational pace"},{id:"jumps",title:"Jumps & Throws",desc:"Explosive power development",intensity:"Medium-High",recovery:"Medium",placement:"Before main training (as activation)",limited:[],template:"3-5 sets of 3-5 reps of explosive movements"},{id:"bikes",title:"Bike/Rower/Stair",desc:"Steady-state or interval machine cardio",intensity:"Variable",recovery:"Low-Medium",placement:"Flexible, can be done frequently",limited:[],template:"20-40 min steady state or 10-20 min intervals"}].map(r=>{var me,Te;const l=((me=t==null?void 0:t.conditioning)==null?void 0:me.protocols)||["walking"],p=l.includes(r.id);let m="fsl";t&&typeof t=="object"&&t.supplemental&&typeof t.supplemental=="object"&&"type"in t.supplemental&&(m=t.supplemental.type);const J=r.limited.includes(m)&&!((Te=t==null?void 0:t.conditioning)!=null&&Te.overrideAutoLimiter)&&!p;return e.jsxs("div",{className:`bg-gray-900/50 border rounded p-3 ${p?"border-red-500 ring-1 ring-red-600":J?"border-gray-700 opacity-50":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:r.title}),e.jsx("label",{className:"inline-flex items-center",children:e.jsx("input",{type:"checkbox",checked:p,disabled:J,onChange:()=>{if(J)return;const Se=p?l.filter(Ae=>Ae!==r.id):[...l,r.id];i({type:"SET_CONDITIONING",conditioning:{...(t==null?void 0:t.conditioning)||{},protocols:Se}})},className:"form-checkbox rounded"})})]}),e.jsx("div",{className:"text-[11px] text-gray-300 mt-1",children:r.desc}),J&&e.jsxs("div",{className:"mt-1 text-[10px] text-red-400 flex items-center space-x-1",children:[e.jsx(LockIcon,{className:"w-3 h-3"}),e.jsxs("span",{children:["Limited with ",m.toUpperCase()," supplemental"]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 text-[10px]",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Intensity: "}),e.jsx("span",{className:"text-gray-300",children:r.intensity})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Recovery: "}),e.jsx("span",{className:"text-gray-300",children:r.recovery})]}),e.jsxs("div",{className:"col-span-3 text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Timing: "}),e.jsx("span",{children:r.placement})]})]}),p&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700 text-[10px] text-gray-300",children:[e.jsx("span",{className:"text-gray-400 font-medium",children:"Template: "}),r.template]})]},r.id)})})]}),e.jsxs("div",{className:"bg-gray-900/40 border border-gray-700 rounded p-4 space-y-3",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Integration Guidelines"}),e.jsxs("div",{className:"text-[11px] text-gray-300 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-200",children:"Recommended Frequency:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400 mt-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-300",children:"Hard Conditioning:"})," 2-3x per week (hill sprints, prowler work)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-300",children:"Easy/Recovery:"})," 3-7x per week (walking, light bike/rowing)"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-200",children:"Workout Placement:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400 mt-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-300",children:"High Intensity:"})," Separate days from heavy lower body training"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-300",children:"Recovery Work:"})," Can be done daily, including after workouts"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-gray-300",children:"Explosive Work:"})," Early in workout or on separate days"]})]})]})]})]})]}),e.jsxs("section",{className:"bg-gray-800/40 border border-gray-700 rounded-lg p-4 text-xs text-gray-300 flex flex-wrap gap-4",children:[e.jsxs("div",{className:`flex items-center space-x-2 ${xe.scheduleOk?"text-green-400":"text-yellow-300"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Schedule"})]}),e.jsxs("div",{className:`flex items-center space-x-2 ${!s||xe.warmupsOk?"text-green-400":"text-yellow-300"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Warm-ups"})]}),e.jsxs("div",{className:`flex items-center space-x-2 ${xe.supplementalOk?"text-green-400":"text-yellow-300"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Supplemental"})]}),e.jsxs("div",{className:`flex items-center space-x-2 ${xe.assistanceOk?"text-green-400":"text-yellow-300"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Assistance"})]}),e.jsxs("div",{className:`flex items-center space-x-2 ${xe.programmingOk?"text-green-400":"text-yellow-300"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Programming"})]}),e.jsxs("div",{className:`flex items-center space-x-2 ${((we=(ie=t==null?void 0:t.conditioning)==null?void 0:ie.protocols)==null?void 0:we.length)>0?"text-green-400":"text-yellow-300"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Conditioning"})]})]})]})}function _t({item:a,onChange:n,onSwap:t,onDelete:i}){const d=N=>n({...a,sets:N.target.value}),o=N=>n({...a,reps:N.target.value});return e.jsxs("div",{className:"flex items-center gap-2 py-1",children:[e.jsx("span",{className:"text-xs shrink-0 rounded px-1.5 py-0.5 bg-gray-700/30 border border-gray-600 text-gray-300 font-mono min-w-[1.5rem] text-center",children:a.block??"â€”"}),e.jsx("span",{className:"flex-1 truncate text-[11px] text-gray-200",children:a.name}),e.jsx("input",{className:"w-14 border border-gray-600 bg-gray-800 rounded px-2 py-1 text-xs text-gray-100",value:a.sets,onChange:d,"aria-label":"sets"}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Ã—"}),e.jsx("input",{className:"w-14 border border-gray-600 bg-gray-800 rounded px-2 py-1 text-xs text-gray-100",value:a.reps,onChange:o,"aria-label":"reps"}),e.jsx("button",{className:"border border-indigo-600/60 hover:border-indigo-400 rounded px-2 py-1 text-[10px] text-indigo-300",onClick:t,type:"button",children:"Swap"}),e.jsx("button",{className:"border border-red-600/60 hover:border-red-400 rounded px-2 py-1 text-[10px] text-red-300",onClick:i,type:"button",children:"Delete"})]})}const Ys={LISS30:{id:"LISS30",type:"LISS",minutes:30,intensity:"Zone2"},LISS45:{id:"LISS45",type:"LISS",minutes:45,intensity:"Zone2"},HIIT10x1:{id:"HIIT10x1",type:"HIIT",work:"1:00",rest:"1:00",rounds:10},Tempo20:{id:"Tempo20",type:"Tempo",minutes:20}};function Ft(a,n){return n!=null&&n.cardioMode&&Ys[n.cardioMode]?n.cardioMode:a>=4?"LISS30":"LISS45"}const $t={Squat:"squat",Bench:"bench",Deadlift:"deadlift",Press:"press",Overhead:"press"},Ht={squat:"Squat",bench:"Bench",deadlift:"Deadlift",press:"Press"};function Vt(a){const n={...a};if(a.flowMode==="template"&&a.templateKey&&a.templateAppliedConfig){const t=a.templateAppliedConfig;t.schedule&&(n.schedule={...n.schedule,...t.schedule}),t.supplemental&&(n.supplemental={...n.supplemental,...t.supplemental}),t.assistance&&(n.assistance={...n.assistance,...t.assistance}),t.loadingOption&&(n.loadingOption=t.loadingOption)}return n}function qs({title:a,rows:n,units:t}){return!n||!n.length?null:e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm md:text-base font-semibold mb-2 tracking-wide text-white",children:a}),e.jsx("div",{className:"overflow-x-auto rounded border border-gray-700",children:e.jsxs("table",{className:"min-w-[420px] w-full text-xs md:text-sm",children:[e.jsx("thead",{className:"bg-gray-800 text-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-1.5 px-3 font-medium",children:"% TM"}),e.jsx("th",{className:"text-left py-1.5 px-3 font-medium",children:"Reps"}),e.jsx("th",{className:"text-left py-1.5 px-3 font-medium",children:"Load"})]})}),e.jsx("tbody",{children:n.map((i,d)=>e.jsxs("tr",{className:`border-t border-gray-700 ${d%2?"bg-gray-900/80":"bg-gray-900"} text-gray-300`,children:[e.jsxs("td",{className:"py-1 px-3 font-mono text-gray-200",children:[i.pct,"%"]}),e.jsxs("td",{className:"py-1 px-3 font-mono",children:[i.reps,i.amrap?"+":""]}),e.jsxs("td",{className:"py-1 px-3 font-mono text-gray-100",children:[i.weight,t]})]},d))})]})})]})}function Ut(){try{return Vs()}catch{return()=>{}}}function zt({onReadyChange:a}){var ee,I,ne,je,qe,_e,Ie,Ue,fe,Ee,Fe,Ze,Qe,es,Ne,Ge,E,ve,Ve,Je,rs,ss;Ut();const{state:n,dispatch:t}=xs(),[i,d]=u.useState(!1),[o,N]=u.useState(!1),[j,h]=u.useState(!1),[g,B]=u.useState(null),[A,R]=u.useState(!1),[s,y]=u.useState(0),[D,te]=u.useState(null),[O,f]=u.useState(!1),[T,S]=u.useState(!1),[q,Z]=u.useState([]),[C,F]=u.useState([]),_=u.useMemo(()=>Vt(n),[n]),ae=_.schedule||{},Y=ae.frequency||"4day",ge=Y,ce=(ae.order||ae.days||["Press","Deadlift","Bench","Squat"]).map(x=>{const $=typeof x=="string"?x.toLowerCase():x;return $==="press"?"Press":$==="deadlift"?"Deadlift":$==="bench"?"Bench":$==="squat"?"Squat":x}),G=ae.includeWarmups!==!1,Le=ae.warmupScheme||{percentages:[40,50,60],reps:[5,5,3]},De={squat:((I=(ee=_.lifts)==null?void 0:ee.squat)==null?void 0:I.tm)||0,bench:((je=(ne=_.lifts)==null?void 0:ne.bench)==null?void 0:je.tm)||0,deadlift:((_e=(qe=_.lifts)==null?void 0:qe.deadlift)==null?void 0:_e.tm)||0,press:((Ue=(Ie=_.lifts)==null?void 0:Ie.press)==null?void 0:Ue.tm)||0},de=_.supplemental||{strategy:"none"},ke=_.assistance||{mode:"minimal"},Oe=n.assistMode||"template",Pe=n.assistCustom||{},Ce=u.useMemo(()=>{var ie,we;const x=[],$=[],se=_.trainingMax||{};return ce.forEach(r=>{(!se[r.toLowerCase()]||se[r.toLowerCase()]<=0)&&x.push(`Training max for ${r} is required`)}),(we=(ie=_.schedule)==null?void 0:ie.order)!=null&&we.length||x.push("Training schedule not configured"),de.strategy==="bbb"&&!de.percentage&&$.push("BBB percentage not set - defaulting to 50%"),ke.mode==="custom"&&Oe==="template"&&$.push("Assistance set to custom but using template mode"),{isValid:x.length===0,hasWarnings:$.length>0,errors:x,warnings:$}},[_,ce,de,ke,Oe]);u.useEffect(()=>{Ce.errors.length===0&&!i?Z([]):Z(Ce.errors),F(Ce.warnings)},[Ce,i]);const He=typeof _.rounding=="string"?_.rounding:((fe=_.rounding)==null?void 0:fe.mode)||"nearest",k=typeof _.rounding=="object"?_.rounding.increment||5:_.units==="kg"?2.5:5,L=_.units==="kg"?"kg":"lbs",U=_.loadingOption||((Ee=_.loading)==null?void 0:Ee.option)||1,v=_.conditioning||{sessionsPerWeek:3,hiitPerWeek:2,modalities:{hiit:["Prowler Pushes","Hill Sprints"],liss:["Walking"]},note:"Target 3â€“4 conditioning sessions (hill sprints / prowler). Keep after lifting or on off days."},re=u.useMemo(()=>Hs(n).map(x=>({day:x.day,mode:x.mode,modality:x.modality,notes:x.notes,prescription:x.prescription})),[n]);u.useEffect(()=>{var x,$,se;try{const ie=(x=n==null?void 0:n.schedule)==null?void 0:x.order;if(!Array.isArray(ie)||!ie.length)return;const we=ie.map(l=>l&&l.charAt(0).toUpperCase()+l.slice(1));if(JSON.stringify(we)!==JSON.stringify(ce)){if(typeof window<"u"&&(($=window==null?void 0:window.localStorage)==null?void 0:$.getItem("debug.531.template"))==="off")return;console.info("[531:TEMPLATE_SYNC]","step4.orderMismatch",{scheduleOrder:we,uiOrder:ce})}else{if(typeof window<"u"&&((se=window==null?void 0:window.localStorage)==null?void 0:se.getItem("debug.531.template"))==="off")return;console.info("[531:TEMPLATE_SYNC]","step4.orderAligned",{order:we})}}catch(ie){console.warn("[531:TEMPLATE_SYNC]","step4.orderCheckError",ie.message)}},[(Fe=n==null?void 0:n.schedule)==null?void 0:Fe.order,ce]);const V=u.useMemo(()=>{const x=[];Object.values(De).every(se=>se&&se>0)||x.push("All four training maxes must be established.");const $=ge==="4day"?4:ge==="3day"?3:2;if(!Array.isArray(ce)||ce.length!==$)x.push("Schedule order length must match selected frequency.");else{const se=["Press","Deadlift","Bench","Squat"];new Set(ce).size!==ce.length&&x.push("Schedule days must be unique lifts."),ce.every(we=>se.includes(we))||x.push("Schedule contains invalid lift identifiers.")}if(G){const se=(Le==null?void 0:Le.percentages)||[],ie=(Le==null?void 0:Le.reps)||[];Array.isArray(se)&&Array.isArray(ie)&&se.length===ie.length&&se.length>0||x.push("Warm-up scheme percentages & reps must be equal length.")}return de.strategy==="bbb"&&(de.sets===5&&de.reps===10||x.push("BBB requires 5x10."),de.percentOfTM>=50&&de.percentOfTM<=70||x.push("BBB % of TM must be 50â€“70."),["same","opposite"].includes(de.pairing)||x.push("BBB pairing must be same or opposite.")),{valid:x.length===0,messages:x}},[De,ge,ce,G,Le,de]);u.useEffect(()=>{a&&a(V.valid)},[V,a]),u.useMemo(()=>Us(U),[U]);function pe(x){return $t[x]||x.toLowerCase()}function c(x){const $=pe(x);return De[$]||0}function b(x){return de.pairing==="same"?x:{Press:"Bench",Bench:"Press",Squat:"Deadlift",Deadlift:"Squat"}[x]||x}function w(x){return{Press:"Overhead Press",Bench:"Bench Press",Squat:"Back Squat",Deadlift:"Deadlift"}[x]||x}const P=u.useMemo(()=>{var ie,we;const x=((ie=n==null?void 0:n.advanced)==null?void 0:ie.skipDeload)===!0;return n.templateKey||(we=n.assistance)!=null&&we.templateId||ke.mode,(x?[0,1,2]:[0,1,2,3]).map(r=>{const l=ce.map(p=>{var Ae,us,Xe;const m=c(p),W=Es({includeWarmups:G,warmupScheme:Le,tm:m,roundingIncrement:k,roundingMode:He,units:L}),J=Ms({tm:m,weekIndex:r,option:U,roundingIncrement:k,roundingMode:He,units:L}).sets;let me;if(de.strategy==="bbb"){const Me=b(p),Ye=c(Me),ue=ns(Ye*(de.percentOfTM/100),k,He);me={type:"bbb",exercise:w(Me),targetLift:Me,sets:de.sets,reps:de.reps,weight:ue,units:L,percentOfTM:de.percentOfTM}}let Te=[];if(Oe==="template"){const Me=n.templateKey||n.pack||ke.templateId||ke.mode||"custom";Te=(bs(Me,p,n)||[]).map(ue=>({id:ue.id||ue.name,name:ue.name,sets:ue.sets,reps:ue.reps,block:ue.block,equipment:ue.equipment||[],note:ue.note||null}))}else{const Me=ce.indexOf(p)+1;Te=(Pe[Me]||[]).map(ue=>({id:ue.id||ue.name,name:ue.name,sets:ue.sets,reps:ue.reps,block:ue.block,equipment:ue.equipment||[],note:ue.note||null}))}let Se=null;if(re.length){const Ye=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][H(ce,p,ge)],ue=re.find(Os=>Os.day===Ye);ue&&(Se={type:ue.mode==="hiit"?"HIIT":"LISS",modality:ue.modality,minutes:((Ae=ue.prescription)==null?void 0:Ae.minutes)||((us=ue.prescription)==null?void 0:us.duration)||void 0,intensity:((Xe=ue.prescription)==null?void 0:Xe.intensity)||void 0,notes:ue.notes||void 0})}if(!Se){const Me=Ft(ge==="4day"?4:ge==="3day"?3:2,n||{});Se=Ys[Me]||{type:"LISS",minutes:30}}return{lift:p,warmups:W,main:J,supplemental:me,assistance:Te,conditioning:Se}});return{week:r+1,deload:!x&&r===3,days:l}})},[ce,G,Le,k,He,L,de,ke,U,De,n==null?void 0:n.bodyweight,n.templateKey,ge,(Ze=n==null?void 0:n.advanced)==null?void 0:Ze.skipDeload,re,n]);function H(x,$,se){const ie=x.indexOf($);return se==="4day"||se===4?[0,1,3,4][ie]??ie:se==="3day"||se===3?[0,2,4][ie]??ie:se==="2day"||se===2?[1,4][ie]??ie:ie}const K=(de==null?void 0:de.strategy)==="bbb"&&de.pairing==="same";let ye=((Qe=n.templateSpec)==null?void 0:Qe.name)||n.templateKey||null;if(K){const x=Number(de.percentOfTM);x===50?ye="BBB 50% (Same-Lift Start)":x===60&&(ye="BBB 60% (Same-Lift)")}const he=u.useMemo(()=>{var se,ie,we,r,l,p,m,W;const x=ge==="4day"?4:ge==="3day"?3:2,$=n.templateKey||((se=n.assistance)==null?void 0:se.templateId)||(ke.mode==="jack_shit"?"jack_shit":"triumvirate");return{meta:{schemaVersion:"1.0.0",catalogVersion:mt,createdAt:new Date().toISOString(),templateKey:n.flowMode==="template"?n.templateKey:null,templateName:ye||null,pack:$,assistanceMode:Oe,units:L,loadingOption:U,daysPerWeek:x,split4:x===4?((ie=n.schedule)==null?void 0:ie.split4)||((we=n.advanced)==null?void 0:we.split4)||"A":void 0,equipment:n.equipment||[]},trainingMaxes:De,rounding:typeof n.rounding=="object"?n.rounding:{increment:k,mode:He},schedule:{frequency:x,days:ce,includeWarmups:G,warmupScheme:Le},conditioning:v?{sessionsPerWeek:v.sessionsPerWeek||((r=v.options)==null?void 0:r.frequency),hiitPerWeek:v.hiitPerWeek||((l=v.options)==null?void 0:l.hiitPerWeek),modalities:pt(v.modalities||{hiit:(p=v.options)==null?void 0:p.hiitModalities,liss:(m=v.options)==null?void 0:m.lissModalities}),note:v.note,placement:((W=v.options)==null?void 0:W.placement)||v.placement,sessions:re}:void 0,supplemental:de,assistance:ke,weeks:P}},[Oe,n.pack,n.flowMode,n.templateKey,(es=n.assistance)==null?void 0:es.templateId,(Ne=n.schedule)==null?void 0:Ne.split4,(Ge=n.advanced)==null?void 0:Ge.split4,n.equipment,L,U,De,n.rounding,k,He,ge,ce,G,Le,de,ke,P,ye,v,re]),M=u.useCallback(()=>{try{const x=new Blob([JSON.stringify(he,null,2)],{type:"application/json"}),$=URL.createObjectURL(x),se=document.createElement("a");se.href=$,se.download=`program-531-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL($),te(null)}catch(x){te(x.message||"Download failed")}},[he]),X=u.useCallback(()=>{navigator.clipboard.writeText(JSON.stringify(he,null,2)).then(()=>{f(!0),setTimeout(()=>f(!1),1500)})},[he]),z=u.useCallback(()=>{window.print()},[]),Q=P[s],oe=u.useMemo(()=>Q?Q.days.map(x=>{var Te;const $=Array.isArray(x.main)?x.main.reduce((Se,Ae)=>Se+(Number(Ae.reps)||0),0):0,se=St(x.main||[]);let ie=0,we=0,r=!1;if(x.supplemental&&x.supplemental.type==="bbb"){ie=(Number(x.supplemental.sets)||0)*(Number(x.supplemental.reps)||0),Number(x.supplemental.weight)&&Number(x.supplemental.reps)&&Number(x.supplemental.sets)&&(we=Number(x.supplemental.weight)*Number(x.supplemental.reps)*Number(x.supplemental.sets));const Se=de.percentOfTM||((Te=de.intensity)==null?void 0:Te.value)||0;de.strategy==="bbb"&&Se>50&&(r=!0)}const l=Array.isArray(x.assistance)?x.assistance.reduce((Se,Ae)=>{const us=Number(Ae.sets)||0;let Xe=0;if(typeof Ae.reps=="number")Xe=Ae.reps;else if(typeof Ae.reps=="string")if(/^\d+-\d+/.test(Ae.reps)){const[Me,Ye]=Ae.reps.split("-").map(ue=>Number(ue));Number.isFinite(Me)&&Number.isFinite(Ye)&&(Xe=Math.round((Me+Ye)/2))}else/^\d+/.test(Ae.reps)?Xe=Number(Ae.reps):Xe=12;return Se+us*Xe},0):0,p=$+ie+l,m=se+we,W=Ct(x),J=Object.entries(W).filter(([Se,Ae])=>Ae>100).map(([Se])=>`High ${Se} volume (>100 reps)`),me=[];return J.length&&me.push(...J),r&&me.push("BBB >50% TM"),{mainReps:$,suppReps:ie,assistReps:l,totalReps:p,mainTonnage:se,suppTonnage:we,totalTonnage:m,warnings:me}}):[],[Q,de.percentOfTM,de.strategy]),[be,xe]=u.useState(!1);return u.useEffect(()=>{Oe==="custom"&&xe(!0)},[Oe]),e.jsxs("div",{className:"space-y-8 text-sm md:text-base leading-6 relative",children:[T&&e.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm rounded-lg flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-white text-sm",children:"Processing program..."})]})}),e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Step 4: Review & Export"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Final review of your 4-week 5/3/1 cycle before starting training."}),Ce.isValid?e.jsxs("div",{className:"bg-green-900/20 border border-green-500/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-green-300 text-sm font-medium",children:"Program Ready to Start"})]}),Ce.hasWarnings&&e.jsxs("div",{className:"mt-2 text-xs text-yellow-300",children:[Ce.warnings.length," recommendation(s) below"]})]}):e.jsx("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-red-300 text-sm font-medium",children:[Ce.errors.length," issue(s) preventing start"]}),e.jsx("ul",{className:"mt-1 space-y-1",children:Ce.errors.map((x,$)=>e.jsxs("li",{className:"text-red-200 text-xs",children:["â€¢ ",x]},$))})]})]})}),Ce.hasWarnings&&e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/50 rounded-lg p-3 mt-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-yellow-300 text-sm font-medium",children:"Recommendations"}),e.jsx("ul",{className:"mt-1 space-y-1",children:Ce.warnings.map((x,$)=>e.jsxs("li",{className:"text-yellow-200 text-xs",children:["â€¢ ",x]},$))})]})]})})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Program Overview"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Preview the full 4-week cycle, confirm details, then export or print."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-[10px]",children:[e.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-700/50 border border-gray-600 text-gray-300 tracking-wide",children:[ge==="4day"?4:ge==="3day"?3:2,"-Day"]}),ye&&e.jsxs("span",{className:"px-2 py-1 rounded-full bg-red-600/20 border border-red-500/60 text-red-300 tracking-wide",children:["Template: ",ye]}),ge==="4day"&&(((E=n.schedule)==null?void 0:E.split4)||((ve=n.advanced)==null?void 0:ve.split4))&&e.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-700/50 border border-gray-600 text-gray-300 tracking-wide",children:["Split ",((Ve=n.schedule)==null?void 0:Ve.split4)||((Je=n.advanced)==null?void 0:Je.split4)]}),e.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-700/30 border border-gray-600 text-gray-400 italic",title:"Wendler: 'Lift weights. Condition: run hills, push Prowler. Do this 3â€“4 times a week.'",children:"Condition: hills / prowler 3â€“4x weekly (after lifts or offâ€‘days) â€” keep easy enough to recover."})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(n==null?void 0:n.templateSpec)&&e.jsxs(le,{on:!1,type:"button",onClick:()=>{B(n.templateKey),N(!0)},className:"!rounded-full !px-3 !py-1 text-[11px] flex items-center gap-1.5",children:[e.jsx(Xs,{className:"w-3.5 h-3.5 opacity-80"}),e.jsx("span",{children:ye||n.templateSpec.name}),e.jsx("span",{className:"opacity-60",children:"Info"})]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx(le,{on:j,type:"button",onClick:()=>h(x=>!x),className:"text-[11px] px-3 py-1.5",children:"Change Template"}),Oe==="template"&&e.jsx(le,{on:!1,type:"button",onClick:()=>t({type:"CONVERT_ASSIST_TO_CUSTOM",order:ce}),className:"text-[11px] px-3 py-1.5",children:"Convert to Custom Assistance"})]})]})]}),e.jsx("div",{className:"flex flex-col gap-2 items-start",children:e.jsxs("div",{className:"px-3 py-1 text-[10px] rounded-full bg-gray-700/40 text-gray-300 border border-gray-600 uppercase tracking-wide self-start md:self-auto",children:["Assistance Mode: ",Oe]})})]}),!V.valid&&e.jsxs("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-300 font-medium",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Issues Detected"})]}),e.jsx("ul",{className:"list-disc list-inside text-red-200 text-xs space-y-1",children:V.messages.map((x,$)=>e.jsx("li",{children:x},$))})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"xl:col-span-8 space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:P.map((x,$)=>e.jsxs(le,{on:s===$,onClick:()=>y($),className:"text-xs px-4 py-2",children:["Week ",x.week,x.deload?" (Deload)":""]},x.week))}),Q&&e.jsx("div",{className:"space-y-6",children:Q.days.map((x,$)=>{var we;const se=G?(x.warmups||[]).map(r=>({pct:r.percent,reps:r.reps,weight:r.weight})):[],ie=(x.main||[]).map(r=>({pct:r.percent,reps:r.reps,weight:r.weight,amrap:!!r.amrap}));return e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold text-white",children:["Day ",$+1," â€” ",x.lift]}),((we=x.supplemental)==null?void 0:we.type)==="bbb"&&e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-red-600/20 text-red-300 border border-red-500",children:"BBB"})]}),e.jsx(qs,{title:"WARM-UPS",rows:se,units:L}),e.jsx(qs,{title:"MAIN SETS",rows:ie,units:L}),x.supplemental&&x.supplemental.type==="bbb"&&e.jsxs("div",{className:"text-xs text-red-200 bg-red-900/10 border border-red-700/40 rounded p-3 font-mono",children:["BBB ",x.supplemental.exercise,": ",x.supplemental.sets," Ã— ",x.supplemental.reps," @ ",x.supplemental.weight,L," (",x.supplemental.percentOfTM,"% TM)"]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"font-medium text-xs text-gray-300",children:"Assistance"}),Array.isArray(x.assistance)&&x.assistance.length>0?e.jsx("div",{className:"text-[11px] opacity-80 text-gray-400 space-y-0.5",children:x.assistance.map((r,l)=>e.jsx("div",{children:r.displayName?r.displayName:r.block?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-300 font-semibold",children:[r.block,":"]})," ",r.name," ",r.sets,"Ã—",r.reps]}):e.jsxs(e.Fragment,{children:[r.name," ",r.sets,"Ã—",r.reps]})},l))}):e.jsx("div",{className:"text-[11px] opacity-80 text-gray-500",children:n.templateKey==="jack_shit"?"Main lift only":"None"}),Oe==="custom"&&e.jsx(Yt,{dayIndex:$,displayLift:x.lift,state:n,dispatch:t,templateKey:n.templateKey||n.pack||"triumvirate"})]}),x.conditioning&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"font-medium text-xs text-gray-300",children:"Conditioning"}),e.jsxs("div",{className:"text-[11px] opacity-80 text-gray-400",children:[x.conditioning.type,x.conditioning.minutes?` â€¢ ${x.conditioning.minutes} min`:"",x.conditioning.intensity?` â€¢ ${x.conditioning.intensity}`:""]})]}),oe[$]&&e.jsxs("div",{className:"mt-2 border-t border-gray-700 pt-2 text-[11px] text-gray-400 leading-snug",children:[e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:"Reps:"}),e.jsxs("span",{children:["main ",oe[$].mainReps]}),e.jsxs("span",{children:["supp ",oe[$].suppReps]}),e.jsxs("span",{children:["assist ",oe[$].assistReps]}),e.jsxs("span",{className:"text-gray-300",children:["(total ",oe[$].totalReps,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-1",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:"Tonnage:"}),e.jsxs("span",{children:["main ",oe[$].mainTonnage]}),e.jsxs("span",{children:["supp ",oe[$].suppTonnage]}),e.jsxs("span",{className:"text-gray-300",children:["(total ",oe[$].totalTonnage,")"]}),oe[$].warnings.map((r,l)=>e.jsx("span",{title:r,className:"px-1.5 py-0.5 bg-amber-700/30 border border-amber-500/50 text-amber-200 rounded inline-flex items-center gap-1",children:"âš "},l))]}),e.jsx("div",{className:"mt-1 text-[10px] text-gray-500 italic",children:"Legend: âš  badge appears when a category exceeds ~100 reps (soft guardrail). Aim for roughly 50â€“100 assistance reps per block. BBB recommended 50â€“60% TM (book range)."})]})]},$)})})]}),e.jsxs("div",{className:"xl:col-span-4 space-y-6",children:[Oe==="custom"&&e.jsx(Jt,{order:ce,assistCustom:Pe,dispatch:t,state:n}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-5 space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Summary"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 text-xs",children:Object.entries(De).map(([x,$])=>e.jsxs("div",{className:"bg-gray-800/70 border border-gray-700 rounded p-2 flex flex-col",children:[e.jsx("span",{className:"text-gray-500 uppercase tracking-wide text-[10px]",children:Ht[x]||x}),e.jsxs("span",{className:"font-mono text-gray-200",children:[$||"â€”",L]})]},x))}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("div",{children:["Loading Option: ",U," ",U===1?"(Conservative)":"(Aggressive)"]}),e.jsxs("div",{children:["Schedule: ",ge==="4day"?4:ge==="3day"?3:2," days â€“ ",ce.join(" / ")]}),n.deadliftRepStyle&&e.jsxs("div",{children:["Deadlift Style: ",n.deadliftRepStyle.replace("_"," ")]}),e.jsxs("div",{children:["Units: ",L]}),v&&e.jsxs("div",{className:"pt-1 border-t border-gray-700/50",children:[e.jsx("div",{className:"text-gray-300 font-medium mb-0.5",children:"Conditioning Plan"}),e.jsxs("div",{className:"text-[11px] leading-snug",children:["Sessions Target: ",v.sessionsPerWeek||3,v.sessionsPerWeek<2?" (below guideline â€“ aim for â‰¥2)":"",e.jsx("br",{}),"HIIT: ",v.hiitPerWeek||0," Â· Modalities: ",(((rs=v.modalities)==null?void 0:rs.hiit)||[]).join(", ")||"â€”",e.jsx("br",{}),"LISS: ",Math.max(0,(v.sessionsPerWeek||0)-(v.hiitPerWeek||0))," Â· Modalities: ",(((ss=v.modalities)==null?void 0:ss.liss)||[]).join(", ")||"â€”"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-5 space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Export"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs(le,{on:!1,disabled:!Ce.isValid,onClick:M,className:"flex items-center justify-center gap-2 text-xs",children:[e.jsx(Qs,{className:"w-4 h-4"})," ",e.jsx("span",{children:"Download JSON"})]}),e.jsxs(le,{on:O,disabled:!Ce.isValid,onClick:X,className:"flex items-center justify-center gap-2 text-xs",children:[e.jsx(et,{className:"w-4 h-4"})," ",e.jsx("span",{children:O?"Copied!":"Copy JSON"})]}),e.jsxs(le,{on:!1,disabled:!Ce.isValid,onClick:z,className:"flex items-center justify-center gap-2 text-xs",children:[e.jsx(st,{className:"w-4 h-4"})," ",e.jsx("span",{children:"Print"})]}),e.jsx(le,{on:i,disabled:!Ce.isValid||i,onClick:async()=>{if(Ce.isValid){S(!0);try{await handleStartProgram()}finally{S(!1)}}},className:"flex items-center justify-center gap-2 text-xs !bg-green-600/30 !border-green-500/60 hover:!bg-green-600/40 disabled:!bg-gray-600/30 disabled:!border-gray-500/60","data-testid":"start-program",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Starting..."})]}):Ce.isValid?e.jsx("span",{children:"Start Program"}):e.jsx("span",{children:"Fix Issues Above"})}),D&&e.jsx("div",{className:"text-xs text-red-400",children:D})]}),Ce.isValid&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-400 text-xs",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Ready to start cycle."})]})]})]})]}),(o||j)&&e.jsx(Gt,{open:o||j,onClose:()=>{N(!1),h(!1),B(null),R(!1)},state:n,dispatch:t,currentKey:n.templateKey,pendingKey:g,setPendingKey:B,assistMode:n.assistMode,confirmSwitch:A,setConfirmSwitch:R})]})}function Gt({open:a,onClose:n,state:t,dispatch:i,currentKey:d,pendingKey:o,setPendingKey:N,assistMode:j,confirmSwitch:h,setConfirmSwitch:g}){const[B,A]=u.useState("pick");if(!a)return null;const R=Object.values(gs);function s(y){const D=$s(y,{state:t});if(!D)return;const te=As(y);if(j==="custom"&&!h){N(y),g(!0);return}i({type:"SET_TEMPLATE_KEY",payload:D.key}),i({type:"APPLY_TEMPLATE_CONFIG",payload:D}),te&&(i({type:"SET_TEMPLATE_SPEC",payload:te}),te.assistanceHint&&i({type:"SET_ASSISTANCE_HINT",payload:te.assistanceHint})),i({type:"SET_FLOW_MODE",payload:"template"}),i({type:"SET_ASSIST_MODE",payload:"template"}),i({type:"SET_ASSIST_CUSTOM",payload:null}),g(!1),n()}return e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/70 backdrop-blur-sm overflow-y-auto py-10 px-4",children:e.jsxs("div",{className:"relative w-full max-w-5xl bg-gray-900/95 border border-gray-700 rounded-xl p-6 space-y-6 shadow-2xl",children:[e.jsx(le,{on:!1,onClick:n,className:"absolute top-3 right-3 !px-2 !py-1 text-xs",children:"âœ•"}),e.jsxs("header",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Change Template"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Switching updates assistance & schedule defaults. Training maxes are preserved."})]}),j==="custom"&&e.jsx("span",{className:"px-2 py-1 rounded bg-amber-600/10 border border-amber-500/40 text-amber-300 text-[11px]",children:"Custom Assistance Active"})]}),!h&&e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:R.map(y=>{const D=y.key===d;return e.jsxs("div",{className:`rounded-lg border p-4 cursor-pointer flex flex-col ${D?"border-indigo-500 bg-indigo-600/10":"border-gray-700 bg-gray-800/40 hover:border-gray-500"}`,onClick:()=>{N(y.key),s(y.key)},children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-white leading-snug pr-4",children:y.name}),D&&e.jsx(Be,{className:"w-4 h-4 text-green-400"})]}),e.jsx("p",{className:"text-[11px] text-gray-400 leading-snug flex-1 mb-2",children:y.blurb}),e.jsx("div",{className:"text-[10px] text-indigo-300 uppercase tracking-wide",children:"Select"})]},y.key)})}),h&&j==="custom"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-900/30 border border-amber-700 rounded p-4 text-sm text-amber-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Replace Custom Assistance?"}),e.jsx("p",{className:"text-xs leading-snug",children:"Switching templates will replace your custom assistance with the new template defaults. This cannot be undone."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end",children:[e.jsx(le,{on:!1,className:"text-xs",onClick:()=>{g(!1),N(null)},children:"Keep Custom"}),e.jsx(le,{on:!0,className:"text-xs",onClick:()=>{o&&(g(!1),s(o))},children:"Replace with Template"})]})]})]})})}function Jt({order:a,assistCustom:n,dispatch:t,state:i}){const[d,o]=u.useState(1),N=i.equipment||[],j=i.templateKey||i.pack||"triumvirate";function h(f){return(n==null?void 0:n[f])||[]}function g(f,T){t({type:"SET_ASSIST_CUSTOM",dayId:f,items:T})}function B(f){const T=[...h(f)];T.push({id:"new_"+Date.now(),name:"",sets:3,reps:10,block:void 0}),g(f,T)}function A(f,T){const S=[...h(f)];S.splice(T,1),g(f,S)}function R(f,T){D({day:f,row:T})}function s(f){const T=a[f-1],q=(bs(j,T,i)||[]).map(Z=>({id:Z.id||Z.name,name:Z.name,sets:Z.sets,reps:Z.reps,block:Z.block}));t({type:"RESET_ASSIST_DAY",dayId:f,items:q})}const[y,D]=u.useState(null);function te(f){if(!y)return;const{day:T,row:S}=y,q=[...h(T)];if(!q[S])return;const Z=q[S];q[S]={id:f.id,name:f.name,sets:Z.sets,reps:Z.reps,block:Z.block||f.block};try{const C=ae=>(typeof ae=="string"?Number(ae.split(/[^0-9]/).filter(Boolean)[0]):ae)||0,F=(Z.sets||0)*(C(Z.reps)||0),_=(f.sets||0)*C(f.reps);F&&_&&(_/F>1.6||F/_>1.6)&&(q[S].volumeWarn=!0,setTimeout(()=>{const ae=[...h(T)];ae[S]&&(ae[S]={...ae[S],volumeWarn:!1},g(T,ae))},3e3))}catch{}g(T,q),D(null)}function O(f){const T=h(f);let S=0;const q={};T.forEach(C=>{const F=Number(C.sets)||0;let _=0;if(typeof C.reps=="number")_=C.reps;else if(typeof C.reps=="string")if(/^\d+-\d+/.test(C.reps)){const[ge,Re]=C.reps.split("-").map(ce=>Number(ce));Number.isFinite(ge)&&Number.isFinite(Re)&&(_=Math.round((ge+Re)/2))}else/^\d+/.test(C.reps)?_=Number(C.reps):_=12;const ae=F*_;S+=ae;const Y=C.block||"general";q[Y]=(q[Y]||0)+ae});const Z=Object.values(q).some(C=>C>100);return{total:S,overCat:Z}}return e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wide",children:"Custom Assistance"}),y&&e.jsx("span",{className:"text-[10px] text-indigo-300",children:"Select a movement to swapâ€¦"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:a.map((f,T)=>{const S=T+1,{total:q,overCat:Z}=O(S);return e.jsxs(le,{on:d===S,onClick:()=>o(S),className:"text-[11px] px-3 py-1.5 relative",children:["Day ",S,Z&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-amber-600 text-white rounded-full text-[9px] px-1",title:`High category volume (~${q} reps)`,children:"âš "})]},S)})}),e.jsxs("div",{className:"space-y-3",children:[h(d).map((f,T)=>e.jsxs("div",{className:"bg-gray-900/40 border border-gray-700 rounded p-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-gray-700/40 border border-gray-600 text-gray-300 text-[10px] min-w-[1.2rem] text-center",title:"Block",children:f.block||"â€”"}),e.jsx("input",{value:f.name,onChange:S=>{const q=[...h(d)];q[T]={...q[T],name:S.target.value},g(d,q)},className:"flex-1 bg-gray-800 border border-gray-600 rounded px-2 py-1.5 text-xs text-white focus:border-indigo-500",placeholder:"Movement"}),e.jsx("input",{type:"number",value:f.sets,min:1,max:10,onChange:S=>{const q=[...h(d)];q[T]={...q[T],sets:Number(S.target.value)},g(d,q)},className:"w-14 bg-gray-800 border border-gray-600 rounded px-2 py-1.5 text-xs text-white focus:border-indigo-500"}),e.jsx("input",{value:f.reps,onChange:S=>{const q=[...h(d)];q[T]={...q[T],reps:S.target.value},g(d,q)},className:"w-20 bg-gray-800 border border-gray-600 rounded px-2 py-1.5 text-xs text-white focus:border-indigo-500"}),e.jsx(le,{on:!1,className:"text-[10px] px-2 py-1",onClick:()=>R(d,T),children:"Swap"}),e.jsx(le,{on:!1,className:"text-[10px] px-2 py-1",onClick:()=>A(d,T),children:"âœ•"})]}),f.volumeWarn&&e.jsx("div",{className:"text-[10px] text-amber-300 ml-6",children:"Volume mismatch vs suggested default."}),y&&y.day===d&&y.row===T&&e.jsx("div",{className:"mt-2",children:e.jsx(hs,{block:f.block,equipment:N,onPick:te,onClose:()=>D(null),keepOpen:!0})})]},T)),h(d).length<4&&e.jsx(le,{on:!1,className:"text-xs",onClick:()=>B(d),children:"Add Exercise"}),e.jsx("div",{children:e.jsx(le,{on:!1,className:"text-[10px]",onClick:()=>s(d),children:"Reset to Template"})})]})]})}function Yt({dayIndex:a,displayLift:n,state:t,dispatch:i,templateKey:d}){const o=a+1,N=t.assistCustom&&t.assistCustom[o]||[],[j,h]=u.useState(null);function g(R){i({type:"SET_ASSIST_CUSTOM",dayId:o,items:R})}function B(){const R=bs(d,n,t)||[];g(R.map(s=>({id:s.id||s.name,name:s.name,sets:s.sets,reps:s.reps,block:s.block})))}function A(){h({block:null,index:N.length})}return e.jsxs("div",{className:"mt-2 border border-gray-700 rounded-lg p-3 bg-gray-900/40 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[11px] font-semibold text-gray-300",children:"Custom Assistance"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{on:!1,className:"text-[10px] px-2 py-1",onClick:B,children:"Reset"}),e.jsx(le,{on:!1,className:"text-[10px] px-2 py-1",onClick:A,children:"Add"})]})]}),e.jsxs("div",{className:"space-y-1",children:[N.map((R,s)=>e.jsx(_t,{item:R,onChange:y=>{const D=[...N];D[s]=y,g(D)},onSwap:()=>h({block:R.block||null,index:s}),onDelete:()=>{const y=N.filter((D,te)=>te!==s);g(y)}},R.id||s)),N.length===0&&e.jsx("div",{className:"text-[11px] text-gray-500",children:"No custom items yet."})]}),j&&e.jsx("div",{className:"mt-2",children:e.jsx(hs,{block:j.block,equipment:t.equipment||[],onPick:R=>{const s={id:R.id,name:R.name,sets:R.sets||5,reps:R.reps||10,block:R.block},y=[...N];j.index<y.length?y[j.index]=s:y.push(s),g(y)},onClose:()=>h(null),keepOpen:!0})}),e.jsx("div",{className:"text-[10px] text-gray-500 italic pt-1 border-t border-gray-700",children:"Target 50â€“100 reps per block; BBB at 30â€“50% TM."})]})}function Kt(a,n){return!a||!n||n<=0?0:Math.round(a*(1+n/30))}function Zt(a,n,t,i,d={}){const{experience:o="intermediate",size:N="average",postReset:j=!1}=d,h=["bench","press"].includes(a),g=i==="kg"?h?2.5:5:h?5:10,B=i==="kg"?h?1.25:2.5:h?2.5:5;let A=g,R="Standard progression";if((o==="advanced"||N==="smaller"||j)&&(A=B,R=o==="advanced"?"Advanced lifter - conservative approach":N==="smaller"?"Smaller increments for smaller lifters":"Post-reset - rebuild carefully"),t){const{trend:s,stallRisk:y}=t;y==="high"?(A=0,R="High stall risk - hold current TM"):s==="declining"&&(A=B,R="Declining performance - use conservative increment")}return{recommendedInc:A,reason:R,standardInc:g,conservativeInc:B}}function Xt(a,n){if(!a||a.length<2)return{trend:"unknown",stallRisk:"low",estimatedMax:null};const i=a.slice(-3).map(g=>{var B;return(B=g.amrapWk3)==null?void 0:B[n]}).filter(g=>g!=null);if(i.length<2)return{trend:"unknown",stallRisk:"low",estimatedMax:null};const d=i.slice(-2),o=d[1]>d[0]?"improving":d[1]<d[0]?"declining":"stable",N=i.some(g=>g<1),j=i.length>=3&&i[2]<i[1]&&i[1]<i[0];return{trend:o,stallRisk:N||j?"high":o==="declining"?"medium":"low",performances:i}}function Qt(a,n){if(!n)return null;const t=Math.round(n*.9);return{shouldReset:t<a*.95,currentTM:a,estimatedMax:n,recommendedTM:t,difference:a-t}}function er({onAdvance:a}){const{state:n,dispatch:t}=xs(),[i,d]=u.useState({squat:!0,bench:!0,deadlift:!0,press:!0}),[o,N]=u.useState(!1),[j,h]=u.useState("smart"),[g,B]=u.useState({experience:"intermediate",size:"average",postReset:!1}),[A,R]=u.useState(!1),s=(n==null?void 0:n.lifts)||{},y=(n==null?void 0:n.amrapWk3)||{},D=(n==null?void 0:n.units)||"lbs",te=(n==null?void 0:n.history)||[],O=(n==null?void 0:n.cycle)||1,f=u.useMemo(()=>{const C={};return os.forEach(F=>{var G;const _=((G=s[F])==null?void 0:G.tm)||0,ae=y[F],Y=Xt(te,F);let ge=null;if(ae&&_){const Le=Math.round(_*.95);ge=Kt(Le,ae)}const Re=Zt(F,_,Y,D,g),ce=Qt(_,ge);C[F]={currentTM:_,recentAmrap:ae,estimatedMax:ge,performance:Y,progression:Re,resetInfo:ce,passed:Js(ae,n)}}),C},[s,y,te,D,g,n]),T=u.useMemo(()=>{const C={};return os.forEach(F=>{const _=f[F],{standardInc:ae,conservativeInc:Y,recommendedInc:ge}=_.progression;j==="conservative"?C[F]=Y:j==="standard"?C[F]=ae:C[F]=ge}),C},[f,j]),S=()=>{if(o)return;const C={...n,customIncrements:T};a(i,C),N(!0)},q=C=>{switch(C){case"improving":return e.jsx(lt,{className:"w-4 h-4 text-green-400"});case"declining":return e.jsx(it,{className:"w-4 h-4 text-red-400"});case"stable":return e.jsx(Ts,{className:"w-4 h-4 text-blue-400"});default:return e.jsx($e,{className:"w-4 h-4 text-gray-400"})}},Z=C=>{switch(C){case"high":return"text-red-400";case"medium":return"text-yellow-400";default:return"text-green-400"}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Smart Progression System"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Intelligent TM advancement based on performance analysis and user profile"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Cycle"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:O})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 bg-gray-900/40 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-wide text-gray-400 mb-2",children:"Experience Level"}),e.jsxs("select",{value:g.experience,onChange:C=>B(F=>({...F,experience:C.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm text-white focus:border-red-500",children:[e.jsx("option",{value:"beginner",children:"Beginner (<6 months)"}),e.jsx("option",{value:"intermediate",children:"Intermediate (6m-2y)"}),e.jsx("option",{value:"advanced",children:"Advanced (2y+)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-wide text-gray-400 mb-2",children:"Body Size"}),e.jsxs("select",{value:g.size,onChange:C=>B(F=>({...F,size:C.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-sm text-white focus:border-red-500",children:[e.jsx("option",{value:"smaller",children:"Smaller (<150 lbs)"}),e.jsx("option",{value:"average",children:"Average (150-200 lbs)"}),e.jsx("option",{value:"larger",children:"Larger (>200 lbs)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-wide text-gray-400 mb-2",children:"Status"}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.postReset,onChange:C=>B(F=>({...F,postReset:C.target.checked})),className:"rounded border-gray-600 bg-gray-800 text-red-500 focus:ring-red-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Post-Reset Cycle"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:"Progression Strategy"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{id:"smart",title:"Smart Recommendation",desc:"AI-driven based on your profile and performance",icon:e.jsx(rt,{className:"w-4 h-4"})},{id:"conservative",title:"Conservative",desc:`+${D==="kg"?"1.25/2.5 kg":"2.5/5 lbs"} (half increments)`,icon:e.jsx(at,{className:"w-4 h-4"})},{id:"standard",title:"Standard Wendler",desc:`+${D==="kg"?"2.5/5 kg":"5/10 lbs"} (book default)`,icon:e.jsx(nt,{className:"w-4 h-4"})}].map(C=>e.jsxs("button",{onClick:()=>h(C.id),className:`text-left p-3 rounded-lg border transition-all ${j===C.id?"border-red-500 bg-red-600/10 ring-2 ring-red-600/20":"border-gray-600 bg-gray-900/40 hover:bg-gray-800/60"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[C.icon,e.jsx("span",{className:"font-medium text-white",children:C.title})]}),e.jsx("div",{className:"text-xs text-gray-400",children:C.desc})]},C.id))})]})]}),e.jsxs("div",{className:"bg-gray-800/40 border border-gray-700 rounded-lg p-4",children:[e.jsxs("button",{onClick:()=>R(!A),className:"flex items-center justify-between w-full text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ts,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"font-medium text-white",children:"Performance Analytics"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[A?"Hide":"Show"," Details"]})]}),A&&e.jsx("div",{className:"mt-4 space-y-4",children:os.map(C=>{var _;const F=f[C];return e.jsxs("div",{className:"bg-gray-900/40 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-white capitalize",children:C}),e.jsxs("div",{className:"flex items-center gap-2",children:[q(F.performance.trend),e.jsx("span",{className:"text-sm text-gray-400",children:F.performance.trend})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Current TM"}),e.jsxs("div",{className:"font-mono text-white",children:[F.currentTM," ",D]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Last AMRAP"}),e.jsxs("div",{className:"font-mono text-white",children:[F.recentAmrap||"â€”"," reps"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Est. 1RM"}),e.jsxs("div",{className:"font-mono text-white",children:[F.estimatedMax||"â€”"," ",D]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Stall Risk"}),e.jsx("div",{className:`font-medium ${Z(F.performance.stallRisk)}`,children:F.performance.stallRisk})]})]}),((_=F.resetInfo)==null?void 0:_.shouldReset)&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/20 border border-yellow-700/40 rounded flex items-start gap-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-yellow-300 font-medium",children:"Reset Recommended"}),e.jsxs("div",{className:"text-gray-400",children:["Use 90% of estimated max: ",F.resetInfo.recommendedTM," ",D]})]})]})]},C)})})]}),e.jsxs("div",{className:"bg-gray-800/60 border border-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Training Max Progression"}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:os.map(C=>{const F=f[C],_=T[C],ae=F.currentTM+(i[C]?_:0);return e.jsxs("label",{className:`flex flex-col rounded-lg border p-4 bg-gray-900/60 cursor-pointer transition-all ${i[C]?"border-red-500/50 ring-2 ring-red-600/20":"border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-semibold text-white capitalize",children:C}),e.jsx("input",{type:"checkbox",checked:i[C],onChange:Y=>d(ge=>({...ge,[C]:Y.target.checked})),className:"rounded border-gray-600 bg-gray-800 text-red-500 focus:ring-red-500"})]}),e.jsxs("div",{className:"space-y-2 text-xs font-mono",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Current:"}),e.jsxs("span",{className:"text-gray-200",children:[F.currentTM," ",D]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Increment:"}),e.jsxs("span",{className:_>0?"text-green-400":"text-gray-500",children:["+",_," ",D]})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Next:"}),e.jsxs("span",{className:"text-white font-semibold",children:[ae," ",D]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[e.jsxs("div",{className:`flex items-center gap-1 text-xs ${F.passed?"text-green-400":"text-yellow-500"}`,children:[F.passed?e.jsx(Is,{className:"w-3 h-3"}):e.jsx(Ke,{className:"w-3 h-3"}),e.jsx("span",{children:F.passed?"AMRAP passed":"Incomplete data"})]}),j==="smart"&&e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:F.progression.reason})]})]},C)})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{disabled:o,onClick:S,className:`px-6 py-3 rounded-lg border font-medium transition-colors ${o?"border-gray-600 text-gray-500 cursor-not-allowed":"border-green-500 bg-green-600/10 text-green-300 hover:bg-green-600/20"}`,children:o?"Progression Applied":"Apply Smart Progression"}),o&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(Is,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{children:"Ready for next cycle"})]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-400",children:[e.jsxs("div",{children:["Next cycle: ",O+1]}),e.jsxs("div",{children:["Selected lifts: ",Object.values(i).filter(Boolean).length,"/4"]})]})]})]}),e.jsx("div",{className:"bg-gray-800/40 border border-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($e,{className:"w-5 h-5 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-400 leading-relaxed",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{className:"text-gray-300",children:"Smart Progression Logic:"})," Advanced lifters and smaller individuals benefit from conservative increments. Post-reset cycles should progress slowly to rebuild properly."]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{className:"text-gray-300",children:"Stall Detection:"})," Missing Week 3 minimums or declining AMRAP performance indicates potential stalling. Consider holding TMs or resetting when appropriate."]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-300",children:"Reset Guidelines:"})," When estimated 1RM suggests your TM is too high, use 90% of your true max as the new training max for optimal progress."]})]})]})})]})}const ze={BASE_URL:"/powerhouse-tracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNxanp2YnZtcGNxb2hqYXJjeWRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3NzExNzksImV4cCI6MjA2NTM0NzE3OX0.wioeITJitSKZ9HrZ2iRPmC3xHHj-bL4xDYtT1iXws44",VITE_SUPABASE_URL:"https://cqjzvbvmpcqohjarcydg.supabase.co",VITE_USE_METHOD_PACKS:"true"};var ps={};const sr=typeof import.meta<"u"&&ze&&"true",tr=typeof process<"u"&&(ps==null?void 0:ps.REACT_APP_USE_METHOD_PACKS),_s=sr??tr,rr=_s==null?!0:String(_s).toLowerCase()==="true",ms=["squat","bench","deadlift","press"];function Ps(a){if(!a)return!1;const n=(a==null?void 0:a.units)==="lbs"||(a==null?void 0:a.units)==="lb"||(a==null?void 0:a.units)==="kg",t=!!(a!=null&&a.rounding),i=(a==null?void 0:a.tmPct)===.9||(a==null?void 0:a.tmPct)===.85||(a==null?void 0:a.tmPct)===.9||(a==null?void 0:a.tmPct)===.85,d=(a==null?void 0:a.tms)||(()=>{const N={};return ms.forEach(j=>{var h,g;N[j]=(g=(h=a==null?void 0:a.lifts)==null?void 0:h[j])==null?void 0:g.tm}),N})(),o=ms.every(N=>{const j=Number(d[N]);return Number.isFinite(j)&&j>0});return n&&t&&i&&o}function Fs(a){return typeof import.meta<"u"&&(ze==null?void 0:ze.VITE_RELAX_STEP1)==="true"||typeof process<"u"&&(ps==null?void 0:ps.REACT_APP_RELAX_STEP1)==="true"||Ps(a)}const ts=[{id:"fundamentals",title:"Fundamentals",description:"Units, rounding, TM%, 1RM/rep tests"},{id:"template",title:"Template / Custom",description:"Select template or continue custom"},{id:"design",title:"Design (if Custom)",description:"Custom schedule, warm-ups, supplemental, assistance"},{id:"review",title:"Review & Export",description:"Cycle preview, export & print"},{id:"progress",title:"Progress TMs",description:"Week 4 done? Advance training maxes"}];function ar(){var De,de,ke,Oe,Pe,Ce,He,k,L,U,v,re,V,pe;const{stepNumber:a}=ut(),n=Vs(),t=()=>{const c=parseInt(a,10);return c>=1&&c<=5?c-1:(a&&(c<1||c>5||isNaN(c))&&n("/builder/531/v2/step/1",{replace:!0}),0)},[i,d]=u.useState(t),[o,N]=u.useState({fundamentals:!1,design:!1,review:!1,progress:!0}),[j,h]=u.useState(null),[g,B]=u.useState([]),[A,R]=u.useState(0),{state:s,dispatch:y}=xs(),D=u.useRef(null);u.useEffect(()=>{const c=t();c!==i&&d(c);const b=ts[c]||ts[0];return document.title=`${b.title} - 5/3/1 Builder V2`,()=>{document.title="5/3/1 Program Builder"}},[a]);const te=c=>{const b=c+1;n(`/builder/531/v2/step/${b}`,{replace:!0})},O=c=>{var P,H,K,ye,he,M,X,z,Q,oe,be;const b=[],w=[];switch(c){case 0:s!=null&&s.units||w.push("Units (lbs/kg) required"),s!=null&&s.rounding||w.push("Rounding preference required"),s!=null&&s.tmPct||w.push("Training max percentage required");const xe=(s==null?void 0:s.tms)||{};ms.forEach(ee=>{var ne,je;const I=Number(xe[ee]||((je=(ne=s==null?void 0:s.lifts)==null?void 0:ne[ee])==null?void 0:je.tm));(!Number.isFinite(I)||I<=0)&&w.push(`${ee.charAt(0).toUpperCase()+ee.slice(1)} training max required`)});break;case 1:!(s!=null&&s.templateKey)&&!((P=s==null?void 0:s.schedule)!=null&&P.frequency)&&w.push("Select a template or configure custom schedule"),s!=null&&s.templateKey&&!Ps(s)&&w.push("Complete Step 1 before using templates"),s!=null&&s.templateKey?b.push("Template selected - ready to apply configuration"):(H=s==null?void 0:s.schedule)!=null&&H.frequency||b.push("Custom path chosen - configure schedule in next step");break;case 2:s!=null&&s.templateKey?b.push("Template applied - custom design skipped"):((K=s==null?void 0:s.schedule)!=null&&K.frequency?b.push(`${s.schedule.frequency}-day schedule configured`):w.push("Training frequency not set"),!((ye=s==null?void 0:s.supplemental)!=null&&ye.strategy)||((he=s==null?void 0:s.supplemental)==null?void 0:he.strategy)==="none"?b.push("Supplemental work not configured"):b.push(`${s.supplemental.strategy.toUpperCase()} supplemental configured`),!((M=s==null?void 0:s.assistance)!=null&&M.mode)||((X=s==null?void 0:s.assistance)==null?void 0:X.mode)==="minimal"?b.push("Assistance exercises not configured"):b.push(`${s.assistance.mode} assistance configured`));break;case 3:Ps(s)||w.push("Training maxes incomplete"),!((z=s==null?void 0:s.schedule)!=null&&z.frequency)&&!(s!=null&&s.templateKey)&&w.push("No training schedule configured"),s!=null&&s.templateKey?b.push(`Using ${s.templateKey.toUpperCase()} template`):(Q=s==null?void 0:s.schedule)!=null&&Q.frequency&&b.push(`Custom ${s.schedule.frequency}-day program`),(oe=s==null?void 0:s.advanced)!=null&&oe.generatedProgram?b.push("Program generated - ready for export"):b.push("Program ready to generate");break;case 4:(be=s==null?void 0:s.advanced)!=null&&be.generatedProgram||b.push("Generate program first in Review step"),!(s!=null&&s.amrapWk3)||Object.keys(s.amrapWk3).length===0?b.push("Enter Week 3 AMRAP results to calculate new training maxes"):b.push("AMRAP data entered - training maxes ready to advance");break}return{errors:w,warnings:b,hasIssues:w.length>0||b.length>0}},f=c=>{const b=ts[c].title;if(window.confirm(`Reset ${b} to defaults?

This will clear all data for this step and cannot be undone.`)){switch(c){case 0:y({type:"RESET_FUNDAMENTALS"});break;case 1:y({type:"SET_TEMPLATE_KEY",templateKey:null}),y({type:"SET_SCHEDULE",schedule:{}});break;case 2:y({type:"SET_SCHEDULE",schedule:{}}),y({type:"SET_SUPPLEMENTAL",supplemental:{strategy:"none"}}),y({type:"SET_ASSISTANCE",assistance:{mode:"minimal"}}),y({type:"SET_CONDITIONING",conditioning:{}});break;case 3:y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},generatedProgram:null}});break;case 4:y({type:"SET_AMRAP_WK3",payload:{}}),y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},progressData:null}});break}R(P=>P+1)}};u.useEffect(()=>{let c=!1;async function b(){var P,H,K,ye,he,M,X;if(!rr)return;const w=await xt();if(!c&&w){D.current=w,console.info("Loaded 531 BBB pack:",w);try{const ee={daysPerWeek:((P=s==null?void 0:s.schedule)==null?void 0:P.frequency)||(s==null?void 0:s.daysPerWeek)||4,assistanceChoice:(s==null?void 0:s.assistanceTemplate)||(s==null?void 0:s.templateKey)||"BBB",tmMethod:(s==null?void 0:s.tmMethod)||"known_1rm"},I=ht({pack:w,answers:ee});if(I){if(I.scheduleMode){const ne=(H=s==null?void 0:s.schedule)==null?void 0:H.frequency,qe={"4day":4,"3day":3,"2day":2,"1day":1}[I.scheduleMode];if(qe&&qe!==ne&&y({type:"SET_SCHEDULE",schedule:{...(s==null?void 0:s.schedule)||{},frequency:qe}}),I.scheduleMode==="3day"){const Ie=fs({mode:"3day",liftOrder:["press","deadlift","bench","squat"]});y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},schedulePreview:Ie}}),console.info("531 schedule preview (3day):",Ie)}else if(I.scheduleMode==="4day"){const _e=js({state:s,pack:w,split:ls,weekLabel:"3x5"});y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},schedulePreview:_e}}),console.info("531 schedule preview (4day):",_e)}}I.templateId&&I.templateId!==(s==null?void 0:s.templateId)&&y({type:"SET_TEMPLATE",template:I.templateId}),I.tmMethod&&I.tmMethod!==((K=s==null?void 0:s.advanced)==null?void 0:K.tmMethod)&&y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},tmMethod:I.tmMethod}})}}catch(ee){console.warn("Decision adapter error",ee)}const z=gt(w,"bbb50");z&&y({type:"SET_SUPPLEMENTAL",supplemental:{strategy:z.mode==="bbb"?"bbb":z.mode||"none",pairing:z.pairing,percentOfTM:((ye=z.intensity)==null?void 0:ye.value)||60,sets:z.sets,reps:z.reps,_pack:z._provenance}});try{const ee=(s==null?void 0:s.templateKey)||(s==null?void 0:s.template)||"bbb50",I=(w.templates||[]).find(ne=>ne.id===ee);if((he=I==null?void 0:I.effects)!=null&&he.assistance&&(!(s!=null&&s.assistance)||s.assistance.mode==="minimal")){const ne=bt(I.effects.assistance),je=ft(ne);y({type:"SET_ASSISTANCE",assistance:{mode:"template",templateId:ee,items:ne,issues:je.length?je:void 0}})}}catch(ee){console.warn("Assistance mapping error",ee)}const Q=zs(w);if(Array.isArray(Q)){const ee=(M=s==null?void 0:s.schedule)==null?void 0:M.warmupScheme,I={percentages:Q.map(je=>je.value),reps:Q.map(je=>je.reps)};ee&&JSON.stringify(ee)===JSON.stringify(I)||y({type:"SET_SCHEDULE",schedule:{...(s==null?void 0:s.schedule)||{},warmupScheme:I,includeWarmups:!0}})}const be=["3x5","3x3","5/3/1","Deload"][0],xe=Gs(w,be);if(xe!=null&&xe.main&&Array.isArray(xe.main)){const ee=s==null?void 0:s.previewWeekMain,I=xe.main.map(ne=>({value:ne.value,reps:ne.reps,amrap:!!ne.amrap}));(!ee||JSON.stringify(ee)!==JSON.stringify(I))&&(y({type:"SET_LOADING_OPTION",option:(s==null?void 0:s.loadingOption)||((X=s==null?void 0:s.loading)==null?void 0:X.option)||1}),y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},packMainWeek0:I}}))}}}return b(),()=>{c=!0}},[]),u.useEffect(()=>{var K,ye,he;const c=Number((s==null?void 0:s.daysPerWeek)||((K=s==null?void 0:s.schedule)==null?void 0:K.frequency)||4),b=((ye=s==null?void 0:s.advanced)==null?void 0:ye.split4)||((he=s==null?void 0:s.schedule)==null?void 0:he.split4)||"A",w=b==="B"?vs:ls,P=D.current;!(s!=null&&s.templateKey)&&(!(s!=null&&s.assistance)||s.assistance.mode==="minimal")&&y({type:"SET_TEMPLATE_KEY",payload:"triumvirate"});let H;try{c===4?H=js({state:s,pack:P,split:w,weekLabel:"3x5"}):c===3?H=fs({mode:"3day",liftOrder:["press","deadlift","bench","squat"],state:s}):c===2?H=ws({state:s,pack:P,split:w,weekLabel:"3x5"}):c===1&&(H=ks({state:s,pack:P,split:w,weekLabel:"3x5"}))}catch(M){console.warn("schedulePreview rebuild failed",M)}H&&y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},split4:b,schedulePreview:H}})},[s.daysPerWeek,(De=s.advanced)==null?void 0:De.split4,(de=s.schedule)==null?void 0:de.split4,s.week,s.cycle,s.units,s.rounding,s.tmPct,(Oe=(ke=s.lifts)==null?void 0:ke.squat)==null?void 0:Oe.tm,(Ce=(Pe=s.lifts)==null?void 0:Pe.bench)==null?void 0:Ce.tm,(k=(He=s.lifts)==null?void 0:He.deadlift)==null?void 0:k.tm,(U=(L=s.lifts)==null?void 0:L.press)==null?void 0:U.tm,s.equipment,s.templateKey,(v=s.assistance)==null?void 0:v.mode,(re=s.assistance)==null?void 0:re.templateId]);function T(c){return c==="press"?"Press":c[0].toUpperCase()+c.slice(1)}function S(c){return c==="press"?"bench":c==="bench"?"press":c==="squat"?"deadlift":c==="deadlift"?"squat":c}function q(){var Ie,Ue,fe,Ee,Fe,Ze,Qe,es;const{units:c="lbs",rounding:b={increment:5,mode:"nearest"},loadingOption:w=1,schedule:P={},supplemental:H={strategy:"none"},assistance:K={mode:"minimal"},flowMode:ye,templateKey:he,conditioning:M}=s||{},X={squat:((Ue=(Ie=s==null?void 0:s.lifts)==null?void 0:Ie.squat)==null?void 0:Ue.tm)||0,bench:((Ee=(fe=s==null?void 0:s.lifts)==null?void 0:fe.bench)==null?void 0:Ee.tm)||0,deadlift:((Ze=(Fe=s==null?void 0:s.lifts)==null?void 0:Fe.deadlift)==null?void 0:Ze.tm)||0,press:((es=(Qe=s==null?void 0:s.lifts)==null?void 0:Qe.press)==null?void 0:es.tm)||0};if(!["squat","bench","deadlift","press"].every(Ne=>Number(X==null?void 0:X[Ne])>0))return;const oe=Number((P==null?void 0:P.frequency)||4),be=["press","deadlift","bench","squat"],xe=Array.isArray(P==null?void 0:P.days)&&P.days.length===oe?P.days:be.slice(0,oe),ee=Hs(s).map(Ne=>({day:Ne.day,mode:Ne.mode,modality:Ne.modality,prescription:Ne.prescription,notes:Ne.notes}));function I(Ne,Ge){return Ge===4?[0,1,3,4][Ne]??Ne:Ge===3?[0,2,4][Ne]??Ne:Ge===2?[1,4][Ne]??Ne:Ne}const ne=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],je=typeof b=="object"?{increment:b.increment||(c==="kg"?2.5:5),mode:b.mode||"nearest"}:{increment:c==="kg"?2.5:5,mode:b||"nearest"},qe=[];for(let Ne=0;Ne<4;Ne++){const Ge=xe.map((E,ve)=>{var se,ie,we,r;const Ve=Number((X==null?void 0:X[E])||0),Je=Es({includeWarmups:!!(P!=null&&P.includeWarmups),warmupScheme:P==null?void 0:P.warmupScheme,tm:Ve,roundingIncrement:je.increment,roundingMode:je.mode,units:c}),rs=Ms({tm:Ve,weekIndex:Ne,option:w||1,roundingIncrement:je.increment,roundingMode:je.mode,units:c});let ss=null;if((H==null?void 0:H.strategy)==="bbb"){const l=(H==null?void 0:H.pairing)||"same",p=l==="opposite"?S(E):E,m=Number((X==null?void 0:X[p])||0),W=Number((H==null?void 0:H.percentOfTM)||50),J=m*(W/100),me=ns(J,je.increment,je.mode);ss={type:"bbb",pairing:l,liftKey:p,sets:5,reps:10,percentOfTM:W,weight:me,units:c}}let x={mode:(K==null?void 0:K.mode)||"minimal"};x.mode==="custom"&&((se=K==null?void 0:K.customPlan)!=null&&se[E])&&(x.custom=K.customPlan[E].map(l=>({name:l.name,sets:l.sets,reps:l.reps})));let $;if(ee.length){const l=ne[I(ve,oe)]||ne[0],p=ee.find(m=>m.day===l);p&&($={type:p.mode==="hiit"?"HIIT":"LISS",modality:p.modality,minutes:((ie=p.prescription)==null?void 0:ie.minutes)||((we=p.prescription)==null?void 0:we.duration)||void 0,intensity:((r=p.prescription)==null?void 0:r.intensity)||void 0,notes:p.notes||void 0})}return{day:ve+1,liftKey:E,lift:T(E),warmups:Je,main:rs,supplemental:ss||{type:"none",sets:0,reps:0,percentOfTM:null},assistance:x,conditioning:$}});qe.push({week:Ne+1,days:Ge})}const _e={meta:{createdAt:new Date().toISOString(),templateKey:he||null,flowMode:ye||"custom",units:c,loadingOption:w},trainingMaxes:X,rounding:{increment:je.increment,mode:je.mode},schedule:{frequency:oe,days:xe,includeWarmups:!!(P!=null&&P.includeWarmups),warmupScheme:(P==null?void 0:P.warmupScheme)||null},supplemental:H||{strategy:"none"},assistance:K||{mode:"minimal"},conditioning:M?{...M,sessions:ee}:void 0,weeks:qe};try{localStorage.setItem("ph531.activeProgram.v2",JSON.stringify(_e)),n("/program/531/active")}catch(Ne){console.error("Failed to save active program:",Ne)}}const Z=c=>N(b=>({...b,[c]:!0})),C=ts[i],F=(C.id==="fundamentals"?Fs(s):C.id==="design"?o.design:C.id==="review"?o.review:C.id==="progress"?o.progress:!1)&&i<ts.length-1,_=i>0,ae=u.useCallback((c,b)=>{N(w=>w[c]===b?w:{...w,[c]:b})},[]),Y=()=>{var c,b;if(F){i===0&&(h(null),B([]));const w=i+1;d(w),te(w);return}if(i===0&&!F){const w=[];(s==null?void 0:s.units)==="lbs"||(s==null?void 0:s.units)==="lb"||(s==null?void 0:s.units)==="kg"||w.push("units"),s!=null&&s.rounding||w.push("rounding"),(s==null?void 0:s.tmPct)===.9||(s==null?void 0:s.tmPct)===.85||(s==null?void 0:s.tmPct)===.9||(s==null?void 0:s.tmPct)===.85||w.push("TM %");const P=[];for(const K of ms){const ye=(b=(c=s==null?void 0:s.lifts)==null?void 0:c[K])==null?void 0:b.tm;Number.isFinite(ye)&&ye>0||P.push(K)}P.length&&w.push(...P.map(K=>`${K} TM`)),B(w);const H=w.length?`Still need: ${w.join(", ")}`:"Complete all required fields to continue.";h(H),R(K=>K+1),setTimeout(()=>{h(null)},4e3)}},ge=()=>{if(_){const c=i-1;d(c),te(c)}},Re=c=>{c<=i&&(d(c),te(c))};function ce(c={},b){var K,ye;const P=typeof import.meta<"u"&&(ze==null?void 0:ze.VITE_PROGRESS_FORCE_PASS)==="true"?{}:c,H=Et({...s,tms:Object.fromEntries(Object.entries(s.lifts||{}).map(([he,M])=>[he,(M==null?void 0:M.tm)||0]))},{amrapWk3:P});if(b&&Object.keys(b).some(he=>b[he]===!1)){for(const he of Object.keys(H.lifts||{}))if(b[he]===!1){const M=((ye=(K=s.lifts)==null?void 0:K[he])==null?void 0:ye.tm)||0;H.lifts[he].tm=M,H.tms[he]=M}}for(const he of Object.keys(H.lifts||{})){const M=H.lifts[he].tm;y({type:"SET_TM",lift:he,tm:M})}y({type:"SET_ADVANCED",advanced:{...s.advanced||{},cycle:H.cycle}}),console.info("Cycle advanced:",{cycle:H.cycle,nextTms:H.tms})}const G=u.useCallback(c=>ae("fundamentals",c),[ae]),Le=()=>{switch(i){case 0:return e.jsx(Ot,{onValidChange:G,flashToken:A,missing:g});case 1:return e.jsx(Wt,{onChoose:c=>{Z("template"),c==="custom"&&(d(2),te(2))},onAutoNext:()=>{d(3),te(3)},extraControls:e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wide text-gray-400",children:"Days per week"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:"Choose 1-4"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",role:"group","aria-label":"Days per week",children:[1,2,3,4].map(c=>e.jsx(le,{on:Number((s==null?void 0:s.daysPerWeek)||4)===c,"aria-label":`${c} day${c>1?"s":""}`,onClick:()=>{const b=c;y({type:"SET_DAYS_PER_WEEK",payload:b});const w=(s==null?void 0:s.split4)==="B"?vs:ls,P=D.current;let H;b===4?H=js({state:{...s,daysPerWeek:b},pack:P,split:w,weekLabel:"3x5"}):b===3?H=fs({mode:"3day",liftOrder:["press","deadlift","bench","squat"]}):b===2?H=ws({state:{...s,daysPerWeek:b},pack:P,split:w,weekLabel:"3x5"}):H=ks({state:{...s,daysPerWeek:b},pack:P,split:w,weekLabel:"3x5"}),y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},schedulePreview:H}})},children:c},c))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wide text-gray-400",children:"4-day Split"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:"For 4-day"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",role:"group","aria-label":"4-day split",children:["A","B"].map(c=>e.jsx(le,{on:((s==null?void 0:s.split4)||"A")===c,"aria-label":`Split ${c}`,onClick:()=>{const b=c;y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},split4:b}});const w=b==="B"?vs:ls,P=Number((s==null?void 0:s.daysPerWeek)||4),H=D.current;let K;P===4?K=js({state:{...s},pack:H,split:w,weekLabel:"3x5"}):P===3?K=fs({mode:"3day",liftOrder:["press","deadlift","bench","squat"]}):P===2?K=ws({state:{...s},pack:H,split:w,weekLabel:"3x5"}):K=ks({state:{...s},pack:H,split:w,weekLabel:"3x5"}),y({type:"SET_ADVANCED",advanced:{...(s==null?void 0:s.advanced)||{},split4:b,schedulePreview:K}})},children:c==="A"?"A: P/D/B/S":"B: B/S/P/D"},c))})]})]})});case 2:return e.jsx(qt,{onValidChange:c=>ae("design",c)});case 3:return e.jsx(zt,{onReadyChange:c=>ae("review",c)});case 4:return e.jsx(er,{onAdvance:(c,b)=>{if(b!=null&&b.customIncrements){const w=advanceCycleSelective(s,{amrapWk3:(s==null?void 0:s.amrapWk3)||{},include:c,customIncrements:b.customIncrements});Object.entries(w.lifts||{}).forEach(([P,H])=>{y({type:"SET_TM",lift:P,tm:H.tm})}),y({type:"SET_CYCLE",cycle:w.cycle}),y({type:"SET_WEEK",week:w.week}),y({type:"SET_HISTORY",history:w.history})}else ce((s==null?void 0:s.amrapWk3)||{},c)}});default:return e.jsx("div",{className:"text-red-400",children:"Unknown step"})}};return C.id==="fundamentals"&&console.debug("Step1 validation:",{canNext:Fs(s),stateSnapshot:{units:s==null?void 0:s.units,rounding:s==null?void 0:s.rounding,tmPct:s==null?void 0:s.tmPct,tms:ms.reduce((c,b)=>{var w,P;return c[b]=((P=(w=s==null?void 0:s.lifts)==null?void 0:w[b])==null?void 0:P.tm)||null,c},{})}}),e.jsx("div",{className:"min-h-screen bg-gray-900",children:e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsx("div",{className:"mb-8 space-y-2",children:e.jsx("div",{className:"flex items-start justify-between flex-wrap gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center",children:["5/3/1 Program Builder V2",((pe=(V=s==null?void 0:s.advanced)==null?void 0:V.schedulePreview)==null?void 0:pe.mode)==="3day"&&e.jsx("span",{className:"ml-3 inline-flex items-center rounded-full border border-red-500/40 bg-red-600/10 px-2 py-0.5 text-xs text-red-300",children:"3-day rotation (5 weeks)"})]}),e.jsx("p",{className:"text-gray-400",children:"Jim Wendler's proven strength training methodology"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("aside",{className:"lg:col-span-3",children:e.jsxs("nav",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-4 uppercase tracking-wide",children:"Steps"}),e.jsx("ol",{className:"space-y-1",children:ts.map((c,b)=>{const w=b===i,P=o[c.id],H=b<i,K=b<=i;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>Re(b),disabled:!K,className:`w-full text-left px-3 py-3 rounded transition-colors ${w?"bg-red-600/20 border border-red-500/50 text-white":K?"hover:bg-gray-700/50 border border-transparent text-gray-300":"opacity-40 cursor-not-allowed border border-transparent text-gray-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-xs uppercase tracking-wide text-gray-400",children:["Step ",b+1]}),(P||H)&&e.jsx(Be,{className:"w-4 h-4 text-green-400"})]}),e.jsx("div",{className:"font-medium",children:c.title}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:c.description})]})},c.id)})})]})}),e.jsx("main",{className:"lg:col-span-9",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:["Step ",i+1,": ",ts[i].title]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:ts[i].description})]}),e.jsxs("button",{onClick:()=>f(i),className:"text-xs text-gray-400 hover:text-white cursor-pointer flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-700/50 transition-colors",title:`Reset ${ts[i].title}`,children:[e.jsx(ct,{className:"w-3 h-3"}),"Reset"]})]}),(()=>{const c=O(i);return c.hasIssues?e.jsxs("div",{className:"space-y-2",children:[c.errors.length>0&&e.jsx("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-red-300 text-sm font-medium",children:[c.errors.length," required field(s) missing"]}),e.jsx("ul",{className:"mt-1 space-y-1",children:c.errors.map((b,w)=>e.jsxs("li",{className:"text-red-200 text-xs",children:["â€¢ ",b]},w))})]})]})}),c.warnings.length>0&&e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-500/50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx($e,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-yellow-300 text-sm font-medium",children:"Recommendations"}),e.jsx("ul",{className:"mt-1 space-y-1",children:c.warnings.map((b,w)=>e.jsxs("li",{className:"text-yellow-200 text-xs",children:["â€¢ ",b]},w))})]})]})})]}):null})()]}),Le(),(()=>{var b,w,P,H,K,ye,he;const c=(b=s==null?void 0:s.advanced)==null?void 0:b.schedulePreview;if((c==null?void 0:c.mode)==="3day"&&Array.isArray(c==null?void 0:c.weeks)&&c.weeks.length){const M=Bt(c);return e.jsx("div",{className:"space-y-6 mt-10",children:M.map((X,z)=>e.jsxs("div",{className:"rounded-2xl border border-gray-700 bg-gray-800/40 p-4",children:[e.jsx("div",{className:"text-lg font-semibold mb-3 text-white",children:X.label}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:X.sessions.map((Q,oe)=>e.jsxs("div",{className:"rounded-xl border border-gray-700/60 bg-gray-900/40 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400 mb-2",children:Q.sessionWeekLabel}),Q.lifts.map((be,xe)=>{var Ue;const ee=(s==null?void 0:s.units)||"lbs",I=Object.fromEntries(Object.entries((s==null?void 0:s.lifts)||{}).map(([fe,Ee])=>[fe,Ee.tm||0])),ne=(s==null?void 0:s.rounding)==="ceil"?{lbs:5,kg:2.5}:{lbs:5,kg:2.5},je=D.current,qe=vt({pack:je,lift:be,tms:I,units:ee,rounding:ne}),_e=wt({pack:je,lift:be,weekLabel:Q.sessionWeekLabel,tms:I,units:ee,rounding:ne}),Ie=kt({supplemental:s==null?void 0:s.supplemental,lift:be,tms:I,units:ee,rounding:ne,pack:je});return e.jsxs("div",{className:xe>0?"mt-4 pt-4 border-t border-gray-700/40":"",children:[e.jsx("div",{className:"font-medium capitalize text-gray-200",children:be}),e.jsx("div",{className:"mt-1 text-xs uppercase tracking-wide text-gray-400",children:"Warm-up"}),e.jsxs("ul",{className:"text-sm mb-2 space-y-0.5",children:[qe.length===0&&e.jsx("li",{className:"text-gray-500",children:"â€”"}),qe.map((fe,Ee)=>e.jsxs("li",{className:"tabular-nums text-gray-300",children:[fe.pct,"% Ã— ",fe.reps," â†’ ",e.jsx("span",{className:"text-white",children:fe.weight})," ",ee]},Ee))]}),e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Main"}),e.jsxs("ul",{className:"text-sm mb-2 space-y-0.5",children:[_e.rows.length===0&&e.jsx("li",{className:"text-gray-500",children:"â€”"}),_e.rows.map((fe,Ee)=>e.jsxs("li",{className:"tabular-nums text-gray-300",children:[fe.pct,"% Ã— ",fe.reps,fe.amrap?"+":""," â†’ ",e.jsx("span",{className:"text-white",children:fe.weight})," ",ee,fe.amrap&&e.jsx("span",{className:"ml-2 text-[10px] px-1 py-0.5 border border-red-500/40 rounded text-red-300",children:"AMRAP"})]},Ee))]}),Ie&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Supplemental (BBB)"}),e.jsxs("div",{className:"text-sm tabular-nums text-gray-300",children:[Ie.sets,"Ã—",Ie.reps," @ ",Ie.pct,"% TM â†’ ",e.jsx("span",{className:"text-white",children:Ie.load})," ",ee]})]}),Array.isArray((Ue=s==null?void 0:s.assistance)==null?void 0:Ue.items)&&s.assistance.items.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Assistance"}),e.jsx("ul",{className:"text-sm space-y-0.5",children:s.assistance.items.map((fe,Ee)=>e.jsxs("li",{className:"text-gray-300",children:[fe.name||fe.id," â€” ",fe.sets,"Ã—",fe.reps,fe.load?` @ ${fe.load}`:""]},Ee))})]}),Q.conditioning&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Conditioning"}),e.jsxs("div",{className:"text-xs text-gray-300",children:[Q.conditioning.type," ",Q.conditioning.minutes?`${Q.conditioning.minutes}m`:"",Q.conditioning.intensity?` Â· ${Q.conditioning.intensity}`:""]})]})]},xe)})]},oe))})]},z))})}if((c==null?void 0:c.mode)==="4day_live"&&Array.isArray(c==null?void 0:c.days)&&c.days.length===4)return e.jsx("div",{className:"space-y-6 mt-10",children:e.jsxs("div",{className:"rounded-2xl border border-gray-700 bg-gray-800/40 p-4",children:[e.jsx("div",{className:"text-lg font-semibold mb-3 text-white",children:"Week 1 (Preview)"}),e.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:c.days.map((M,X)=>{var z,Q,oe,be,xe,ee;return e.jsxs("div",{className:"rounded-xl border border-gray-700/60 bg-gray-900/40 p-3",children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-gray-400 mb-2",children:["Day ",X+1]}),e.jsx("div",{className:"font-medium capitalize text-gray-200 mb-2",children:M.lift}),e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Warm-up"}),e.jsxs("ul",{className:"text-sm mb-2 space-y-0.5",children:[((z=M.warmups)==null?void 0:z.length)===0&&e.jsx("li",{className:"text-gray-500",children:"â€”"}),(Q=M.warmups)==null?void 0:Q.map((I,ne)=>e.jsxs("li",{className:"tabular-nums text-gray-300",children:[I.pct,"% Ã— ",I.reps," â†’ ",e.jsx("span",{className:"text-white",children:I.weight})," ",(s==null?void 0:s.units)||"lbs"]},ne))]}),e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Main"}),e.jsxs("ul",{className:"text-sm mb-2 space-y-0.5",children:[((be=(oe=M.main)==null?void 0:oe.rows)==null?void 0:be.length)===0&&e.jsx("li",{className:"text-gray-500",children:"â€”"}),(ee=(xe=M.main)==null?void 0:xe.rows)==null?void 0:ee.map((I,ne)=>e.jsxs("li",{className:"tabular-nums text-gray-300",children:[I.pct,"% Ã— ",I.reps,I.amrap?"+":""," â†’ ",e.jsx("span",{className:"text-white",children:I.weight})," ",(s==null?void 0:s.units)||"lbs",I.amrap&&e.jsx("span",{className:"ml-2 text-[10px] px-1 py-0.5 border border-red-500/40 rounded text-red-300",children:"AMRAP"})]},ne))]}),M.supplemental&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Supplemental"}),e.jsxs("div",{className:"text-sm tabular-nums text-gray-300",children:[M.supplemental.sets,"Ã—",M.supplemental.reps," @ ",M.supplemental.pct,"% TM â†’ ",e.jsx("span",{className:"text-white",children:M.supplemental.load})," ",(s==null?void 0:s.units)||"lbs"]})]}),Array.isArray(M.assistance)&&M.assistance.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Assistance"}),e.jsx("ul",{className:"text-sm space-y-0.5",children:M.assistance.map((I,ne)=>e.jsxs("li",{className:"text-gray-300",children:[I.name||I.id," â€” ",I.sets??"?","Ã—",I.reps??"?"]},ne))})]}),M.conditioning&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Conditioning"}),e.jsxs("div",{className:"text-xs text-gray-300",children:[M.conditioning.type," ",M.conditioning.minutes?`${M.conditioning.minutes}m`:"",M.conditioning.intensity?` Â· ${M.conditioning.intensity}`:""]})]})]},X)})})]})});if((c==null?void 0:c.mode)==="2day_live"&&Array.isArray(c==null?void 0:c.days)&&c.days.length===2)return e.jsx("div",{className:"space-y-6 mt-10",children:e.jsxs("div",{className:"rounded-2xl border border-gray-700 bg-gray-800/40 p-4",children:[e.jsx("div",{className:"text-lg font-semibold mb-3 text-white",children:"Week 1 (2-Day Preview)"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:c.days.map((M,X)=>{var z,Q,oe,be,xe,ee;return e.jsxs("div",{className:"rounded-xl border border-gray-700/60 bg-gray-900/40 p-3",children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-gray-400 mb-2",children:["Day ",X+1]}),e.jsx("div",{className:"font-medium capitalize text-gray-200 mb-2",children:M.lift}),e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Warm-up"}),e.jsxs("ul",{className:"text-sm mb-2 space-y-0.5",children:[((z=M.warmups)==null?void 0:z.length)===0&&e.jsx("li",{className:"text-gray-500",children:"â€”"}),(Q=M.warmups)==null?void 0:Q.map((I,ne)=>e.jsxs("li",{className:"tabular-nums text-gray-300",children:[I.pct,"% Ã— ",I.reps," â†’ ",e.jsx("span",{className:"text-white",children:I.weight})," ",(s==null?void 0:s.units)||"lbs"]},ne))]}),e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Main"}),e.jsxs("ul",{className:"text-sm mb-2 space-y-0.5",children:[((be=(oe=M.main)==null?void 0:oe.rows)==null?void 0:be.length)===0&&e.jsx("li",{className:"text-gray-500",children:"â€”"}),(ee=(xe=M.main)==null?void 0:xe.rows)==null?void 0:ee.map((I,ne)=>e.jsxs("li",{className:"tabular-nums text-gray-300",children:[I.pct,"% Ã— ",I.reps,I.amrap?"+":""," â†’ ",e.jsx("span",{className:"text-white",children:I.weight})," ",(s==null?void 0:s.units)||"lbs",I.amrap&&e.jsx("span",{className:"ml-2 text-[10px] px-1 py-0.5 border border-red-500/40 rounded text-red-300",children:"AMRAP"})]},ne))]}),Array.isArray(M.assistance)&&M.assistance.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Assistance"}),e.jsx("ul",{className:"text-sm space-y-0.5",children:M.assistance.map((I,ne)=>e.jsxs("li",{className:"text-gray-300",children:[I.name||I.id," â€” ",I.sets??"?","Ã—",I.reps??"?"]},ne))})]}),M.conditioning&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Conditioning"}),e.jsxs("div",{className:"text-xs text-gray-300",children:[M.conditioning.type," ",M.conditioning.minutes?`${M.conditioning.minutes}m`:"",M.conditioning.intensity?` Â· ${M.conditioning.intensity}`:""]})]})]},X)})})]})});if((c==null?void 0:c.mode)==="1day_live"){if(!(ze!=null&&ze.VITE_SHOW_STEP_PREVIEW))return null;if(Array.isArray(c==null?void 0:c.days)&&c.days.length===1){const M=c.days[0];return e.jsx("div",{className:"space-y-6 mt-10",children:e.jsxs("div",{className:"rounded-2xl border border-gray-700 bg-gray-800/40 p-4",children:[e.jsx("div",{className:"text-lg font-semibold mb-3 text-white",children:"Week 1 (1-Day Preview)"}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:e.jsxs("div",{className:"rounded-xl border border-gray-700/60 bg-gray-900/40 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400 mb-2",children:"Day 1"}),e.jsx("div",{className:"font-medium capitalize text-gray-200 mb-2",children:M.lift}),e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Warm-up"}),e.jsxs("ul",{className:"text-sm mb-2 space-y-0.5",children:[((w=M.warmups)==null?void 0:w.length)===0&&e.jsx("li",{className:"text-gray-500",children:"â€”"}),(P=M.warmups)==null?void 0:P.map((X,z)=>e.jsxs("li",{className:"tabular-nums text-gray-300",children:[X.pct,"% Ã— ",X.reps," â†’ ",e.jsx("span",{className:"text-white",children:X.weight})," ",(s==null?void 0:s.units)||"lbs"]},z))]}),e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Main"}),e.jsxs("ul",{className:"text-sm mb-2 space-y-0.5",children:[((K=(H=M.main)==null?void 0:H.rows)==null?void 0:K.length)===0&&e.jsx("li",{className:"text-gray-500",children:"â€”"}),(he=(ye=M.main)==null?void 0:ye.rows)==null?void 0:he.map((X,z)=>e.jsxs("li",{className:"tabular-nums text-gray-300",children:[X.pct,"% Ã— ",X.reps,X.amrap?"+":""," â†’ ",e.jsx("span",{className:"text-white",children:X.weight})," ",(s==null?void 0:s.units)||"lbs",X.amrap&&e.jsx("span",{className:"ml-2 text-[10px] px-1 py-0.5 border border-red-500/40 rounded text-red-300",children:"AMRAP"})]},z))]}),Array.isArray(M.assistance)&&M.assistance.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Assistance"}),e.jsx("ul",{className:"text-sm space-y-0.5",children:M.assistance.map((X,z)=>e.jsxs("li",{className:"text-gray-300",children:[X.name||X.id," â€” ",X.sets??"?","Ã—",X.reps??"?"]},z))})]}),M.conditioning&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:"Conditioning"}),e.jsxs("div",{className:"text-xs text-gray-300",children:[M.conditioning.type," ",M.conditioning.minutes?`${M.conditioning.minutes}m`:"",M.conditioning.intensity?` Â· ${M.conditioning.intensity}`:""]})]})]})})]})})}}return null})(),i===3&&typeof import.meta<"u"&&(ze==null?void 0:ze.VITE_ENABLE_PROGRESS)==="true"&&e.jsxs("div",{className:"mt-10 rounded-2xl border border-gray-700 bg-gray-800/40 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Week 3 AMRAP Results"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 max-w-xl",children:"Enter the reps you achieved on the final AMRAP set of Week 3 for each main lift. Leave blank if not performed. Progression will increase TMs only for lifts that met or exceeded the baseline (auto-pass when FORCE_PASS env flag set)."})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Cycle: ",e.jsx("span",{className:"text-gray-300",children:(s==null?void 0:s.cycle)||1})]})]}),e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-4 gap-4",children:ms.map(c=>{var w;const b=((w=s==null?void 0:s.amrapWk3)==null?void 0:w[c])??"";return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-xs uppercase tracking-wide text-gray-400 mb-1",children:c}),e.jsx("input",{type:"number",min:0,value:b===null?"":b,onChange:P=>{const H=P.target.value,K=H===""?null:Math.max(0,parseInt(H,10)||0);y({type:"SET_AMRAP_WK3",payload:{[c]:K}})},className:"bg-gray-900/60 border border-gray-700 focus:border-red-500 focus:outline-none rounded px-2 py-1 text-sm text-gray-200",placeholder:"Reps"})]},c)})}),e.jsx("div",{className:"flex items-center justify-end mt-6 space-x-4",children:e.jsx("button",{type:"button",onClick:()=>{ce((s==null?void 0:s.amrapWk3)||{})},className:"px-5 py-2 rounded-lg border font-medium transition-colors border-blue-500 bg-blue-600/10 text-blue-300 hover:bg-blue-600/20",children:"Advance Cycle"})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-700",children:[e.jsx(le,{on:!1,disabled:!_,onClick:ge,className:`text-sm px-5 ${_?"":"opacity-50 cursor-not-allowed"}`,children:"â† Back"}),e.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:e.jsxs("span",{children:["Step ",i+1," of ",ts.length]})}),i===0&&e.jsxs("div",{className:"flex flex-col items-end gap-2 relative",children:[e.jsxs(le,{on:F,disabled:!F,onClick:Y,className:`flex items-center gap-2 text-sm px-5 ${F?"":"opacity-50"}`,children:["Next ",e.jsx(ys,{className:"w-4 h-4"})]}),!F&&j&&e.jsxs("div",{className:"flex items-start gap-2 text-xs max-w-xs p-2 rounded-md border border-amber-600/40 bg-amber-900/30 text-amber-300 shadow-lg animate-fade-in",children:[e.jsx(Ke,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:j})]})]}),(i===1||i===2)&&e.jsx("div",{className:"flex flex-col items-end gap-2",children:(()=>{const b=O(i).errors.length===0;return e.jsxs(le,{on:b,disabled:!b,onClick:Y,className:`flex items-center gap-2 text-sm px-5 ${b?"":"opacity-50 cursor-not-allowed"}`,children:[i===1?"Continue":"Review & Export"," ",e.jsx(ys,{className:"w-4 h-4"})]})})()}),i===3&&e.jsxs(le,{on:o.review,disabled:!o.review,onClick:()=>{d(4),te(4)},className:`flex items-center gap-2 text-sm px-5 ${o.review?"":"opacity-50 cursor-not-allowed"}`,children:["Week 4 Complete â†’ Progress TMs ",e.jsx(ys,{className:"w-4 h-4"})]}),i===4&&e.jsxs(le,{on:!0,disabled:!1,onClick:q,className:"flex items-center gap-2 text-sm px-5",children:["Start Next Cycle ",e.jsx(ys,{className:"w-4 h-4"})]}),!(i===0||i===2||i===3)&&e.jsx("div",{className:"w-[96px]"})]})]})})]})]})})}function xr(){return e.jsx(ar,{})}export{xr as default};
//# sourceMappingURL=ProgramWizard531V2-CLEOduuL.js.map
