import"./index-IJKD4ygM.js";function y(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn("storage.set failed",r)}}function v(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("storage.get failed",t),null}}function I(e){try{localStorage.removeItem(e)}catch(t){console.warn("storage.remove failed",t)}}const d="fiveThreeOne_activeCycle_v1";function h(e){var a;const t=((a=e==null?void 0:e.weeks)==null?void 0:a[0])||{days:[]},r=Math.max(0,(t.days||[]).findIndex(c=>!!c)),n={status:"active",startedAt:new Date().toISOString(),currentWeek:1,currentDayIndex:r===-1?0:r,program:e};try{y(d,n)}catch{}return n}function f(){try{return v(d)||null}catch{return null}}function i(e){try{y("fiveThreeOne_activeCycle_v1",e)}catch{}return e}function k(){var c,s;const e=f();if(!(e!=null&&e.program))return{active:null,today:null,weekObj:null};const t=e.currentWeek??1,r=e.currentDayIndex??0,n=((c=e.program.weeks)==null?void 0:c[t-1])||null,a=((s=n==null?void 0:n.days)==null?void 0:s[r])||null;return{active:e,today:a,weekObj:n}}function m(){var s,o,l,u;const e=f();if(!((o=(s=e==null?void 0:e.program)==null?void 0:s.weeks)!=null&&o.length))return null;const t=e.program.weeks.length;let r=e.currentWeek??1,n=e.currentDayIndex??0;const a=((u=(l=e.program.weeks[r-1])==null?void 0:l.days)==null?void 0:u.length)||0;if(n+1<a)n=n+1;else if(r+1<=t)r=r+1,n=0;else{const g={...e,status:"complete",completedAt:new Date().toISOString()};return i(g)}const c={...e,currentWeek:r,currentDayIndex:n};return i(c)}export{m as a,f as b,v as c,k as g,h as p,I as r,y as s};
//# sourceMappingURL=persistCycle-DBtQuHCQ.js.map
