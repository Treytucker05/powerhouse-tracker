import{r as C,j as e,T as R,I as W,ae as G,S as z,l as Y}from"./ui-vendor-BLoy3R85.js";import{S as $}from"./StepStatusPill-BCaGj-cD.js";import{J as V,S as Z,t as F,p as K}from"./index-Dz8bHEFc.js";import"./react-vendor-DoC2WAmd.js";import"./data-vendor-CWegSrCC.js";import"./chart-vendor-DbvXzfx8.js";import"./router-vendor-CDc5MEim.js";const d={BBB:"bbb",TRIUMVIRATE:"triumvirate",PERIODIZATION_BIBLE:"periodization_bible",BODYWEIGHT:"bodyweight",JACK_SHIT:"jack_shit"},Q={squat:"deadlift",deadlift:"squat",bench:"press",press:"bench",press:"bench"},X={press:[{ref:"dips",sets:5,reps:15},{ref:"chins",sets:5,reps:10}],bench:[{ref:"db_press",sets:5,reps:15},{ref:"rows",sets:5,reps:10}],deadlift:[{ref:"goodmornings",sets:5,reps:10},{ref:"hlr",sets:5,reps:15}],squat:[{ref:"legpress",sets:5,reps:15},{ref:"legcurl",sets:5,reps:10}]},ee={press:["chins","dips","pushups","hlr"],deadlift:["chins","hlr","pushups"],bench:["chins","dips","pushups","hlr"],squat:["pushups","hlr","situps"]};function se(l,x,r=50,u="same"){const c=l,b=u==="opposite"&&Q[l]||l;return[{name:u==="opposite"?`${b.toUpperCase()} (BBB)`:`${c.toUpperCase()} (BBB)`,sets:5,reps:10,load:{type:"percentTM",value:r,liftRef:b}}]}function te(l){return(X[l]||[]).map(r=>({name:r.ref.toUpperCase(),ref:r.ref,sets:r.sets,reps:r.reps,load:{type:"bw"}}))}function re(l){return{press:[{name:"DB Press",sets:5,reps:12},{name:"Chin-Ups",sets:5,reps:10,load:{type:"bw"}},{name:"Pushdowns",sets:5,reps:15}],bench:[{name:"DB Incline Press",sets:5,reps:12},{name:"Rows",sets:5,reps:10},{name:"Dips",sets:5,reps:12,load:{type:"bw"}}],deadlift:[{name:"RDL",sets:5,reps:10},{name:"Leg Press",sets:5,reps:15},{name:"Abs",sets:5,reps:15,load:{type:"bw"}}],squat:[{name:"Back Extensions",sets:5,reps:12},{name:"Leg Curls",sets:5,reps:15},{name:"Abs",sets:5,reps:15,load:{type:"bw"}}]}[l]||[]}function ae(l){return(ee[l]||[]).slice(0,3).map(u=>({name:u.toUpperCase(),ref:u,sets:5,reps:15,load:{type:"bw"}}))}function ne(){return[]}function O(l,x,r){var b,y;const u=l==="periodizationBible"?d.PERIODIZATION_BIBLE:l==="jackShit"?d.JACK_SHIT:l,c={press:[],deadlift:[],bench:[],squat:[]};switch(u){case d.BBB:{const n=Number(((b=x==null?void 0:x.bbb)==null?void 0:b.percent)??50),o=((y=x==null?void 0:x.bbb)==null?void 0:y.pairMode)==="opposite"?"opposite":"same";return["press","deadlift","bench","squat"].forEach(g=>{c[g]=se(g,r,n,o)}),c}case d.TRIUMVIRATE:return["press","deadlift","bench","squat"].forEach(n=>{c[n]=te(n)}),c;case d.PERIODIZATION_BIBLE:return["press","deadlift","bench","squat"].forEach(n=>{c[n]=re(n)}),c;case d.BODYWEIGHT:return["press","deadlift","bench","squat"].forEach(n=>{c[n]=ae(n)}),c;case d.JACK_SHIT:default:return["press","deadlift","bench","squat"].forEach(n=>{c[n]=ne()}),c}}function xe({data:l,updateData:x}){var T,D,I,A,E;const r=l||{},{loaded:u,categoriesMap:c}=V(),[b,y]=C.useState({}),n=s=>x({...r,...s}),o=((T=r==null?void 0:r.template)==null?void 0:T.id)||(r==null?void 0:r.template),g=(r==null?void 0:r.lifts)||{},w=(r==null?void 0:r.rounding)||{increment:5},i=(r==null?void 0:r.assistance)||{options:{bbb:{percent:50,pairMode:"same"},bodyweight:{minRepsPerExercise:75}},perDay:{press:[],deadlift:[],bench:[],squat:[]}},p=(r==null?void 0:r.caps)||{maxAssistanceSetsPerDay:15,superset:!0},_=()=>{if(!o)return;const s=O(o,i==null?void 0:i.options,g);n({assistance:{...i,perDay:s}})},S=s=>{const f={...i,options:{...i.options,bbb:{...i.options.bbb,...s}}},j=o===d.BBB?O(o,f.options,g):i.perDay;n({assistance:{...f,perDay:j}})},M=s=>s.reduce((f,j)=>f+(Number(j.sets)||0),0),k={press:"Press Day",deadlift:"Deadlift Day",bench:"Bench Day",squat:"Squat Day"},q=Number(((I=(D=i==null?void 0:i.options)==null?void 0:D.bbb)==null?void 0:I.percent)??50),L=((E=(A=i==null?void 0:i.options)==null?void 0:A.bbb)==null?void 0:E.pairMode)??"same",U=C.useMemo(()=>{switch(o){case d.BBB:return"Boring But Big";case d.TRIUMVIRATE:return"Triumvirate";case d.PERIODIZATION_BIBLE:return"Periodization Bible";case d.BODYWEIGHT:return"Bodyweight Only";case d.JACK_SHIT:return"Main Lift Only";default:return"No Template Selected"}},[o]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-1",children:"Step 5: Assistance Router"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Template-driven assistance with smart defaults. Edit per day as needed."})]}),e.jsx($,{stepId:Z.ASSISTANCE_ROUTER,data:r})]}),!o&&e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600 rounded p-4",children:e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx(R,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"text-yellow-100 text-sm",children:["Select a template in ",e.jsx("b",{children:"Step 2: Template Selection"})," to enable assistance planning."]})]})}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-600 rounded p-4",children:e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx(W,{className:"w-5 h-5 text-blue-300 mt-0.5"}),e.jsxs("div",{className:"text-blue-100 text-sm",children:[e.jsx("div",{className:"font-medium mb-1",children:"Guidelines"}),e.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[e.jsx("li",{children:"Assistance supports — not replaces — the main lift PRs."}),e.jsx("li",{children:"BBB: 5×10 at 50–70% of TM; pair with same or opposite lift."}),e.jsx("li",{children:"Triumvirate: exactly two accessories (5 sets each) after the main lift."}),e.jsx("li",{children:"Periodization Bible: 3 categories × 5 sets of 10–20 reps."}),e.jsx("li",{children:"Bodyweight: 2–4 movements, target ≥75 total reps per movement."}),e.jsx("li",{children:"Jack Shit: no assistance (valid if time/recovery limited)."})]})]})]})}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-white font-medium",children:["Current Template: ",e.jsx("span",{className:"text-red-400",children:U})]}),e.jsxs("button",{onClick:_,disabled:!o,className:`inline-flex items-center gap-2 px-3 py-1 rounded border ${o?"border-gray-600 hover:bg-gray-700/40 text-white":"border-gray-700 text-gray-500 cursor-not-allowed"}`,title:"Rebuild assistance from template defaults",children:[e.jsx(G,{className:"w-4 h-4"})," Auto-Generate"]})]}),o===d.BBB&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"BBB % of TM"}),e.jsx("select",{value:q,onChange:s=>S({percent:Number(s.target.value)}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1",children:[50,60,70].map(s=>e.jsxs("option",{value:s,children:[s,"%"]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Pairing"}),e.jsxs("select",{value:L,onChange:s=>S({pairMode:s.target.value}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1",children:[e.jsx("option",{value:"same",children:"Same Lift"}),e.jsx("option",{value:"opposite",children:"Opposite Lift"})]})]}),e.jsx("div",{className:"text-sm text-gray-400 flex items-end",children:"Weights are rounded using your Step 4 rounding rules."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["press","deadlift","bench","squat"].map(s=>{var P;const f=((P=i==null?void 0:i.perDay)==null?void 0:P[s])||[],j=M(f),H=(p==null?void 0:p.maxAssistanceSetsPerDay)&&j>p.maxAssistanceSetsPerDay;return e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-white font-medium",children:k[s]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[j," sets total"]})]}),!f.length&&e.jsx("div",{className:"text-gray-500 text-sm",children:"No assistance on this day."}),!!f.length&&e.jsx("ul",{className:"space-y-2",children:f.map((a,t)=>{var N,v,B;return e.jsxs("li",{className:"bg-gray-800/50 border border-gray-700 rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-200 font-medium",children:a.name}),e.jsxs("div",{className:"text-gray-300 text-sm",children:[a.sets,"×",a.reps,((N=a==null?void 0:a.load)==null?void 0:N.type)==="percentTM"&&e.jsxs("span",{className:"ml-2 text-gray-400",children:["@ ",a.load.value,"% TM",Number.isFinite(Number((v=g==null?void 0:g[a.load.liftRef])==null?void 0:v.tm))&&e.jsxs(e.Fragment,{children:[" → ",e.jsx("span",{className:"font-mono",children:(()=>{const m=Number(g[a.load.liftRef].tm);return F(K(m,Number(a.load.value),(w==null?void 0:w.increment)??5))})()})]})]}),((B=a==null?void 0:a.load)==null?void 0:B.type)==="bw"&&e.jsx("span",{className:"ml-2 text-gray-400",children:"@ BW"})]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Sets"}),e.jsx("input",{type:"number",min:"1",step:"1",value:a.sets,onChange:m=>{const h={...i};h.perDay[s][t].sets=Number(m.target.value),n({assistance:h})},className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Reps"}),e.jsx("input",{type:"number",min:"1",step:"1",value:a.reps,onChange:m=>{const h={...i};h.perDay[s][t].reps=Number(m.target.value),n({assistance:h})},className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"})]}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsx("button",{onClick:()=>{const m={...i};m.perDay[s]=m.perDay[s].filter((h,J)=>J!==t),n({assistance:m})},className:"px-3 py-1 rounded border border-gray-600 hover:bg-gray-700/40 text-white",children:"Remove"})})]})]},t)})}),H&&e.jsxs("div",{className:"mt-2 bg-yellow-900/20 border border-yellow-600 rounded p-2 text-yellow-100 text-xs flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"})," Over soft cap (",p.maxAssistanceSetsPerDay," sets)."]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Add Exercise"}),!u&&e.jsx("div",{className:"text-gray-500 text-xs",children:"Loading exercise database..."}),u&&e.jsxs("select",{value:b[s]||"",onChange:a=>y(t=>({...t,[s]:a.target.value})),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"-- Select Exercise --"}),Object.keys(c).sort().map(a=>e.jsx("optgroup",{label:a,children:c[a].map(t=>{const N=t.equipment?` (${t.equipment.split(";")[0]})`:"";return e.jsxs("option",{value:t.exercise,children:[t.exercise,N]},t.exercise)})},a))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{const a=b[s];if(!a)return;const t=Object.values(c).flat().find(h=>h.exercise===a),N=Number(t==null?void 0:t.default_sets)||5,v=(t==null?void 0:t.numeric_reps)||(/amrap/i.test((t==null?void 0:t.default_reps)||"")?12:Number(t==null?void 0:t.default_reps)||10),B=/body|bw|bodyweight/i.test((t==null?void 0:t.equipment)||"")||/AMRAP/i.test(t==null?void 0:t.default_reps)?{type:"bw"}:void 0,m={...i};m.perDay[s]=[...m.perDay[s]||[],{name:a,sets:N,reps:v,load:B}],n({assistance:m}),y(h=>({...h,[s]:""}))},disabled:!b[s],className:`px-3 py-1 rounded border ${b[s]?"border-gray-600 hover:bg-gray-700/40 text-white":"border-gray-700 text-gray-500 cursor-not-allowed"}`,children:"+ Add"}),e.jsx("button",{onClick:()=>y(a=>({...a,[s]:""})),className:"px-3 py-1 rounded border border-gray-700 hover:bg-gray-700/40 text-gray-300",children:"Clear"})]})]})]},s)})}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4",children:[e.jsx("div",{className:"text-white font-medium mb-2",children:"Session Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Soft Cap: Max Assistance Sets/Day"}),e.jsx("input",{type:"number",min:"5",step:"1",value:(p==null?void 0:p.maxAssistanceSetsPerDay)??15,onChange:s=>n({caps:{...p,maxAssistanceSetsPerDay:Number(s.target.value)}}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-gray-200",children:[e.jsx("input",{type:"checkbox",checked:!!(p!=null&&p.superset),onChange:s=>n({caps:{...p,superset:!!s.target.checked}})}),"Superset assistance where possible"]})}),e.jsxs("div",{className:"text-gray-400 text-sm flex items-end",children:[e.jsx(z,{className:"w-4 h-4 mr-2"})," Applies to preview and printouts."]})]})]}),e.jsxs("div",{className:"bg-green-900/20 border border-green-500 rounded p-3 text-green-200 text-sm flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"})," Assistance configured. You can refine sets/reps anytime."]})]})}export{xe as default};
//# sourceMappingURL=Step5AssistanceRouter-B1E6eKos.js.map
