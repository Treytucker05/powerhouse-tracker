import{r as v,j as e,I as D,n as B,_ as U,l as _,h as G}from"./ui-vendor-BLoy3R85.js";import{S as $}from"./StepStatusPill-BCaGj-cD.js";import{S as z}from"./index-Dz8bHEFc.js";import{r as A,c as Y,a as j,b as E,L as H}from"./compute531-BdiGZ_3o.js";import"./react-vendor-DoC2WAmd.js";import"./data-vendor-CWegSrCC.js";import"./chart-vendor-DbvXzfx8.js";import"./router-vendor-CDc5MEim.js";function J(g,b={upper:5,lower:10},a={increment:5,mode:"nearest"}){const l={...g||{}};return["squat","deadlift","bench","press"].forEach(t=>{if(!l[t])return;const u=Y(t)==="upper"?b.upper??5:b.lower??10,r=Number(l[t].tm);Number.isFinite(r)&&(l[t]={...l[t]||{},tm:A(r+u,(a==null?void 0:a.increment)??5,(a==null?void 0:a.mode)??"nearest")})}),l}function Q(g,b=.9,a={increment:5,mode:"nearest"}){if(!Number.isFinite(g))return g;const l=g*b;return A(l,(a==null?void 0:a.increment)??5,"ceiling")}function ae({data:g,updateData:b}){var M,C,P,S,k;const a=g||{},l=s=>b({...a,...s}),t=a.loading||{option:1,previewWeek:1},i=a.rounding||{increment:5,mode:"nearest"},u=a.increments||{upper:5,lower:10},r=a.lifts||{},c=a.prs||{},[o,y]=v.useState({lift:"bench",reps:5}),L=s=>l({loading:{...t,option:s}}),O=s=>l({loading:{...t,previewWeek:s}}),f=s=>l({rounding:{...i,...s}}),w=s=>l({increments:{...u,...s}}),q=()=>{const s=J(r,u,i);l({lifts:s})},R=(s,n)=>{var h;const m=Number((h=r==null?void 0:r[s])==null?void 0:h.tm);if(!Number.isFinite(m))return;const x=Q(m,n==="conservative"?.85:.9,i),p={...r||{}};p[s]={...p[s]||{},tm:x},l({lifts:p})},F=(s,n)=>{var x;const m=((x=c==null?void 0:c[s])==null?void 0:x.bestE1RM)||null;if(m&&n<=m)return;const d={...c||{}};d[s]={...d[s]||{},bestE1RM:n},l({prs:d})};v.useMemo(()=>{const s=t.previewWeek||1,n=(i==null?void 0:i.increment)??5,m=(i==null?void 0:i.mode)??"nearest",d=x=>{var h;const p=Number((h=r==null?void 0:r[x])==null?void 0:h.tm);return Number.isFinite(p)?{key:x,tm:p,sets:j(p,t.option,s,{increment:n,mode:m})}:{key:x,tm:null,sets:[]}};return[d("press"),d("deadlift"),d("bench"),d("squat")]},[r,t,i]);const N=v.useMemo(()=>{var T,I;const s=o.lift||"bench",n=Number((T=r==null?void 0:r[s])==null?void 0:T.tm);if(!Number.isFinite(n))return{weight:0,reps:o.reps,e1rm:0,isPR:!1,best:0};const d=j(n,t.option,t.previewWeek||1,i)[2],x=(d==null?void 0:d.weight)??0,p=Number(o.reps)||0,h=E(x,p),W=Number((I=c==null?void 0:c[s])==null?void 0:I.bestE1RM)||0;return{weight:x,reps:p,e1rm:h,isPR:h>W,best:W}},[o,r,t,i,c]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-1",children:"Step 4: Cycle & Progression"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Select loading option, rounding, TM increments, and manage resets. Use the PR calculator to verify e1RM logic."})]}),e.jsx($,{stepId:z.CYCLE_AND_PROGRESSION,data:a})]}),e.jsx("div",{className:"bg-blue-900/20 border border-blue-600 p-4 rounded",children:e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx(D,{className:"w-5 h-5 text-blue-300 mt-0.5"}),e.jsxs("div",{className:"text-blue-100 text-sm",children:[e.jsx("div",{className:"font-medium mb-1",children:"5/3/1 Guidance"}),e.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[e.jsxs("li",{children:["All percentages are based on ",e.jsx("b",{children:"Training Max (TM)"}),", not true 1RM."]}),e.jsx("li",{children:"Week 1: 5+, Week 2: 3+, Week 3: 1+ on the 3rd set. Week 4 is a deload (no +)."}),e.jsxs("li",{children:["Standard increments per cycle: ",e.jsx("b",{children:"+5 lbs upper"})," (Press/Bench), ",e.jsx("b",{children:"+10 lbs lower"})," (Squat/Deadlift)."]}),e.jsx("li",{children:"When performance stalls, reset the TM (90% standard; 85% conservative)."})]})]})]})}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium mb-2",children:"Loading Option"}),e.jsx("div",{className:"flex gap-2",children:[1,2].map(s=>e.jsxs("button",{onClick:()=>L(s),className:`px-3 py-1 rounded border ${t.option===s?"border-red-500 ring-2 ring-red-600":"border-gray-600 hover:bg-gray-700/40"} text-white`,children:["Option ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium mb-2",children:"Preview Week"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(s=>e.jsxs("button",{onClick:()=>O(s),className:`px-3 py-1 rounded border ${t.previewWeek===s?"border-red-500 ring-2 ring-red-600":"border-gray-600 hover:bg-gray-700/40"} text-white`,children:["Week ",s]},s))}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Week 4 is deload (no AMRAP)."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium mb-2",children:"Rounding"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Increment"}),e.jsx("input",{type:"number",min:"1",step:"0.5",value:i.increment??5,onChange:s=>f({increment:Number(s.target.value)}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Mode"}),e.jsxs("select",{value:i.mode??"nearest",onChange:s=>f({mode:s.target.value}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1",children:[e.jsx("option",{value:"nearest",children:"Nearest"}),e.jsx("option",{value:"floor",children:"Floor"}),e.jsx("option",{value:"ceiling",children:"Ceiling"})]})]})]})]})]}),e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-200 border border-gray-700",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Week"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Set 1"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Set 2"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Set 3"})]})}),e.jsx("tbody",{children:[1,2,3,4].map(s=>e.jsxs("tr",{className:"border-t border-gray-700",children:[e.jsxs("td",{className:"px-3 py-2",children:["Week ",s]}),H[String(t.option)][String(s)].map((n,m)=>e.jsxs("td",{className:"px-3 py-2",children:[n,"%",s<4&&m===2?"+":""]},m))]},s))})]})})]}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4",children:[e.jsx("div",{className:"text-white font-medium mb-2",children:"TM Progression & Resets"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded p-3",children:[e.jsx("div",{className:"text-gray-200 font-medium mb-2",children:"Cycle Increments"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Upper (+lbs)"}),e.jsx("input",{type:"number",min:"1",step:"1",value:u.upper??5,onChange:s=>w({upper:Number(s.target.value)}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Lower (+lbs)"}),e.jsx("input",{type:"number",min:"1",step:"1",value:u.lower??10,onChange:s=>w({lower:Number(s.target.value)}),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"})]})]}),e.jsxs("button",{onClick:q,className:"mt-3 inline-flex items-center gap-2 px-3 py-1 border border-gray-500 rounded hover:bg-gray-700/40 text-gray-100",children:[e.jsx(B,{className:"w-4 h-4"})," Apply increments to all TMs"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Adds +Upper to Press/Bench; +Lower to Squat/Deadlift. Respects rounding."})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded p-3 md:col-span-2",children:[e.jsx("div",{className:"text-gray-200 font-medium mb-2",children:"Reset a Lift"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["press","bench","deadlift","squat"].map(s=>{var n;return e.jsxs("div",{className:"bg-gray-900/50 border border-gray-700 rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-200 capitalize",children:s}),e.jsxs("div",{className:"text-xs text-gray-400",children:["TM: ",Number.isFinite(Number((n=r==null?void 0:r[s])==null?void 0:n.tm))?r[s].tm:"-"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(s,"standard"),className:"px-3 py-1 rounded border border-gray-600 hover:bg-gray-700/40 text-white",title:"Reset to 90% of current TM (ceiling to increment)",children:"90% Reset"}),e.jsx("button",{onClick:()=>R(s,"conservative"),className:"px-3 py-1 rounded border border-gray-600 hover:bg-gray-700/40 text-white",title:"Reset to 85% of current TM (ceiling to increment)",children:"85% Reset"})]})]},s)})}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Use resets when AMRAPs are consistently at minimums or reps are missed."})]})]})]}),e.jsxs("div",{className:"bg-gray-900/60 border border-gray-700 rounded p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"text-white font-medium",children:["e1RM / PR Calculator (uses Week ",t.previewWeek," last set)"]}),e.jsx(U,{className:"w-4 h-4 text-yellow-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Lift"}),e.jsxs("select",{value:o.lift,onChange:s=>y(n=>({...n,lift:s.target.value})),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1",children:[e.jsx("option",{value:"press",children:"Overhead Press"}),e.jsx("option",{value:"bench",children:"Bench Press"}),e.jsx("option",{value:"deadlift",children:"Deadlift"}),e.jsx("option",{value:"squat",children:"Squat"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Reps on + set"}),e.jsx("input",{type:"number",min:"1",step:"1",value:o.reps,onChange:s=>y(n=>({...n,reps:Number(s.target.value)})),className:"w-full bg-gray-800 border border-gray-600 text-white rounded px-2 py-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Computed"}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded p-2 text-gray-200",children:["Weight on + set: ",e.jsx("span",{className:"font-mono",children:Math.round(((C=j(Number((M=r==null?void 0:r[o.lift])==null?void 0:M.tm)||0,t.option,t.previewWeek,i)[2])==null?void 0:C.weight)||0)})," · e1RM: ",e.jsx("span",{className:"font-mono",children:Math.round(E(((S=j(Number((P=r==null?void 0:r[o.lift])==null?void 0:P.tm)||0,t.option,t.previewWeek,i)[2])==null?void 0:S.weight)||0,o.reps)||0)})," · Best: ",e.jsx("span",{className:"font-mono",children:Math.round(((k=c==null?void 0:c[o.lift])==null?void 0:k.bestE1RM)||0)})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[N.isPR?e.jsxs("div",{className:"inline-flex items-center gap-2 text-green-300 text-sm",children:[e.jsx(_,{className:"w-4 h-4"})," New PR detected — save it."]}):e.jsxs("div",{className:"inline-flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(G,{className:"w-4 h-4"})," Enter reps to evaluate e1RM vs best."]}),e.jsx("button",{onClick:()=>F(o.lift,Math.round(N.e1rm)),className:`px-3 py-1 rounded border ${N.isPR?"border-green-500 text-green-200 hover:bg-green-900/20":"border-gray-600 text-gray-200 hover:bg-gray-700/40"}`,children:"Save as PR"})]})]})]})}export{ae as default};
//# sourceMappingURL=Step4CycleAndProgression-DhMvvWvV.js.map
